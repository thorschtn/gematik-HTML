<html>
 <head>
  <link rel="stylesheet" href="attachments/styleSheetForToc.css">
 </head>
 <body>
  <p id="polarion_59"> <br> </p>
  <p id="polarion_120"> <br> </p>
  <p id="polarion_161"> <br> </p>
  <p id="polarion_162"> <br> </p>
  <p id="polarion_163"> <br> </p>
  <p id="polarion_165"> <span style="font-weight: bold;text-decoration: underline;font-size: 11pt;font-family: Arial, Helvetica, sans-serif;line-height: 1.5;">Elektronische Gesundheitskarte und Telematikinfrastruktur</span> </p>
  <p id="polarion_190"> <br> </p>
  <p id="polarion_256"> <br> </p>
  <p id="polarion_296"> <br> </p>
  <p id="polarion_298"> <br> </p>
  <p id="polarion_299" style="text-align: center;"> <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">Spezifikation</span> </p>
  <p id="polarion_304" style="text-align: center;"> <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">TI-Messenger-Dienst</span> </p>
  <p id="polarion_306"> <br> </p>
  <p id="polarion_307"> <br> </p>
  <p id="polarion_308"> <br> </p>
  <div id="polarion_editor_html_block309" class="polarion-dle-wiki-block"> 
   <div id="polarion_editor_html_block_content" contenteditable="false"></div>
   <pre id="polarion_editor_html_block_source" class="polarion-dle-wiki-block-source" contenteditable="false">
    <table>
     <tr>
      <td>Version</td>
      <td>1.1.0</td>
     </tr>
     <tr>
      <td>Revision</td>
      <td>567556</td>
     </tr>
     <tr>
      <td>Stand</td>
      <td>29.07.2022</td>
     </tr>
     <tr>
      <td>Status</td>
      <td>in Bearbeitung</td>
     </tr>
     <tr>
      <td>Klassifizierung</td>
      <td>öffentlich</td>
     </tr>
     <tr>
      <td>Referenzierung</td>
      <td>gemSpec_TI-Messenger-Dienst</td>
     </tr>
    </table></pre> 
  </div>
  <p id="polarion_310"></p>
  <h1 id="polarion_wiki macro name=module-workitem;params=id=ML-121891">Dokumentinformationen</h1>
  <p id="polarion_312"></p>
  <p id="polarion_314"> <span style="font-weight: bold;">Änderungen zur Vorversion</span> </p>
  <p id="polarion_315">Anpassungen des vorliegenden Dokumentes im Vergleich zur Vorversion können Sie der nachfolgenden Tabelle entnehmen.</p>
  <p id="polarion_317"></p>
  <p id="polarion_318" data-keep-next="true"> <span style="font-weight: bold;">Dokumentenhistorie</span> </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=319" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 78px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Version<br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 86.8px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;font-size: 9pt;line-height: 1.5;">Stand<br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 65.2px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;font-size: 9pt;line-height: 1.5;">Kap./ Seite<br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 348.4px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;font-size: 9pt;line-height: 1.5;">Grund der Änderung, besondere Hinweise<br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120.4px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;font-size: 9pt;line-height: 1.5;">Bearbeitung<br> </span></th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">1.0.0</span></td> 
     <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">01.10.2021</span></td> 
     <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Erstversion des Dokumentes&nbsp;&nbsp;</span></td> 
     <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">1.1.0</span></td> 
     <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">29.07.2022</span></td> 
     <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Überarbeitung folgender Features:<br> – Erreichbarkeit einzelner Organisationseinheiten mittels Funktionsaccounts<br> – Öffnung des TI-Messengers für Drittsysteme durch clientseitige Schnittstellen zur Integration z.B. ins Praxisverwaltungssystem&nbsp;<br> – schnelles Finden von Kontaktdaten durch Zugriff auf FHIR-basiertes Adressbuch&nbsp;</span></td> 
     <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">16.08.22</td> 
     <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Möglichkeit einer Art Zugriffskontrolle für Org-Admin</td> 
     <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;"></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_320"></p>
  <h1 id="polarion_wiki macro name=module-workitem;params=id=ML-121892">Inhaltsverzeichnis</h1>
  <div id="polarion_wiki macro name=toc"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion_wiki macro name=module-workitem;params=id=ML-121891">Dokumentinformationen</a></li>
   <li><a href="#polarion_wiki macro name=module-workitem;params=id=ML-121892">Inhaltsverzeichnis</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121893">1 Einordnung des Dokumentes</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121894">1.1 Zielsetzung</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121895">1.2 Zielgruppe</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121896">1.3 Geltungsbereich</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121897">1.4 Abgrenzungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121898">1.5 Methodik</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121899">2 Systemüberblick</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121900">3 Systemkontext</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121901">3.1 Akteure und Rollen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121992">3.2 Nachbarsysteme</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121980">3.3 Ausprägungen des Messenger-Services</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132657">3.4 TI-Messenger Föderation</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122581">3.5 Berechtigungskonzept</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122819">3.6 Verwendung der Token</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121903">4 Systemzerlegung</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132109">4.1 IDP-Dienst</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122037">4.2 VZD-FHIR-Directory</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122038">4.3 TI-Messenger-Fachdienst</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122042">4.3.1 Registrierungs-Dienst</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122041">4.3.2 Push-Gateway</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122039">4.3.3 Messenger-Service</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122880">4.3.3.1 Messenger-Proxy</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122879">4.3.3.2 Matrix-Homeserver</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122036">4.4 TI-Messenger-Client</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121904">5 Übergreifende Festlegungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122033">5.1 Datenschutz und Sicherheit</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122031">5.2 Verwendete Standards</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122035">5.3 Authentifizierung und Autorisierung</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122030">5.3.1 Authentifizierung von Akteuren am Messenger-Service</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132207">5.3.2 Authentifizierung am VZD-FHIR-Directory</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122034">5.3.3 Autorisierung am Messenger-Service</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132206">5.3.4 Autorisierung am VZD-FHIR-Directory</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122573">5.4 Rechtekonzept VZD-FHIR-Directory</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123889">5.4.1 Lesezugriff</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-131799">5.4.2 Schreibzugriff</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-133382">5.5 User Management</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132208">5.6 Funktionsaccounts</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132904">5.7 Test</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122652">5.8 Betrieb</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121968">6 Anwendungsfälle</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-128575">6.1 AF - Authentisieren einer Organisation am TI-Messenger-Dienst</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123867">6.2 AF - Bereitstellung eines Messenger-Service für eine Organisation</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123869">6.3 AF - Organisationsressourcen im Verzeichnisdienst hinzufügen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123865">6.4 AF - Anmeldung eines Akteurs am Messenger-Service</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123866">6.5 AF - Akteur (User-HBA) im Verzeichnisdienst hinzufügen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123870">6.6 AF - Föderationszugehörigkeit eines Messenger-Service prüfen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-129318">6.7 AF - Einladung von Akteuren innerhalb einer Organisation</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123872">6.8 AF - Austausch von Events zwischen Akteuren innerhalb einer Organisation</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123868">6.9 AF - Einladung von Akteuren außerhalb einer Organisation</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123871">6.10 AF - Austausch von Events zwischen Akteuren außerhalb einer Organisation</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121920">7 Anhang A – Verzeichnisse</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121921">7.1 Abkürzungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121922">7.2 Glossar</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121923">7.3 Abbildungsverzeichnis</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121924">7.4 Tabellenverzeichnis</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121925">7.5 Referenzierte Dokumente</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121926">7.5.1 Dokumente der gematik</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-121927">7.5.2 Weitere Dokumente</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-124860">8 Anhang B - Abläufe</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-129343">8.1 Einträge im VZD-FHIR-Directory suchen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-129871">8.2 Aktualisierung der Föderationsliste</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-132682">8.3 Stufen der Berechtigungsprüfung</a></li>
  </div>
  <p id="polarion_321"></p>
  <div id="polarion_wiki macro name=page_break;params=uid=322" contenteditable="false" data-is-landscape="false"></div>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121893">1 Einordnung des Dokumentes</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121894">1.1 Zielsetzung</h3>
  <p id="polarion_323"> Beim vorliegenden Dokument handelt es sich um die Festlegungen zur ersten Ausbaustufe des TI-Messengers. Diese Ausbaustufe ist definiert durch die Ad-hoc-Kommunikation zwischen <span id="polarion-comment:523"></span>Organisationen des Gesundheitswesens. Dabei wird insbesondere die Ad-hoc-Kommunikation zwischen Leistungserbringern bzw. zwischen Leistungserbringerinstitutionen betrachtet. <span id="polarion-comment:382"></span> Festlegungen zur Nutzergruppe der Versicherten und Anforderungen an <span id="polarion-comment:662"></span>Krankenversicherungsorganisationen werden in der zweiten Ausbaustufe des TI-Messengers Berücksichtigung finden und daher im vorliegenden Dokument nicht weiter betrachtet.<span id="polarion-comment:385"></span><span id="polarion-comment:368"></span> </p>
  <p id="polarion_324"> Dieses Dokument beschreibt basierend auf den Anforderungen des Konzeptpapiers TI-Messenger [gemKPT_TI_Messenger] die systemspezifische Lösung des TI-Messengers des deutschen Gesundheitswesens. An dieser Stelle werden insbesondere die Anforderungen des Konzeptes in Form von definierten Anwendungsfällen zu Herstellung, Test und Betrieb des TI-Messenger-Dienstes beschrieben. Die jeweiligen Anwendungsfälle beschreiben den gesamten, für die Erfüllung notwendigen, Prozess und benennen alle für die Umsetzung notwendigen Teilkomponenten. Die weitere funktionale Spezifikation erfolgt in der jeweiligen dedizierten Spezifikation des Produkttyps.<span id="polarion-comment:524"></span> </p>
  <p id="polarion_325">Die vorliegende Spezifikation ist als funktionale Einheit mit der jeweils auf einen konkreten Produkttyp bezogenen Spezifikation zu betrachten.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121895">1.2 Zielgruppe</h3>
  <p id="polarion_327"> Das Dokument richtet sich zum Zwecke der Realisierung<span id="polarion-comment:380"></span> an Hersteller von Produkttypen des TI-Messengers sowie an Anbieter, welche die beschriebenen&nbsp;Produkttypen betreiben. Alle Hersteller und Anbieter von TI-Anwendungen, deren Schnittstellen einen der Produkttypen des TI-Messengers nutzen, oder Daten mit den Produkttypen des TI-Messengers austauschen oder solche Daten verarbeiten,&nbsp;müssen dieses Dokument ebenso berücksichtigen. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121896">1.3 Geltungsbereich</h3>
  <p id="polarion_329">Dieses Dokument enthält normative Festlegungen zur Telematikinfrastruktur des deutschen Gesundheitswesens. Der Gültigkeitszeitraum der vorliegenden Version und deren Anwendung in Zulassungs- oder Abnahmeverfahren wird durch die gematik GmbH in gesonderten Dokumenten (z. B. gemPTV_ATV_Festlegungen, Produkttypsteckbrief, Anbietertypsteckbrief,&nbsp;u.a.) oder Webplattformen (z. B. gitHub, u.a.) festgelegt und bekanntgegeben.</p>
  <p id="polarion_330"></p>
  <p id="polarion_331"> <span style="font-weight: bold;">Schutzrechts-/Patentrechtshinweis</span> </p>
  <p id="polarion_332"> <span style="font-style: italic;">Die nachfolgende Spezifikation ist von der gematik allein unter technischen Gesichtspunkten erstellt worden. Im Einzelfall kann nicht ausgeschlossen werden, dass die Implementierung der Spezifikation in technische Schutzrechte Dritter eingreift. Es ist allein Sache des Anbieters oder Herstellers, durch geeignete Maßnahmen dafür Sorge zu tragen, dass von ihm aufgrund der Spezifikation angebotene Produkte und/oder Leistungen nicht gegen Schutzrechte Dritter verstoßen und sich ggf. die erforderlichen Erlaubnisse/Lizenzen von den betroffenen Schutzrechtsinhabern einzuholen. Die gematik GmbH übernimmt insofern keinerlei Gewährleistungen.</span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121897">1.4 Abgrenzungen</h3>
  <p id="polarion_334">In diesem Dokument werden die übergreifenden Anforderungen in Form von Anwendungsfällen spezifiziert. Die Funktionsmerkmale, die für die hier beschriebenen Anwendungsfälle genutzt werden, werden in den Spezifikationen der einzelnen Produkttypen des TI-Messenger-Dienstes weiter definiert.</p>
  <p id="polarion_335"> Die vom TI-Messenger-Dienst bereitgestellten Schnittstellen werden in den Spezifikationen der einzelnen Komponenten des TI-Messenger-Dienstes definiert. Von anderen Produkttypen benutzte Schnittstellen werden hingegen in der Spezifikation desjenigen Produkttypen beschrieben, der diese Schnittstelle bereitstellt. Auf die entsprechenden Dokumente wird referenziert.<span id="polarion-comment:381"></span> </p>
  <p id="polarion_336"> Die vollständige Anforderungslage für den TI-Messenger-Dienst ergibt sich aus mehreren Spezifikationsdokumenten.&nbsp;Diese sind in den einzelnen <span id="polarion-comment:140"></span>Produkt-&nbsp; und Anbietertypsteckbriefen des TI-Messengers verzeichnet. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121898">1.5 Methodik</h3>
  <p id="polarion_338">Die Spezifikation ist im Stil einer RFC-Spezifikation verfasst. Dies bedeutet:&nbsp;</p>
  <ul id="polarion_339"> 
   <li><span style="font-weight: bold;">Der gesamte Text in der Spezifikation ist sowohl für den Hersteller des Produktes TI-Messenger-Dienst als auch für den betreibenden Anbieter entsprechend&nbsp; [gemKPT_Betr] verbindlich zu betrachten und gilt als Zulassungskriterium beim Produkt und Anbieter.<span id="polarion-comment:354"></span></span></li> 
   <li>Die Verbindlichkeit SOLL durch die dem RFC 2119 [RFC2119] entsprechenden, in Großbuchstaben geschriebenen deutschen Schlüsselworte MUSS, DARF NICHT, SOLL, SOLL NICHT, KANN gekennzeichnet werden.&nbsp;</li> 
   <li>Da in dem Beispielsatz „Eine leere Liste DARF NICHT ein Element besitzen.“ die Phrase „DARF NICHT“ semantisch irreführend wäre (wenn nicht ein, dann vielleicht zwei?), wird in diesem Dokument stattdessen „Eine leere Liste DARF KEIN Element besitzen.“ verwendet.</li> 
   <li>Die Schlüsselworte KÖNNEN außerdem um Pronomen in Großbuchstaben ergänzt werden, wenn dies den Sprachfluss verbessert oder die Semantik verdeutlicht.</li> 
  </ul>
  <p id="polarion_340">Anwendungsfälle und Akzeptanzkriterien&nbsp;als Ausdruck normativer Festlegungen werden als Grundlage für Erlangung der Zulassung durch Tests geprüft und nachgewiesen. Sie besitzen eine eindeutige, permanente ID, welche als Referenz verwendet werden SOLL. Die Tests werden gegen eine von der gematik gestellte Referenz-Implementierung durchgeführt.&nbsp;</p>
  <p id="polarion_341"> Anwendungsfälle und Akzeptanzkriterien werden im Dokument wie folgt dargestellt:<br> <span style="font-weight: bold;">&lt;ID&gt; - &lt;Titel des Anwendungsfalles / Akzeptanzkriteriums&gt;<br> </span>Text / Beschreibung<br> [&lt;=] </p>
  <p id="polarion_342">Die einzelnen Elemente beschreiben:</p>
  <ul id="polarion_343"> 
   <li><span style="font-weight: bold;">ID</span>: einen eindeutigen Identifier. </li> 
   <ul> 
    <li>Bei einem Anwendungsfall besteht der Identifier aus der Zeichenfolge 'AF_' gefolgt von einer Zahl,&nbsp;</li> 
    <li>Der Identifier eines Akzeptanzkriterium wird von System vergeben, z.B. die Zeichenfolge 'ML_' gefolgt von einer Zahl</li> 
   </ul> 
   <li><span style="font-weight: bold;">Titel des Anwendungsfalles / Akzeptanzkriteriums</span>: Ein Titel, welcher zusammenfassend den Inhalt beschreibt</li> 
   <li><span style="font-weight: bold;">Text / Beschreibung</span>: Ausführliche Beschreibung des Inhalts. Kann neben Text Tabellen, Abbildungen und Modelle enthalten</li> 
  </ul>
  <p id="polarion_344">Dabei umfasst der Anwendungsfall bzw. das Akzeptanzkriterium sämtliche zwischen ID und Textmarke [&lt;=] angeführten Inhalte.</p>
  <p id="polarion_345">Der für die Erlangung einer Zulassung notwendige&nbsp; Nachweis der Erfüllung des Anwendungsfalls wird in den jeweiligen&nbsp; Steckbriefen festgelegt, in denen jeweils der Anwendungsfall gelistet ist. Akzeptanzkriterien werden in der Regel nicht im Steckbrief gelistet.</p>
  <p id="polarion_346"> <span style="font-weight: bold;">Hinweis auf offene Punkte</span> </p>
  <table id="polarion_wiki macro name=table;params=header=no|width=100%|uid=347" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;"> 
   <tbody> 
    <tr> 
     <td style="width: 591.6px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-style: italic;color: #3333FF;">Offener Punkt: Das Kapitel wird in einer späteren Version des Dokumentes ergänzt.</span></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_348"></p>
  <div id="polarion_wiki macro name=page_break;params=uid=349" contenteditable="false" data-is-landscape="false"></div>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121899">2 Systemüberblick</h2>
  <p id="polarion_350">Der sichere Nachrichtenaustausch zwischen beteiligten Akteuren des deutschen Gesundheitswesens erfolgt über die von TI-Messenger-Anbietern bereitgestellten TI-Messenger-Fachdienste und TI-Messenger-Clients. Die Ad-Hoc Kommunikation zwischen den Akteuren findet hierbei über zugelassene TI-Messenger-Clients statt. Die Produkttypen TI-Messenger-Fachdienst sowie TI-Messenger-Client werden durch von der gematik zugelassene TI-Messenger-Anbieter bereitgestellt.</p>
  <p id="polarion_3"> Ein TI-Messenger-Fachdienst besteht aus einem oder mehreren Messenger-Services (basierend auf dem Matrix-Protokoll) die jeweils für eine Organisation (SMC-B-Inhaber) des Gesundheitswesens bereitgestellt werden. Diese&nbsp;unterscheiden sich lediglich in der Art des verwendeten Authentifizierungsverfahrens. <span id="polarion-comment:480"></span> Akteure, die zugehörig zu einer Organisation agieren, KÖNNEN den durch diese Organisation bereitgestellten Messenger-Service verwenden und die innerhalb diese<span style="font-style: normal;">r&nbsp;</span>Organisation bereits eigesetzten Authentifizierungsmethoden nachnutzen. Dies ermöglicht eine nahtlose Integration in den Alltag. Akteure, die nicht zugehörig zu einer Organisation agieren, KÖNNEN Messenger-Services von Verbänden nutzen, falls diese durch einen Verband für ihre Mitglieder zur Verfügung gestellt werden. Hierbei kann das bestehende Authentifizierungsverfahren des Verbandes verwendet werden.&nbsp;Messenger-Services KÖNNEN mit unterschiedlichen TI-Messenger-Clients verwendet werden. So ist es beispielweise möglich, dass ein Arzt, der parallel in einer Klinik und in einer niedergelassenen Praxis tätig ist, durch beide Organisationen jeweils einen Messenger-Service zur Verfügung gestellt bekommt.<span id="polarion-comment:527"></span>&nbsp; </p>
  <p id="polarion_74"> Die Messenger-Services des TI-Messenger-Dienstes werden in einer TI-Föderation zusammengefasst, um nicht zugehörige Messenger-Dienste auszuschließen. Um Teil der Föderation des TI-Messenger-Dienstes zu werden, MUSS die jeweilige Domain eines Messenger-Services vom TI-Messenger-Anbieter durch den Registrierungs-Dienst des TI-Messenger-Fachdienstes im VZD-FHIR-Directory hinterlegt werden. Ist dies erfolgt, erhalten dessen Akteure Lesezugriff auf das VZD-FHIR-Directory und KÖNNEN je nach Berechtigung die Kommunikation mit Akteuren in anderen Organisationen starten. Die Kommunikation findet dabei <span id="polarion-comment:287"></span>Ende-zu-Ende-verschlüsselt zwischen den jeweiligen beteiligten Messenger-Services und TI-Messenger-Clients statt.&nbsp;Die Adressierung der Akteure innerhalb eines Messenger-Services erfolgt über die Matrix-User-ID und wird im Kontext des TI-Messenger-Dienstes als MXID bezeichnet. Um die beteiligten Akteure über den Eingang neuer Nachrichten zu informieren, MUSS der TI-Messenger-Fachdienst über<span id="polarion-comment:647"></span> ein Push-Gateway verfügen. </p>
  <p id="polarion_353" style="margin-left: 0px;text-align: left;"> In der folgenden Abbildung<span id="polarion-comment:35"></span> sind alle beteiligten Komponenten der TI-Messenger-Architektur dargestellt: </p>
  <p id="polarion_92" style="text-align: center;"> <br> <img src="attachments/334-screenshot-20220525-090447.png" style="width: 550px;height: 415px;"> </p>
  <p id="polarion_356" style="margin-left: 0px;text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">1</span>:&nbsp; <span id="polarion-comment:447"></span>Komponenten der TI-Messenger-Architektur (vereinfachte Darstellung)&nbsp;<span id="polarion-comment:56"></span>&nbsp;<span style="background-color: #FFFF99;"><span id="polarion-comment:528"></span></span><span id="polarion-comment:57"></span> </p>
  <p id="polarion_357"> <br> <span id="polarion-comment:32"></span>Der TI-Messenger-Dienst basiert auf dem offenen Kommunikationsprotokoll Matrix, das bereits von der Matrix Foundation gemäß [Matrix Specification] spezifiziert ist. In den von der Matrix Foundation erstellten Spezifikationen ist sowohl die Client-Server- , die Server-Server-Kommunikation als auch die API des Matrix-Push-Gateways beschrieben. Für die Sicherstellung der föderalen und dezentralen Struktur des TI-Messenger-Dienstes im deutschen Gesundheitswesen und zur Einschränkung des Nutzerkreises werden weitere Komponenten benötigt, welche in der jeweiligen durch die gematik veröffentlichten Spezifikation&nbsp;<span id="polarion-comment:397"></span><span id="polarion-comment:530"></span> beschrieben werden.<br> </p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121900">3 Systemkontext</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121901">3.1 Akteure und Rollen</h3>
  <p id="polarion_359"> <span id="polarion-comment:312"></span><span id="polarion-comment:313"></span><span id="polarion-comment:626"></span><span id="polarion-comment:672"></span>Im Kontext des TI-Messenger-Dienstes werden verschiedene Akteure und Rollen definiert. Ein Akteur ist eine natürliche Person (Leistungserbringer / Mitarbeiter einer Organisation im Gesundheitswesen) oder ein technisches System (Chatbot)&nbsp;die mit einem TI-Messenger-Fachdienst interagieren. Abhängig von dem verwendeten Authentifizierungsverfahren am Messenger-Service eines TI-Messenger-Fachdienstes ergeben sich unterschiedliche Rollen, die ein Akteur einnehmen kann. Im Folgenden werden diese Rollen weiter beschrieben. <br> </p>
  <p id="polarion_94"> <span style="font-weight: bold;">Rolle: "User"</span> </p>
  <p id="polarion_122"> <span style="background-color: #FFFF99;"><span id="polarion-comment:663"></span></span>Die Rolle "User" kann von einem Leistungserbringer sowie von einem Mitarbeiter im Gesundheitswesen eingenommen werden. Die Authentifizierung des Akteurs erfolgt hierbei nicht über eine SMC-B oder einen HBA, sondern über ein vom Messenger-Service bereitgestelltes Authentifizierungsverfahren. Für einen Akteur in der Rolle "User" KANN dessen MXID im Organisationsverzeichnis auf dem VZD-FHIR-Directory hinterlegt werden, um für&nbsp;Akteure&nbsp;außerhalb seiner Organisation auffindbar zu werden. Chatbots zur Abbildung von Funktionsaccounts nehmen ebenfalls die Rolle "User" ein und werden im Kapitel <span style="font-style: italic;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132208" data-option-id="longoutline"></span></span> näher beschrieben. </p>
  <p id="polarion_96"> <span style="background-color: #FFFF99;"><br> </span> <span id="polarion-comment:668"></span>In dieser Rolle kann ein Akteur: </p>
  <ul id="polarion_140"> 
   <li>sich gegenüber einem Messenger-Service authentisieren und<br> </li> 
   <li>sich an einem Messenger-Service anmelden.<span style="background-color: #FFFF99;"><br> </span></li> 
  </ul>
  <p id="polarion_141"></p>
  <p id="polarion_55"> <span style="font-weight: bold;">Rolle: "User-HBA"</span> </p>
  <p id="polarion_64"> <span style="font-style: normal;"> </span> </p>
  <p id="polarion_91"> <span style="background-color: #FFFF99;"><span id="polarion-comment:664"></span></span>Die Rolle "User-HBA" kann ausschließlich von einem Leistungserbringer eingenommen werden. Die Authentifizierung des Akteurs erfolgt hierbei über&nbsp;seinen HBA. Ein Akteur in der Rolle <span style="font-style: normal;">"User-HBA"</span><span style="font-style: italic;"> </span><span style="font-style: normal;">KANN seine MXID im Personenverzeichnis im VZD-FHIR-Directory hinterlegen, damit andere Akteure in der Rolle "User-HBA", die ebenfalls die eigene MXID auf dem VZD-FHIR-Directory hinterlegt haben, ihn kontaktieren können. <br> <br> <span id="polarion-comment:667"></span>In dieser Rolle kann ein Akteur:<br> </span> </p>
  <ul id="polarion_142"> 
   <li><span style="font-style: normal;">sich am zuständigen IDP-Dienst authentisieren,</span></li> 
   <li><span style="font-style: normal;">sich am Messenger-Service&nbsp;anmelden und<br> </span></li> 
   <li><span style="font-style: normal;">seine MXID auf dem VZD-FHIR-Directory hinterlegen, um sich damit persönlich, sektorübergreifend erreichbar zu machen.</span></li> 
  </ul>
  <p id="polarion_146"></p>
  <p id="polarion_115"> <span style="font-weight: bold;font-style: normal;">Rolle: "Org-Admin"</span> </p>
  <p id="polarion_116"> <span style="font-style: normal;">Die Rolle "Org-Admin" stellt eine besondere Rolle im TI-Messenger Kontext dar. Leistungserbringer oder Mitarbeiter einer Organisation können diese Rolle einnehmen, nachdem sie ihre Organisation zuvor erfolgreich am Registrierungs-Dienst unter Verwendung ihrer&nbsp;SMC-B authentifiziert haben (siehe Anwendungsfall "10103 - <span style="font-style: italic;">Authentisieren einer Organisation am TI-Messenger Dienst</span>"). Nach der erfolgreichen Authentifizierung wird ein Admin-Account am Registrierungs-Dienst vom TI-Messenger-Fachdienst angelegt. Mit der Anmeldung am Registrierungs-Dienst über den Admin-Account nimmt ein Akteur die Rolle "Org-Admin" ein.<span id="polarion-comment:665"></span> Dieser KANN Messenger-Services für seine Organisation registrieren und Einträge im VZD-FHIR-Directory verwalten. </span>Für die <span style="font-style: normal;">Rolle <span style="font-style: italic;">"</span>Org-Admin"</span><span style="font-style: italic;"> </span>besteht die Notwendigkeit, Administratoren einzusetzen, welche für Themen der Informationssicherheit geschult und sensibilisiert wurden. Ebenfalls ist es möglich, dass die Organisation den TI-Messenger-Anbieter beauftragt, die <span style="font-style: normal;">Rolle <span style="font-style: italic;">"</span>Org-Admin"</span> zu übernehmen. </p>
  <p id="polarion_127"> <br> <span style="background-color: #FFFF99;"><span id="polarion-comment:669"></span></span>In dieser Rolle kann ein Akteur: </p>
  <ul id="polarion_153"> 
   <li>Messenger-Services für seine Organisation registrieren,</li> 
   <li>die Kontaktpunkte seiner Organisation auf dem VZD-FHIR-Server administrieren und damit sektorübergreifend erreichbar machen,</li> 
   <li>die Mitarbeiter der eigenen Organisation als&nbsp;Akteure dieses Messenger-Services im Matrix-Homeserver administrieren (Benutzerverwaltung) sowie für seine Organisation Funktionsaccounts einrichten und </li> 
   <li>Matrix-Homeserver-Konfigurationen&nbsp;für seine Organisation vornehmen. </li> 
  </ul>
  <p id="polarion_155"></p>
  <p id="polarion_126"> Die folgende Tabelle "<span style="font-style: italic;">Akteure und Rollen</span>" gibt einen Überblick über die im Kontext des TI-Messenger-Dienstes definierten Rollen, abhängig vom verwendeten Authentifizierungsverfahren, die ein Akteur einnehmen kann. Die Tabelle stellt alle möglichen Nutzerszenarien&nbsp;nach der Authentisierung mit Hilfe der SMC-B und erfolgreicher Authentifizierung einer Organisation am Registrierungs-Dienst dar. </p>
  <p id="polarion_362"></p>
  <p id="polarion_152" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> <span style="background-color: #FFFF99;"><span id="polarion-comment:666"></span></span>Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">1</span> Akteure und Rollen </p>
  <table id="polarion_wiki macro name=table;params=uid=153|width=96.31%" class="polarion-Document-table" style="width: 96.31%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Welcher Akteur bin ich<br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Wie authentisiere ich mich<br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Welcher Dienst authentifiziert mich<br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Welche Rolle nehme ich ein<br> </th> 
    </tr> 
    <tr> 
     <td colspan="1" rowspan="3" style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer<br> (z. B. Ärzte, Zahnärzte, Apotheker, psychologische Psychotherapeuten, Pflegepersonal, Hebammen, Mitarbeiter einer Kasse) im Sinne&nbsp;SGB V<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">VZD-FHIR-Directory</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User-HBA</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Authentifizierungsverfahren der Organisation</td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Messenger-Service</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Admin-Account Credentials<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Registrierungs-Dienst</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Org-Admin</td> 
    </tr> 
    <tr> 
     <td colspan="1" rowspan="2" style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Mitarbeiter einer Organisation im Gesundheitswesen,<br> die keine Leistungserbringer im Sinne&nbsp;SGB V sind.<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Authentifizierungsverfahren der Organisation<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Messenger-Service</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Admin-Account Credentials<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Registrierungs-Dienst</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Org-Admin</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Beauftragter Administrator eines <br> TI-Messenger-Anbieters</td> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Admin-Account Credentials</td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Registrierungs-Dienst</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Org-Admin</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Chatbot</td> 
     <td style="text-align: left;vertical-align: top;width: 237px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Authentifizierungsverfahren der Organisation</td> 
     <td style="text-align: left;vertical-align: top;width: 152px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Messenger-Service</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_154"> <br> <span style="font-style: italic;">Hinweis: Versicherte DÜRFEN aktuell NICHT als Akteure auf einem Messenger-Service eingetragen werden. Für die Nutzung eines Messenger-Service sind nur Akteure zugelassen, die durch ein bestehendes Vertragsverhältnis der jeweiligen Organisation zugeordnet werden können oder im Besitz eines HBAs sind.<br> <br> </span> </p>
  <p id="polarion_129">Im Folgenden wird die Kommunikation für eingehende und ausgehende Nachrichten aus der Sicht eines Akteurs in den verschiedenen Rollen in einer Kommunikationsmatrix verdeutlicht.</p>
  <p id="polarion_130"></p>
  <p id="polarion_131" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">2</span>: Kommunikationsmatrix </p>
  <table id="polarion_wiki macro name=table;params=uid=132|width=100.03%" class="polarion-Document-table" style="width: 100.03%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Org-Admin</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User-HBA</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: center;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Kommunikationsart</th> 
    </tr> 
    <tr> 
     <td colspan="4" rowspan="1" style="text-align: left;vertical-align: top;width: 89px;height: 29px;border: 1px solid #CCCCCC;padding: 5px;"><br> <span style="font-weight: bold;">Ausgehende Kommunikation an:</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteure in der Rolle "User" innerhalb seiner&nbsp;Organisation</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteure in der Rolle "User" außerhalb seiner&nbsp;Organisation</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteure in der Rolle "User-HBA" außerhalb seiner Organisation</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteure in der Rolle "User" und "User-HBA" durch Scan eines QR-Codes</td> 
    </tr> 
    <tr> 
     <td colspan="4" rowspan="1" style="text-align: left;vertical-align: top;width: 89px;height: 29px;border: 1px solid #CCCCCC;padding: 5px;"><br> <span style="font-weight: bold;">Eingehende Kommunikation von:</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteuren in der Rolle "User" innerhalb seiner&nbsp; Organisation</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteuren in der Rolle "User" außerhalb seiner&nbsp;Organisation </td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteure in der Rolle "User-HBA" außerhalb seiner Organisation&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: center;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: center;vertical-align: top;width: 88px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: center;vertical-align: top;width: 87px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">x</td> 
     <td style="text-align: left;vertical-align: top;width: 447px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteuren in der Rolle "User" und "User-HBA" durch Scan eines QR-Codes</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_135"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121992">3.2 Nachbarsysteme</h3>
  <p id="polarion_379" style="text-align: left;">Die folgende Abbildung zeigt die benachbarten Produkttypen des TI-Messenger-Dienstes:</p>
  <p id="polarion_380" style="text-align: center;"> <br> <img src="attachments/333-screenshot-20220525-090126.png" style="width: 700px;height: 164px;"> </p>
  <p id="polarion_381" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">2</span>: Benachbarten Produkttypen des TI-Messenger-Dienstes<span id="polarion-comment:559"></span> </p>
  <p id="polarion_382"></p>
  <p id="polarion_383"> <span style="background-color: #FFFF99;"><span id="polarion-comment:69"></span><span id="polarion-comment:481"></span></span>Der TI-Messenger-Dienst als System besteht aus den Komponenten TI-Messenger-Fachdienst und TI-Messenger-Client. <br> Der Registrierungs-Dienst des TI-Messenger-Fachdienstes nutzt die OAuth- und REST-Schnittstellen des VZD-FHIR-Directory, um sich mittels OAuth Client Credential Flow zu authentisieren um somit Zugriff auf das FHIR-Directory zu erhalten. Der TI-Messenger-Client nutzt die Schnittstellen eines&nbsp;zuständigen IDP-Dienstes zur Authentifizierung <span id="polarion-comment:545"></span>eines Akteurs sowie Schnittstellen des VZD-FHIR-Directory, um z. B. FHIR-Ressourcen&nbsp;zu finden oder zu ändern. </p>
  <p id="polarion_81"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121980">3.3 Ausprägungen des Messenger-Services</h3>
  <p id="polarion_385"> Der Messenger-Service ist eine Teilkomponente&nbsp;des TI-Messenger-Fachdienstes und wird durch den jeweiligen Anbieter <span id="polarion-comment:290"></span>für <span id="polarion-comment:634"></span>Organisationen bereitgestellt. Der Messenger-Service besteht aus einem Matrix-Homeserver (basierend auf dem Matrix-Protokoll) und einem Messenger-Proxy der sicherstellt, dass eine Kommunikation mit anderen Messenger-Services, als Teil des TI-Messenger-Dienstes,&nbsp;nur&nbsp;innerhalb der gemeinsamen TI-Föderation&nbsp;erfolgt. Die Messenger-Services KÖNNEN den Akteuren unterschiedliche Authentifizierungsverfahren anbieten,&nbsp;bei denen der Besitz einer SMC-B oder eines HBAs nicht vorausgesetzt wird<span id="polarion-comment:625"></span>. Messenger-Services MÜSSEN immer Organisationen bzw. Verbänden zugeordnet sein, die über die Kontrolle des verwendeten Authentifizierungsverfahren verfügen.<span id="polarion-comment:560"></span><span id="polarion-comment:424"></span><span id="polarion-comment:263"></span> </p>
  <p id="polarion_386"> Abhängig vom jeweiligen Messenger-Service<span style="text-decoration: line-through;"><span id="polarion-comment:259"></span></span> gibt es verschiedene Abläufe bei der Anmeldung an einem TI-Messenger-Fachdienst. Dabei können&nbsp;diverse Authentifizierungsmechanismen durch eine Organisation für Ihre Akteure bereitgestellt werden.<span id="polarion-comment:280"></span>&nbsp;Die Organisation und der von ihr gewählte TI-Messenger-Anbieter vereinbaren das zur Anwendung kommende Authentifizierungsverfahren bilateral und stimmen sich über die technische Realisierung der dafür notwendigen Anbindung ab. <span style="text-decoration: line-through;"><span id="polarion-comment:377"></span></span> Möglich ist beispielsweise die Nachnutzung eines in der Organisation betriebenen Active Directory (AD/LDAP) oder eines geeigneten Single-Sign-On-Verfahrens (SSO). Der Anbieter MUSS sicherstellen, dass die Organisation die Kontrolle über die jeweiligen Authentifizierungsmechanismen besitzt und die Möglichkeit erhält eine notwendige Löschung oder Sperrung eines Nutzer-Accounts sicherzustellen.<span id="polarion-comment:425"></span><span style="background-color: #99FFFF;"><span id="polarion-comment:261"></span></span> </p>
  <p id="polarion_387">Zum besseren Verständnis werden im Folgenden verschiedene, beispielhafte Anwendungsszenarien für den TI-Messenger skizziert und mögliche Ausprägungen eines Messenger-Service erläutert. Es besteht hierbei kein Anspruch auf Vollständigkeit :</p>
  <p id="polarion_196"></p>
  <p id="polarion_389"> <span style="font-weight: bold;background-color: #FFFFCC;"><span id="polarion-comment:325"></span></span><span style="font-weight: bold;">Anwendungsbeispiel für eine Arztpraxis</span> </p>
  <p id="polarion_103"> <span style="background-color: #FFFF99;"><span id="polarion-comment:692"></span></span>Die folgenden User Stories sollen die Bedarfe von niedergelassenen Leistungserbringern&nbsp;an asynchrone Ad-hoc-Kommunikation&nbsp;<span style="font-size: 10pt;line-height: 1.5;">beispielhaft</span>&nbsp;verdeutlichen:&nbsp; </p>
  <p id="polarion_191"> <span style="font-size: 10pt;line-height: 1.5;"><span style="font-weight: bold;">User Story 1 </span><span style="font-weight: normal;">- Nutzung des TI-Messengers unabhängig von der HBA-Verfügbarkeit</span><br> Als niedergelassener Arzt in einer Praxis&nbsp;stehe ich den Großteil meines Tages in direktem Patientenkontakt. Einen großen Teil der Organisation in der Praxis und der Kommunikation mit externen Stakeholdern übernimmt daher das Praxisteam. Als niedergelassener Arzt möchte ich meinem ganzen Praxisteam unabhängig von der Verfügbarkeit eines HBAs die Nutzung des TI-Messengers ermöglichen.</span> </p>
  <p id="polarion_186"> <span style="font-size: 10pt;line-height: 1.5;"><span style="font-weight: bold;">User Story 2 </span><span style="font-weight: normal;">- Persönliche Erreichbarkeit als Arzt</span><br> Als niedergelassener Arzt in einer Praxis&nbsp;möchte ich persönlich nicht immer für alle anderen TI-Messenger-Nutzer erreichbar sein. Vor allem für medizinische Anfragen von ärztlichen Kollegen möchte ich in der Nutzersuche intersektoral gefunden werden können.</span> </p>
  <p id="polarion_203"> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">User Story 3 </span><span style="font-weight: normal;font-size: 10pt;line-height: 1.5;">-&nbsp;Erreichbarkeit der eigenen Praxis für externe Leistungserbringer</span><br> <span style="font-size: 10pt;line-height: 1.5;"> Als niedergelassener Arzt in einer Praxis möchte ich, dass meine Praxis als Einrichtung im Gesundheitswesen für andere TI-Messenger-Nutzer erreichbar ist und adressiert werden kann. Dabei möchte ich selbst entscheiden, wie ich die individuelle Struktur meiner Praxis bei der Kontaktsuche abbilde und ob ich selbst oder mein Praxisteam initial in die Kommunikation eingebunden wird.</span> </p>
  <p id="polarion_193"> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">User Story&nbsp;</span><span style="font-size: 10pt;line-height: 1.5;"><span style="font-weight: bold;">4 </span><span style="font-weight: normal;">- Erreichbarkeit anderer Einrichtungen im Gesundheitswesen</span><br> Als niedergelassener Arzt in einer Praxis&nbsp;bekomme ich Patienten aus anderen Einrichtungen im Gesundheitswesen überwiesen und habe Rückfragen zu Befunden oder Verschreibungen. Besonders bei Einrichtungen, mit denen ich nicht regelmäßig im Kontakt stehe, möchte ich auch ohne bekannte Kontaktdaten eine Kommunikation aufbauen können und dabei sowohl die richtige Unterstruktur der Einrichtung (z. B. bestimmte Station in einem Krankenhaus) als auch den richtigen Ansprechpartner in dieser Unterstruktur (z. B. diensthabender Entscheider) erreichen können.</span> </p>
  <p id="polarion_207"> <span style="font-size: 10pt;line-height: 1.5;"> </span><span style="font-weight: bold;">User Story&nbsp;5 </span><span style="font-weight: normal;">- Herstellung des Fallbezugs bei Kommunikationen</span><br> Als niedergelassener Arzt in einer Praxis&nbsp;findet ein großer Teil meiner Kommunikation mit anderen Leistungserbringern unter Bezugnahme zu einem Patienten oder Fall statt. Meine Nachrichten möchte ich unter diesem Aspekt verwalten können. </p>
  <p id="polarion_212"> <span style="font-weight: bold;">User Story&nbsp;6 </span><span style="font-weight: normal;">- Archivieren von Kommunikationen</span><br> Als niedergelassener Arzt in einer Praxis&nbsp;möchte ich fallbezogene Kommunikation in meinem Praxisverwaltungssystem in der jeweiligen Akte&nbsp;dokumentieren und somit nachvollziehbar speichern können.&nbsp; </p>
  <p id="polarion_195"> <span style="font-weight: bold;">User Story 7 </span><span style="font-weight: normal;">- Geräte unabhängige Nutzung des TI-Messengers</span><br> Als Arzt&nbsp;in einer niedergelassenen Praxis arbeite ich vorrangig in meinem Praxisverwaltungssystem an meinem stationären Arbeitsplatz und möchte den TI-Messenger in diesem System integriert nutzen können. Wenn ich Hausbesuche mache, möchte ich zusätzlich&nbsp;die Möglichkeit haben, auch mobil auf alle meine Kommunikationen zuzugreifen und den TI-Messenger so überall nutzen können. </p>
  <p id="polarion_214"> <span style="font-weight: bold;">User Story 8 </span><span style="font-weight: normal;">- Archivierbarkeit von Kommunikationen</span> </p>
  <p id="polarion_192">Als Arzt in einer Praxis möchte ich fallbezogene Kommunikation in meinem Praxisverwaltungssystem in der jeweiligen lokalen Akte des Patienten dokumentieren und somit nachvollziehbar speichern können.&nbsp;</p>
  <p id="polarion_211"></p>
  <p id="polarion_205"> Aus den aufgezeigten User Stories ergibt sich der nachfolgende Ablauf für die Einrichtung und die <span style="font-size: 10pt;line-height: 1.5;">Administration</span>&nbsp;eines TI-Messenger-Services: </p>
  <p id="polarion_178"> <span style="font-weight: bold;"><span id="polarion-comment:384"></span></span> </p>
  <p id="polarion_390"> Ein Akteur in einer Arztpraxis authentisiert<span id="polarion-comment:674"></span>&nbsp;seine Organisation unter Verwendung der SMC-B bei einem Registrierungs-Dienst eines TI-Messenger-Anbieters. Nach erfolgreicher Authentifizierung durch den Registrierungs-Dienst wird für die Organisation ein Administrator-Account angelegt. Nach erfolgreicher Anmeldung am Registrierungs-Dienst nimmt der Akteur die Rolle "Org-Admin" ein und registriert einen Messenger-Service,&nbsp; der<span id="polarion-comment:562"></span> in einem Rechenzentrum bereitgestellt wird. Der Anbieter stellt daraufhin der Arztpraxis einen Messenger-Service mit einem sicheren Authentifizierungsverfahren bereit. Zusätzlich kann der Akteur in der Rolle "Org-Admin" <span style="font-style: normal;">Akteure für seine Organisation auf den Matrix-Homeserver einrichten (z. B. MFA, Ärzte).</span> Die angelegten Akteure melden sich am Messenger-Service an und können den TI-Messenger in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">User</span><span style="font-style: italic;">" </span>direkt nutzen. </p>
  <p id="polarion_85"> Ein Akteur in der Rolle "Org-Admin" richtet für seine Organisation Funktionsaccounts im Organisationsverzeichnis auf dem VZD-FHIR-Directory ein, um diese für Akteure anderer Organisationen des TI-Messenger-Dienstes&nbsp;erreichbar zu machen. Einem&nbsp;Funktionsaccount wird ein Akteur der Einrichtung (z. B. MFA) zugeordnet, der weitere Akteure in den Chatraum einladen kann. Akteure der Arztpraxis im Besitz eines HBAs (Rolle "<span style="font-style: normal;">User-HBA"</span>) können sich zusätzlich im TI-Messenger-Client mittels HBA authentisieren und so die eigene MXID als Practitioner-Eintrag im Personenverzeichnis auf dem VZD-FHIR-Directory hinterlegen.&nbsp;Somit haben sie zusätzlich die Möglichkeit andere, auf dem VZD-FHIR-Directory hinterlegte, HBA-Inhaber (Rolle <span style="font-style: normal;">"User-HBA"</span>)&nbsp;in einen Chatraum einzuladen oder für diese erreichbar zu<span id="polarion-comment:648"></span> werden.<span id="polarion-comment:565"></span> </p>
  <p id="polarion_392"></p>
  <p id="polarion_393"> <span style="font-weight: bold;background-color: #FFFFCC;"><span id="polarion-comment:329"></span><span id="polarion-comment:324"></span></span><span style="font-weight: bold;">Anwendungsbeispiel für ein Krankenhaus</span> </p>
  <p id="polarion_175"> <span style="background-color: #FFFF99;"><span id="polarion-comment:693"></span></span>Die folgenden User Stories sollen die Bedarfe innerhalb eines Krankenhauses an asynchrone Ad-hoc-Kommunikation beispielhaft verdeutlichen:&nbsp; </p>
  <p id="polarion_197"> <span style="font-weight: bold;">User Story&nbsp;1 </span><span style="font-weight: normal;">- Einfache Administration der Nutzer</span><br> Als IT-Administrator der Klinik möchte ich die Administration der Nutzer meiner Organisation beim TI-Messenger möglichst <span style="font-size: 10pt;line-height: 1.5;">automatisiert</span>&nbsp;abbilden können, um Arbeitsaufwand bei der regelmäßigen Pflege der Nutzereinträgen zu minimieren. </p>
  <p id="polarion_215"> <span style="font-weight: bold;">User Story&nbsp;2 </span><span style="font-weight: normal;">- Einfache Bereitstellung und Anmeldung am Dienst</span><br> Als Arzt in einer Klinik möchte ich die bereits vorhandenen Mittel zur Anmeldung an den IT-Systemen für den TI-Messenger nachnutzen können. Die Anmeldung am Dienst sollte für mich analog zu den Anmeldungen an anderen IT-Systemen ablaufen, die ich in der Klinik nutze. </p>
  <p id="polarion_217"> <span style="font-size: 10pt;line-height: 1.5;"><span style="font-weight: bold;">User Story&nbsp;3 </span><span style="font-weight: normal;">- Abbildbarkeit der unterschiedlichen Funktionsbereiche in einer Klinik</span><br> Als Arzt in einer Klinik habe ich Rückfragen an einen anderen Fachbereich und möchte die entsprechende Abteilung oder Station erreichen können, ohne dass ich bei der Kontaktsuche weiß, welche anderen Kollegen dort beschäftigt sind oder Dienst haben.&nbsp;</span> </p>
  <p id="polarion_219"> <span style="font-weight: bold;">User Story&nbsp;4 </span><span style="font-weight: normal;">- Interdisziplinäre Teams</span><br> Als Arzt in einer Klinik&nbsp; bin ich in einem interdisziplinären Team mit Kollegen anderer Fachrichtungen tätig und möchte dabei zu einem Fall neue Laborbefunde oder neu verfügbare Bilddaten mit den Kollegen austauschen können. </p>
  <p id="polarion_201"> <span style="font-weight: bold;">User Story&nbsp;5 </span><span style="font-weight: normal;">- Fallbasierte Kommunikation</span><br> Als Pflegefachkraft<span id="polarion-comment:695"></span> auf einer Station möchte ich die Kollegen auf meiner Station über Neuigkeiten zu einem Patienten informieren und relevante Informationen (z. B. anstehende To-Dos bei einem Schichtwechsel) teilen. </p>
  <p id="polarion_172"></p>
  <p id="polarion_183"> <span style="font-weight: normal;">Aus den aufgezeigten User Stories ergibt sich der nachfolgende Ablauf für die Einrichtung und die Administration eines TI-Messenger-Services innerhalb eines Krankenhauses:</span> </p>
  <p id="polarion_206"> <span style="font-weight: normal;">Ein Akteur eines Krankenhauses <span id="polarion-comment:675"></span>authentisiert sich mittels SMC-B bei dem Registrierungs-Dienst eines TI-Messenger-Anbieters. Der Registrierungs-Dienst verifiziert die verwendete SMC-B der Organisation. Bei Erfolg stellt der Registrierungs-Dienst der Organisation einen Administrator-Account bereit. Nach erfolgreicher Anmeldung am Registrierungs-Dienst nimmt der Akteur die Rolle "Org-Admin" ein und registriert einen Messenger-Service für das Krankenhaus. Dieser&nbsp;Service wird&nbsp;<span style="font-style: italic;">on-premise&nbsp;</span>im Krankenhaus bereitgestellt. Der Messenger-Service verwendet bei der Registrierung der Akteure am Matrix-Homeserver das bestehende Authentifizierungsverfahren des Krankenhauses (z. B. Active Directory). Die Akteure des Krankenhauses können anschließend mit den bestehenden Anmeldedaten den TI-Messenger-Dienst nahtlos verwenden, auch ohne im Besitz eines HBAs (Pflege, Therapeuten) zu sein. </span> </p>
  <p id="polarion_73"> <span style="font-weight: normal;"> Ein Akteur in der Rolle "Org-Admin" richtet für die Abteilungen in seinem Krankenhaus Funktionsaccounts im VZD-FHIR-Directory ein, um diese für Akteure außerhalb des Krankenhauses erreichbar zu machen. Einem&nbsp;Funktionsaccount wird ein Chatbot zugeordnet, der automatisiert den diensthabenden Arzt ermittelt und in den Chatraum einlädt. <br> <span id="polarion-comment:566"></span><span style="background-color: #FFFF99;"><span id="polarion-comment:310"></span></span></span> </p>
  <p id="polarion_396"></p>
  <p id="polarion_397"> <span style="font-weight: bold;">Anwendungsbeispiel für Apotheken</span> </p>
  <p id="polarion_181"> <span style="background-color: #FFFF99;"><span id="polarion-comment:694"></span></span>Die folgenden User Stories sollen die Bedarfe von Apotheken&nbsp;an asynchrone Ad-hoc-Kommunikation&nbsp;<span style="font-size: 10pt;line-height: 1.5;">beispielhaft</span>&nbsp;verdeutlichen:&nbsp; </p>
  <p id="polarion_194"> <span style="font-weight: bold;">User Story&nbsp;1 </span><span style="font-weight: normal;">- Versand von Fotos&nbsp;</span><br> Als Apotheker bin ich mit einem fehlerhaften Rezept konfrontiert und möchte den Sachverhalt mit dem verschreibenden Leistungserbringer klären. Dazu mache ich ein Foto von betreffenden Rezept und stelle meine Rückfrage per Chat an die Organisation des ausstellenden Leistungserbringers.<span style="background-color: #FFFF99;"><span id="polarion-comment:699"></span></span> </p>
  <p id="polarion_198"> <span style="font-weight: bold;">User Story 2 </span><span style="font-weight: normal;">- Gruppenchats zur regelmäßigen Informationsweitergabe&nbsp;</span> </p>
  <p id="polarion_199">Als Apotheker möchte ich die Leistungserbringer in räumlicher Nähe zu meiner Apotheke in einer gemeinsamen Gruppe über die Wiederverfügbarkeit eines vergriffenen Präparates informieren.&nbsp;</p>
  <p id="polarion_222"></p>
  <p id="polarion_200">Aus den aufgezeigten User Stories ergibt sich der nachfolgende Ablauf für die Einrichtung und die Administration eines TI-Messenger-Services innerhalb einer Apotheke:</p>
  <p id="polarion_226"> Ein Akteur einer Apotheke&nbsp;<span id="polarion-comment:677"></span>authentisiert sich mittels SMC-B bei dem Registrierungs-Dienst eines TI-Messenger-Anbieters. Der Registrierungs-Dienst verifiziert die verwendete SMC-B der Organisation. Bei Erfolg stellt der Registrierungs-Dienst der Organisation einen Administrator-Account bereit. Nach erfolgreicher Anmeldung am Registrierungs-Dienst nimmt der Akteur die Rolle "Org-Admin" ein und registriert einen Messenger-Service für die Apotheke, der in einem Rechenzentrum bereitgestellt wird. Für die Authentifizierung der Akteure am&nbsp;<span style="font-weight: normal;">Messenger-Service wird der zuständige&nbsp;<span id="polarion-comment:292"></span>IDP-Dienst der Apotheken verwendet,&nbsp;so dass die dort hinterlegten Akteure der Apotheken sich am TI-Messenger mittels OpenID-Connect anmelden können.</span> </p>
  <p id="polarion_160"> <span style="font-weight: normal;"> Die Apotheke wird als Organisation für andere Akteure des TI-Messengers erreichbar, indem ein Akteur in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">Org-Admin</span><span style="font-style: italic;">"</span> MXIDs von Akteuren seiner Apotheke im Organisationsverzeichnis auf dem VZD-FHIR-Directory einrichtet.<span id="polarion-comment:567"></span>&nbsp;Akteure der Apotheke im Besitz eines HBAs&nbsp;(Rolle <span style="font-style: italic;">"<span style="font-style: normal;">User-HBA</span>"</span>) hinterlegen zusätzlich mittels des TI-Messenger-Clients die eigene MXID als Practitioner-Eintrag im Personenverzeichnis auf dem VZD-FHIR-Directory. Somit haben sie zusätzlich die Möglichkeit andere, auf dem VZD-FHIR-Directory hinterlegte, HBA-Inhaber (Rolle <span style="font-style: italic;">"<span style="font-style: normal;">User-HBA</span>"</span>)&nbsp;in einen Chatraum einzuladen oder für diese erreichbar zu<span id="polarion-comment:650"></span> werden.</span> </p>
  <p id="polarion_400"></p>
  <p id="polarion_401"> <span style="font-weight: bold;">Anwendungsbeispiel für einen Verband für HBA-Inhaber</span> </p>
  <p id="polarion_173"> <span style="font-weight: bold;background-color: #FFFF99;"><span id="polarion-comment:676"></span></span>Die folgenden User Stories sollen die Bedarfe von Verbänden an asynchrone Ad-hoc-Kommunikation&nbsp;<span style="font-size: 10pt;line-height: 1.5;">beispielhaft</span>&nbsp;verdeutlichen:&nbsp; </p>
  <p id="polarion_174"> <span style="font-weight: bold;">User Story&nbsp;1 </span><span style="font-weight: normal;">- Diskussion von Fällen</span><br> Als Verband möchte ich meinen Mitgliedern eine Plattform geben, um schwierige Fälle gemeinschaftlich diskutieren zu können.&nbsp; </p>
  <p id="polarion_228"> <span style="font-weight: bold;">User Story&nbsp;2 </span><span style="font-weight: normal;">- Sichere <span style="font-size: 10pt;line-height: 1.5;">Kommunikation</span>&nbsp;unabhängig von der Einrichtung in der das Mitglied tätig ist</span><br> Als Verband möchte ich meinen Mitgliedern die Möglichkeit geben, persönlich im TI-Messenger erreichbar zu werden und so unabhängig von der Einrichtung, in der das jeweilige Mitglied tätig ist, den Dienst nutzen zu können. </p>
  <p id="polarion_229"></p>
  <p id="polarion_230">Aus den aufgezeigten User Stories ergibt sich der nachfolgende Ablauf für die Einrichtung und die Administration eines TI-Messenger-Services innerhalb eines Verbandes:</p>
  <p id="polarion_231">Der Verband hat eine SMC-B ORG beantragt, die für die&nbsp;Authentisierung am Registrierungs-Dienst eines TI-Messenger-Anbieters verwendet wurde.&nbsp;Der Registrierungs-Dienst verifiziert die verwendete SMC-B des&nbsp;Verbandes. Bei Erfolg stellt der Registrierungs-Dienst dem Verband einen Administrator-Account bereit. Nach erfolgreicher Anmeldung am Registrierungs-Dienst nimmt der Akteur die Rolle "Org-Admin" ein und registriert einen Messenger-Service für den Verband, der in einem Rechenzentrum bereitgestellt wird. Dieser Service wird für Mitarbeiter im Gesundheitswesen verfügbar gemacht, die nicht einer Organisation mit Zugriff auf eine SMC-B zugehörig sind.&nbsp;</p>
  <p id="polarion_167"> Akteure des Verbandes im Besitz eines HBAs (Rolle <span style="font-style: italic;">"<span style="font-style: normal;">User-HBA</span>"</span>) KÖNNEN zusätzlich mit dem TI-Messenger-Clients die eigene MXID als Practitioner-Eintrag im Personenverzeichnis auf dem VZD-FHIR-Directory hinterlegen.&nbsp;Damit können sie andere, auf dem VZD-FHIR-Directory hinterlegte, HBA-Inhaber (Rolle <span style="font-style: italic;">"<span style="font-style: normal;">User-HBA</span>"</span>)&nbsp;in einen Chatraum einladen oder für diese erreichbar werden. </p>
  <p id="polarion_136"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-132657">3.4 TI-Messenger Föderation</h3>
  <p id="polarion_95">Da der TI-Messenger-Dienst auf dem offenen und dezentralen Kommunikationsprotokoll Matrix basiert, MUSS gewährleistet werden, dass nur berechtigte Matrix-Homeserver eines Messenger-Services teilnehmen.</p>
  <p id="polarion_99"> Um allen berechtigten&nbsp;Akteuren des deutschen Gesundheitswesens den Zugang zum TI-Messenger-Dienst zu gewähren, MUSS ein Anbieter eines TI-Messengers für Leistungserbringerinstitutionen und/oder Organisationen eigene Messenger-Services bereitstellen. Um nicht zum TI-Messenger-Dienst gehörende Matrix-Homeserver ausschließen zu können, werden die Domainnamen (im Weiteren auch als Matrix-Domain bezeichnet) der Matrix-Homeserver der Messenger-Services in einer Föderationsliste zusammengefasst. Diese wird durch das VZD-FHIR-Directory bereitgestellt. <br> Voraussetzung für die Aufnahme in die Föderation ist der Betrieb eines Messenger-Proxies als Teil des Messenger-Services, der sicherstellen MUSS, dass nur zugelassene TI-Messenger-Fachdienste Zugang in die Föderation erhalten. Für die Aufnahme in die Föderation MÜSSEN ausschließlich&nbsp;Matrix-Homeserver verwendet werden.&nbsp;Es MUSS für die Aufnahme in die Föderation eine erfolgreiche Zulassung des TI-Messenger-Anbieters mit ebenfalls erfolgreichen Zulassungen für die Produkttypen TI-Messenger-Fachdienst und TI-Messenger-Client durch die gematik erfolgt sein. Nach einer erfolgreichen Zulassung&nbsp;erhält&nbsp;der Registrierungs-Dienst des jeweiligen Fachdienstes die Möglichkeit die Matrix-Domains der jeweiligen Messenger-Services einer entsprechenden Organisation auf dem VZD-FHIR-Directory zuzuordnen.&nbsp;Ein serverseitiges Bridging zu anderen Messaging-Protokollen DARF NICHT stattfinden. Um eine Integration eines TI-Messenger-Clients in bestehende Systemumgebungen (Primärsysteme oder alternative Messenger-Clients) zu ermöglichen, ist der clientseitige bidirektionale Austausch mit Drittsystemen erlaubt.<span id="polarion-comment:623"></span>&nbsp; </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122581">3.5 Berechtigungskonzept</h3>
  <p id="polarion_97"> Wie im Kapitel "TI-Messenger Föderation" beschrieben, dient die TI-Messenger-Föderation dazu, nicht zugelassene Matrix-Homeserver aus dem TI-Messenger-Dienst auszuschließen. Ebenfalls MUSS es möglich sein, dass nur die im Kapitel&nbsp;<span style="font-style: italic;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-121901" data-option-id="longoutline"></span>&nbsp;</span>genannten berechtigten Akteure miteinander kommunizieren dürfen. Hierfür ist die Etablierung eines Rechtekonzeptes innerhalb des TI-Messenger-Dienstes notwendig. </p>
  <p id="polarion_105">Das Rechtekonzept basiert auf einer mehrstufigen Prüfung. Mit Hilfe des Berechtigungskonzeptes wird nachgewiesen, ob ein Akteur berechtigt ist, innerhalb der TI-Messenger-Föderation einen Akteur in einen Chatraum einzuladen.</p>
  <p id="polarion_63"> Die einzelnen Stufen werden im Folgenden weiter beschrieben:<span id="polarion-comment:619"></span><br> </p>
  <p id="polarion_108"> <span style="font-weight: bold;">Berechtigungskonzept - Stufe 1<span id="polarion-comment:700"></span></span> </p>
  <p id="polarion_109"> <span style="font-weight: normal;">In der 1. Stufe MUSS geprüft werden, ob die in der Anfrage enthaltenen Matrix-Domains zugehörig zur TI-Föderation sind. Ist dies der Fall, <span id="polarion-comment:631"></span>MUSS die Anfrage an den Matrix-Homeserver des Einladenden weitergeleitet werden. Ist dies nicht der Fall, MUSS die&nbsp;beabsichtigte Anfrage des Akteurs vom Messenger-Proxy des Einladenden abgelehnt werden. Nach der Weiterleitung an den Matrix-Homeserver prüft dieser, ob der eingeladene Akteur der gleichen Organisation angehört. Stellt der Matrix-Homeserver fest das der eingeladene Akteur nicht zu seiner Domain gehört wird das&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> an den Messenger-Proxy des einzuladenden Akteurs weitergeleitet. Dieser prüft erneut die Zugehörigkeit zur TI-Föderation (Stufe 1). Bei erfolgreicher Prüfung erfolgt dann die Weiterverarbeitung gemäß der Stufe 2.</span> </p>
  <p id="polarion_124"></p>
  <p id="polarion_134"> <span style="font-weight: bold;">Berechtigungskonzept - Stufe&nbsp;2</span> </p>
  <p id="polarion_112"> In dieser Stufe prüft der Messenger-Proxy des Einzuladenden auf eine vorliegende Freigabe. Hierbei handelt es sich um eine Lookup-Table, in der alle erlaubten Akteure hinterlegt sind, von denen man eine Einladung in einen Chatraum akzeptiert. Ist ein Eintrag vom einladenden Akteur vorhanden, dann <span id="polarion-comment:632"></span>MUSS die beabsichtigte Einladung des Akteurs zugelassen werden. Ist dies nicht der Fall, MUSS die weitere Überprüfung gemäß der 3. Stufe erfolgen. </p>
  <p id="polarion_113"></p>
  <p id="polarion_114"> <span style="font-weight: bold;">Berechtigungskonzept - Stufe 3</span> </p>
  <p id="polarion_52"> In der letzten Stufe erfolgt die Prüfung ausgehend von den Einträgen der beteiligten Akteure im VZD-FHIR-Directory. Die Einladung <span id="polarion-comment:633"></span>MUSS zugelassen werden, wenn: </p>
  <ul id="polarion_168"> 
   <li>die MXID des einzuladenden Akteurs im Organisationsverzeichnis hinterlegt und seine Sichtbarkeit in diesem Verzeichnis nicht eingeschränkt ist oder <br> </li> 
   <li>der einladende sowie der einzuladende Akteur im Personenverzeichnis hinterlegt sind und der einzuladende Akteur seine Sichtbarkeit in diesem Verzeichnis nicht eingeschränkt hat<span id="polarion-comment:670"></span></li> 
  </ul>
  <p id="polarion_169">Ist die Prüfung nicht erfolgreich, dann MUSS die beabsichtigte Einladung des Akteurs vom Messenger-Proxy abgelehnt werden.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122819">3.6 Verwendung der Token</h3>
  <p id="polarion_413"> Für die Nutzung des TI-Messenger-Dienstes kommen unterschiedliche Arten von Token zur Authentisierung und Autorisierung&nbsp;<span id="polarion-comment:678"></span> an weiteren Diensten&nbsp;zum Einsatz die in verschiedenen Anwendungsfällen verwendet werden. Aus diesem Grund werden in der&nbsp;folgenden Tabelle die verschiedenen Token näher beschrieben.<span style="background-color: #99FF99;"> </span><span id="polarion-comment:77"></span> </p>
  <p id="polarion_414"></p>
  <p id="polarion_415" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">3</span>: Arten von Token </p>
  <table id="polarion_wiki macro name=table;params=uid=416|width=99.1%" class="polarion-Document-table" style="width: 99.1%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 139px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Token</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">ausgestellt vom<br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 456px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Beschreibung</th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 139px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">ID_TOKEN</td> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">IDP-Dienst</td> 
     <td style="text-align: left;vertical-align: top;width: 456px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Dieses Token wird auf Basis von SmartCard-Identitäten vom zuständigen IDP-Dienst ausgestellt. <br> <br> Dieses Token wird vom Frontend des Registrierungs-Dienstes sowie den TI-Messenger-Clients verwendet, um sich gegenüber dem Registrierungs-Dienst oder dem Auth-Service des VZD-FHIR-Directory zu authentifizieren.<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 139px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Matrix-ACCESS_TOKEN</td> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Matrix-Homeserver</td> 
     <td style="text-align: left;vertical-align: top;width: 456px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Nach der erfolgreichen Anmeldung eines Akteurs am Matrix-Homeserver wird ein Access-Token vom Matrix-Homeserver ausgestellt. Im Kontext des TI-Messenger-Dienstes wird das vom Matrix-Homeserver ausgestellte Access-Token als Matrix-ACCESS_TOKEN bezeichnet.<br> <br> Dieses Token MUSS im lokalen Speicher des TI-Messenger-Clients sicher abgespeichert werden. Dieses Token wird bei jeder weiteren Interaktion mit dem ausstellenden Matrix-Homeserver verwendet, um den TI-Messenger-Client zu berechtigen bestimmte Dienste des Servers zu nutzen<span id="polarion-comment:679"></span>. Es ist an die Session des jeweiligen TI-Messenger-Clients gebunden.</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 139px;height: 223px;border: 1px solid #CCCCCC;padding: 5px;">Matrix-OpenID-Token</td> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 223px;border: 1px solid #CCCCCC;padding: 5px;">Matrix-Homeserver</td> 
     <td style="text-align: left;vertical-align: top;width: 456px;height: 223px;border: 1px solid #CCCCCC;padding: 5px;">Bei dem Matrix-OpenID-Token handelt es sich um ein 3rd-Party-Token, welches von einem Matrix-Homeserver gemäß [Client-Server API#OpenID] bei Bedarf für einen Akteur ausgestellt wird. Im Kontext des TI-Messenger-Dienstes wird das 3rd-Party-Token als Matrix-OpenID-Token bezeichnet. <br> <br> Das Matrix-OpenID-Token wird für die Verifizierung eines Messenger-Services sowie für das Suchen von FHIR-Ressourcen im VZD-FHIR-Directory benötigt. Hierfür wird das Matrix-OpenID-Token im Auth-Service des Verzeichnisdienstes gegen ein search-accesstoken ersetzt, welches am FHIR-Proxy für die weitere Verarbeitung benötigt wird. Das ursprünglich ausgestellte Matrix-OpenID-Token wird dann nicht mehr benötigt. Zur Überprüfung der Gültigkeit des Matrix-OpenID-Token ruft der Auth-Service den Userinfo-Endpoint am jeweiligen Matrix-Homeserver auf.</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 139px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">provider-accesstoken</td> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">OAuth des <br> VZD-FHIR-Directory</td> 
     <td style="text-align: left;vertical-align: top;width: 456px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Das provider-accesstoken wird dem Registrierungs-Dienst durch den OAuth-Service des VZD-FHIR-Directory bereitgestellt.<br> <br> Ein provider-accesstoken wird benötigt, wenn der Registrierungs-Dienst eines TI-Messenger-Fachdienstes, nach der Bereitstellung eines neuen Messenger-Service für eine Organisation, einen neuen Eintrag für diese Ressource im VZD-FHIR-Directory anlegen oder der Registrierungs-Dienst eine Föderationsliste vom FHIR-Proxy abfragen möchte. Der Registrierung-Dienst übergibt dazu vereinbarte Client-Credentials an den OAuth-Service des VZD-FHIR-Directory&nbsp;und erhält nach der erfolgreichen Prüfung dieser Credentials das provider-accesstoken.<span id="polarion-comment:504"></span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 139px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">search-accesstoken</td> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Auth-Service des VZD-FHIR-Directory</td> 
     <td style="text-align: left;vertical-align: top;width: 456px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Das search-accesstoken wird einem berechtigten Akteur durch den Auth-Service das&nbsp;VZD-FHIR-Directory bereitgestellt.<br> <br> Dieses wird für die Suche im&nbsp;VZD-FHIR-Directory benötigt und stellt sicher, dass nur berechtigte Akteure im&nbsp;VZD-FHIR-Directory eine Suche auslösen können. Dazu wird das vom Matrix-Homeserver ausgestellte Matrix-OpenID-Token an den Auth-Service des VZD-FHIR-Directory übergeben. Dieses dient in diesem Fall als Nachweis, dass ein Akteur bei einem der TI-Föderation&nbsp;angehörenden Messenger-Service registriert ist. Nur dann wird durch den Auth-Service&nbsp;des&nbsp;VZD-FHIR-Directory ein search-accesstoken bereitgestellt. Es muss bei der dann folgenden Suche im VZD-FHIR-Directory im Aufruf enthalten sein. Die Prüfung erfolgt durch den FHIR-Proxy.</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 139px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">owner-accesstoken</td> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Auth-Service des VZD-FHIR-Directory</td> 
     <td style="text-align: left;vertical-align: top;width: 456px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Das owner-accesstoken wird einem berechtigten Akteur durch den Auth-Service das&nbsp;VZD-FHIR-Directory bereitgestellt.<br> <br> Dieses wird von einem Akteur in der Rolle "User-HBA" zur Verwaltung seiner FHIR-Ressource im Personenverzeichnis sowie von einem Akteur in der Rolle "Org-Admin" zum Hinzufügen der Organisations-Ressourcen im VZD-FHIR-Directory benötigt. Es dient zum Nachweis das die beabsichtigten Änderungen durch einen Akteur durchgeführt werden dürfen. Für die Authentifizierung&nbsp;<span style="font-size: 10pt;line-height: 1.5;"><span id="polarion-comment:573"></span></span>MUSS der jeweilige Akteur einen zuständigen IDP-Dienst benutzen. Das durch den IDP ausgestellte ID_TOKEN wird durch den Auth-Service des VZD-FHIR-Directory geprüft. Bei erfolgreicher Prüfung wird das owner-accesstoken vom Auth-Service ausgestellt.</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_417"> <span id="polarion-comment:575"></span> </p>
  <p id="polarion_9"></p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121903">4 Systemzerlegung</h2>
  <p id="polarion_418"> Wie bereits im Kapitel "<span style="font-style: italic;">Systemüberblick</span>" dargestellt sind bei der&nbsp;Umsetzung der Funktionalitäten des TI-Messenger-Dienstes mehrere Komponenten beteiligt, die durch verschiedene Anbieter bereitgestellt werden. Im Folgenden werden die jeweiligen beteiligten Komponenten des TI-Messenger-Dienstes weiter beschrieben. </p>
  <p id="polarion_419"> Die folgende Abbildung zeigt alle an der TI-Messenger-Architektur beteiligten Komponenten mit deren Schnittstellen.<br> </p>
  <p id="polarion_144" style="text-align: center;" class="polarion-rte-caption-paragraph"> <img src="attachments/392-screenshot-20220607-135150.png" style="width: 750px;height: 519px;"> </p>
  <p id="polarion_67" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">3</span>: Komponenten der&nbsp;TI-Messenger-Architektur und<span id="polarion-comment:28"></span> deren<span id="polarion-comment:580"></span><span id="polarion-comment:13"></span> Schnittstellen </p>
  <p id="polarion_422"></p>
  <p id="polarion_424"> Die in der Abbildung rot dargestellte Schnittstelle am Registrierungs-Dienst wird nicht durch die gematik normativ vorgegeben. Sie bietet einem Akteur in der Rolle "<span style="font-style: normal;">Org-Admin</span><span style="font-style: italic;">"</span> die Möglichkeit, Messenger-Services für seine Organisation zu administrieren. Bei dieser Schnittstelle bleibt es dem TI-Messenger-Fachdienst Hersteller überlassen diese in geeigneter Form umzusetzen. Die gematik gibt lediglich grundlegende bereitzustellende Funktionen vor.&nbsp; </p>
  <p id="polarion_65"> <span style="font-style: italic;">Hinweis: Weitere Informationen über das Zusammenspiel der Komponenten sind im Kapitel&nbsp; <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-121968" data-option-id="longoutline"></span>&nbsp;zu finden.</span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-132109">4.1 IDP-Dienst</h3>
  <p id="polarion_27"> Ein IDP-Dienst stellt JSON Web Token (JWT) für attestierte Identitäten aus. Er übernimmt die Aufgabe der Identifikation der&nbsp;Akteure für den Fachdienst. Das bedeutet, Fachdienste MÜSSEN keine Überprüfung der Akteure selbst implementieren, sondern KÖNNEN davon ausgehen, dass der Besitzer des bei ihnen vorgetragenen "ID_TOKEN" bereits identifiziert und authentifiziert <span id="polarion-comment:574"></span>wurde. Anwendungsfrontends können über die Authentifizierung des Akteurs am IDP-Dienst Zugriff (gegen Vorlage des ausgestellten ID_TOKEN) zu den von den Fachdiensten angebotenen Daten erhalten. </p>
  <p id="polarion_4"> In der ersten Ausbaustufe des TI-Messengers-Dienstes MUSS der von der gematik spezifizierte zentrale IDP-Dienst verwendet werden. Dieser ermöglicht die sichere Identifikation der Akteure anhand der ihnen bereitgestellten Identifikationsmittel (SMC-B / HBA). Die Identifikation des Akteurs wird anhand einer Smartcard und der Auswertung des vom Authenticator-Modul an den IDP-Dienst übergebenen Authentifizierungszertifikats (aus der Smartcard) sichergestellt. <span style="font-size: 10pt;line-height: 1.5;">Der Authenticator wird auf dezentraler Hardware in Windows-Systemumgebungen zusammen mit dem Primärsystem betrieben. Das Authenticator-Modul für den zentralen IDP-Dienst wird von der gematik bereitgestellt [gematik Authenticator]. Hersteller KÖNNEN eigene Authenticator Lösungen entwickeln.&nbsp;</span><span style="font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"><span id="polarion-comment:696"></span></span> </p>
  <p id="polarion_30">Werden zukünftig&nbsp;weitere zugelassene IDP-Dienste verfügbar KÖNNEN diese ebenfalls für die Authentifizierung von&nbsp;Akteuren genutzt werden. Im Folgenden wird nur noch der Begriff IDP-Dienst verwendet.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122037">4.2 VZD-FHIR-Directory</h3>
  <p id="polarion_33">Beim VZD-FHIR-Directory handelt es sich um einen zentralen Verzeichnisdient der TI, der die deutschlandweite Suche von Organisationen und Akteuren des TI-Messenger-Dienstes ermöglicht. Das VZD-FHIR-Directory basiert auf dem&nbsp;FHIR-Standard zum Austausch von definierten Informationsobjekten (FHIR-Ressourcen).</p>
  <p id="polarion_34"> Der Verzeichnisdienst bietet zwei Arten von Verzeichnistypen an, die durchsucht werden können. Für die Suche von Organisationseinträgen wird das Organisationsverzeichnis (<span style="font-style: italic;">HealthcareService</span>) und für die Suche von Akteuren das Personenverzeichnis (<span style="font-style: italic;">PractitionerRole</span>) verwendet.<span id="polarion-comment:576"></span> Im Organisationsverzeichnis sind alle auf eine Organisation bezogenen Ressourcen hinterlegt die durch einen <span style="font-style: normal;">Akteur in der Rolle "Org-Admin"</span> der Organisation gepflegt werden. Das Personenverzeichnis bietet Akteuren in der Rolle "User-HBA" die Möglichkeit, alle zu seiner&nbsp;<span style="font-style: italic;">PractitionerRole </span>gehörenden FHIR-Einträge zu konfigurieren. Für die Suche nach FHIR-Einträgen werden durch die TI-Messenger-Clients FHIR-Schnittstellen am VZD-FHIR-Directory aufgerufen. Bei der Verwendung der Schnittstellen MUSS sich der TI-Messenger-Client gegenüber dem VZD-FHIR-Directory authentifizieren. Für die Authentifizierung werden die im Kapitel "<span style="font-style: italic;">Verwendung der Token</span>" beschriebenen accesstoken (search-accesstoken und owner-accesstoken) verwendet. In der folgenden Tabelle werden die beiden Verzeichnistypen in Abhängigkeit der jeweiligen Identität und den sich daraus ergebenden Berechtigungen gezeigt. </p>
  <p id="polarion_78"></p>
  <p id="polarion_86" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">4</span>: Verzeichnistypen - Rechtekonzept<span id="polarion-comment:589"></span> </p>
  <table id="polarion_wiki macro name=table;params=uid=87|width=98.84%" class="polarion-Document-table" style="width: 98.84%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 153px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Verzeichnistyp</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 131px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">FHIR-Ressource</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 79px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Identität</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 100px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Rolle</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 229px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Berechtigungen</th> 
    </tr> 
    <tr> 
     <td colspan="1" rowspan="3" style="text-align: left;vertical-align: top;width: 153px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">Organisationsverzeichnis</td> 
     <td colspan="1" rowspan="3" style="text-align: left;vertical-align: top;width: 131px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">HealthcareService</td> 
     <td colspan="1" rowspan="1" style="text-align: left;vertical-align: top;width: 79px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">SMC-B</td> 
     <td style="text-align: left;vertical-align: top;width: 100px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">Org-Admin</td> 
     <td style="text-align: left;vertical-align: top;width: 229px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">Lese- und Schreibzugriff<span id="polarion-comment:652"></span><br> </td> 
    </tr> 
    <tr> 
     <td colspan="1" style="text-align: left;vertical-align: top;width: 79px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 100px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">User</td> 
     <td style="text-align: left;vertical-align: top;width: 229px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">Lesezugriff</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 79px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 100px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">User-HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 229px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">Lesezugriff</td> 
    </tr> 
    <tr> 
     <td colspan="1" rowspan="2" style="text-align: left;vertical-align: top;width: 153px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Personenverzeichnis</td> 
     <td colspan="1" rowspan="2" style="text-align: left;vertical-align: top;width: 131px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">PractitionerRole</td> 
     <td style="text-align: left;vertical-align: top;width: 79px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 100px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User-HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 229px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Lese- und Schreibzugriff<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 79px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 100px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span id="polarion-comment:681"></span>User</td> 
     <td style="text-align: left;vertical-align: top;width: 229px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Lesezugriff</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_88"></p>
  <p id="polarion_35">Zusätzlich zur Bereitstellung der Verzeichnistypen ermöglicht das VZD-FHIR-Directory ebenfalls die sektorenübergreifende Kommunikation. Hierfür wird die Matrix-Domain eines Messenger-Services durch einen Eintrag in das VZD-FHIR-Dircetory durch den Registrierungs-Dienst in die TI-Föderation aufgenommen. Für die Registrierung der Matrix-Domain wird durch den Registrierungs-Dienst eine REST-Schnittstelle am VZD-FHIR-Directory aufgerufen, die mittels OAuth2 Client Credentials Flow gesichert ist. Dies ermöglicht es TI-Messenger-Anbietern ihre betriebenen Messenger-Services in die TI-Messenger-Föderation aufzunehmen und zu verwalten.</p>
  <p id="polarion_36">Allgemein besteht das VZD-FHIR-Directory aus mehreren Teilkomponenten (FHIR-Proxy, Auth-Service, OAuth-Service und FHIR-Directory) die benötigt werden, um alle Funktionsmerkmale abbilden zu können. Im Folgenden werden die Teilkomponenten weiter beschrieben. Weiterführende Informationen zum VZD-FHIR-Directory sind in&nbsp;[api-vzd] zu finden.</p>
  <p id="polarion_37"> <span style="font-weight: bold;background-color: #FFFF99;"><br> </span><span style="font-weight: bold;">FHIR-Proxy</span> </p>
  <p id="polarion_38">Der FHIR-Proxy ist eine Teilkomponente des VZD-FHIR-Directory. Alle Anfragen an das FHIR-Directory werden über den FHIR-Proxy verarbeitet. Der FHIR-Proxy stellt die folgenden drei Schnittstellen zur Verfügung, die durch die TI-Messenger-Clients sowie durch den Registrierungs-Dienst aufgerufen werden:</p>
  <ul id="polarion_39"> 
   <li> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/search</span> (FHIR-Schnittstelle zur Suche)<br> </li> 
   <li> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/owner</span> (FHIR-Schnittstelle zur Pflege eigener Einträge)<br> </li> 
   <li> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services</span> (REST-Schnittstelle zur Pflege eigener TIM Provider Einträge) <br> </li> 
  </ul>
  <p id="polarion_40">Bei Aufruf der Schnittstellen MUSS ein entsprechendes access-token mit übergeben werden. Bei erfolgreicher Authentifizierung leitet der FHIR-Proxy die Anfragen an das FHIR-Directory weiter.</p>
  <p id="polarion_41"> <span style="font-weight: bold;background-color: #FFFF99;"><br> </span><span style="font-weight: bold;">Auth-Service</span> </p>
  <p id="polarion_42">Die Teilkomponente Auth-Service stellt den TI-Messenger-Clients die für den Aufruf der FHIR-Schnittstellen am FHIR-Proxy benötigen access-token aus. Hierbei werden die zwei folgenden REST-Schnittstellen:</p>
  <ul id="polarion_43"> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-authenticate </span>und<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"><br> </span></li> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/owner-authenticate</span></li> 
  </ul>
  <p id="polarion_44"> verwendet. Die Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-authenticate</span> erwartet ein Matrix-OpenID-Token, wohingegen bei der&nbsp;Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/owner-authenticate</span> ein ID_TOKEN übergeben werden muss. </p>
  <p id="polarion_45"> <span style="font-weight: bold;background-color: #FFFF99;"><br> </span><span style="font-weight: bold;">OAuth</span> </p>
  <p id="polarion_46"> Bei Aufruf der REST-Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services</span> durch den Registrierungs-Dienst am FHIR-Proxy wird ein accesstoken (provider-accesstoken) benötigt, welches von der Teilkomponente OAuth ausgestellt wird. Hierfür MUSS sich der Registrierungs-Dienst des TI-Messenger-Fachdienstes bei der Teilkomponente OAuth des VZD-FHIR-Directory mittels OAuth2 Client Credentials Flow authentisieren. Zuvor MUSS der TI-Messenger-Anbieter für seinen Registrierungs-Dienst beim VZD-Anbieter Client-Credentials beantragen. <span style="background-color: #FFFF99;"><span id="polarion-comment:496"></span></span> </p>
  <p id="polarion_47"> <span style="font-weight: bold;"> </span><span style="font-weight: normal;"><span style="font-weight: bold;background-color: #FFFF99;"><br> </span><span style="font-weight: bold;">FHIR-Directory<br> </span>Die Teilkomponente FHIR-Directory stellt das zentrale Verzeichnis der FHIR-Ressourcen bereit.</span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122038">4.3 TI-Messenger-Fachdienst</h3>
  <p id="polarion_426"> Der TI-Messenger-Fachdienst ist die zentrale Komponente des TI-Messenger-Dienstes zur Ad-hoc-Kommunikation zwischen mehreren Akteuren. Für die Kommunikation mit den TI-Messenger-Clients stellt der Fachdienst alle notwendigen Schnittstellen bereit. Für eine <span id="polarion-comment:315"></span>fachdienstübergreifende Kommunikation werden alle Nachrichten an die in der TI-Föderation gelisteten TI-Messenger-Fachdienste übermittelt. <span id="polarion-comment:296"></span>Es MUSS sichergestellt werden, dass die Organisation die Akteure jederzeit identifizieren kann und das die Organisationen Akteure jederzeit aus dem TI-Messenger-Dienst ausschließen können. Daher MUSS die Kontrolle über die Identitäten bei der Organisation liegen. Hierbei ist eine Delegierung, z. B. an einen Dienstleister zulässig.<span id="polarion-comment:389"></span><span id="polarion-comment:256"></span> Jeder Anbieter, der einen TI-Messenger-Fachdienst bereitstellt, MUSS einen Registrierungs-Dienst, ein Push-Gateway sowie einen oder mehrere Messenger-Services betreiben. Im Folgenden werden die einzelnen Komponenten weiter beschrieben.<span id="polarion-comment:449"></span>&nbsp; </p>
  <p id="polarion_428"> <span style="font-style: italic;">Hinweis: <span style="font-size: 10pt;line-height: 1.5;">Die Komponenten sind als logische Dienste zu verstehen, welche letztendlich die in der Spezifikation beschriebenen Funktionalitäten umsetzen MÜSSEN. Die tatsächliche Realisierung bzw. Trennung dieser Dienste darf variabel durch die Produkthersteller erfolgen, solange alle Anforderungen an die Funktionalität, Sicherheit und Interoperabilität stets erfüllt sind und eingehalten werden.</span></span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122042">4.3.1 Registrierungs-Dienst</h4>
  <p id="polarion_430"> Der Registrierungs-Dienst ist eine Komponente, die vom Hersteller des TI-Messenger-Fachdienstes umgesetzt werden MUSS. Durch diese MÜSSEN im VZD-FHIR-Directory die Matrix-Domains der TI-Messenger-Fachdienste,&nbsp;die an der Föderation des TI-Messengers teilnehmen, eingetragen werden. Die Eintragung der Matrix-Domain SOLL<span id="polarion-comment:577"></span> automatisch erfolgen. Ebenfalls KANN über den Registrierungs-Dienst das Accounting durchgeführt werden. Dies wird von der gematik nicht normativ festgelegt. </p>
  <p id="polarion_431"> Um einen benutzerfreundlichen Onboarding-Prozess zu gewährleisten&nbsp;MUSS der <span id="polarion-comment:305"></span>Registrierungs-Dienst die Bereitstellung eines Messenger-Service über ein Frontend ermöglichen (im Folgenden auch als Frontend des Registrierungs-Dienstes bezeichnet). Nach der erfolgreichen Authentisierung einer Organisation, durch Validierung eines ausgestellten ID_TOKEN von einem zuständigen IDP-Dienst, wird für einen Akteur in der Rolle "Org-Admin" ein Administrations-Account im Registrierungs-Dienst angelegt. Das ermöglicht es einem Akteur in der Rolle "Org-Admin" <span id="polarion-comment:680"></span>einen oder mehrere Messenger-Services für seine&nbsp;Organisation zu registrieren. Dazu MUSS das Frontend des Registrierungs-Dienstes bei&nbsp;<span id="polarion-comment:359"></span>allen durch ihn unterstützten IDP-Diensten registriert sein. Vor dem Anlegen eines neuen Messenger-Service MUSS der Registrierungs-Dienst prüfen, ob der beantragte Domain-Name<span id="polarion-comment:702"></span> verfügbar ist und diesen zur TI-Messenger Föderation hinzufügen.<span style="text-decoration: line-through;background-color: #FFFFCC;"><span id="polarion-comment:267"></span></span><span style="background-color: #99FF99;"><span id="polarion-comment:61"></span></span> </p>
  <p id="polarion_432"> Neben der Registrierung neuer Messenger-Services,<span id="polarion-comment:83"></span> dient der Registrierungs-Dienst als Middleware zwischen TI-Messenger-Services und dem VZD-FHIR-Directory und speichert eine aktuelle Liste aller verifizierten Domains (Föderationsliste), damit diese von den Messenger-Proxies des TI-Messenger-Fachdienstes abgerufen werden können (siehe Kapitel&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-122581" data-option-id="longoutline"></span>&nbsp; - Stufe 1). <span id="polarion-comment:627"></span> Eine weitere Funktion des Registrierungs-Dienstes ist die Überprüfung auf Einträge im VZD-FHIR-Directory. Diese dient ebenfalls dem Messenger-Proxy zur Prüfung von Berechtigungen bei der Kontaktaufnahme von anderen Akteuren (siehe Kapitel&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-122581" data-option-id="longoutline"></span>&nbsp; - Stufe 3). </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122041">4.3.2 Push-Gateway</h4>
  <p id="polarion_435"> Jeder Anbieter eines TI-Messenger-Fachdienstes MUSS ein Push-Gateway bereitstellen, um seinen registrierten Akteuren den Eingang neuer Nachrichten zu signalisieren. Das Push-Gateway ist gemäß der Matrix-Foundation-Spezifikation [Push Gateway API]<span id="polarion-comment:87"></span> zu implementieren. Dieses leitet die Benachrichtigung an Push-Dienste <span style="text-decoration: line-through;"><span id="polarion-comment:322"></span></span><span id="polarion-comment:336"></span> im Internet weiter. </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122039">4.3.3 Messenger-Service</h4>
  <p id="polarion_437"> Ein Messenger-Service besteht aus einem Messenger-Proxy und einem Matrix-Homeserver der gemäß der Spezifikation der Matrix Foundation implementiert ist. Messenger-Services unterscheiden sich lediglich durch die jeweils unterstützten Authentifizierungsverfahren.<span id="polarion-comment:326"></span> Es ist notwendig, dass sich die Messenger-Services mit steigender Last skalieren lassen.<span style="text-decoration: line-through;"><span id="polarion-comment:297"></span><span id="polarion-comment:257"></span></span> Eine Organisation des Gesundheitswesens wird logisch einem Messenger-Service zugeordnet.<span id="polarion-comment:269"></span> Näheres zur Absicherung der Komponenten der Messenger-Services findet sich in der Spezifikation des TI-Messenger-Fachdienstes [gemSpec_TI-Messenger-FD]. Im Folgenden werden die Komponenten beschrieben.<span style="background-color: #FFFFCC;"><span id="polarion-comment:270"></span></span><span id="polarion-comment:62"></span> </p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122880">4.3.3.1 Messenger-Proxy</h5>
  <p id="polarion_439"> <span id="polarion-comment:448"></span> </p>
  <p id="polarion_440" style="text-align: left;" data-keep-next="true">Der Messenger-Proxy als Prüfinstanz aller eingehenden Anfragen zum Messenger-Service ist für die Regelung der gemäß Matrix Client-Server-API und Matrix-Server-Server-API geltenden Aufrufe zuständig. Die hierbei jeweils umzusetzenden Prüfregeln unterscheiden sich und werden im Folgenden näher beschrieben. Die folgende Abbildung zeigt die durchzuführenden Prüfungen in Abhängigkeit der beabsichtigten Kommunikation.</p>
  <p id="polarion_83"></p>
  <p id="polarion_69" style="text-align: center;"> <img src="attachments/373-screenshot-20220602-150622.png" style="width: 700px;height: 310px;"> </p>
  <p id="polarion_119" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">4</span>: Darstellung der Berechtigungsprüfung am Messenger-Proxy </p>
  <p id="polarion_15"> <br> <span style="font-weight: bold;">Client-Server Proxy <br> </span><span style="font-weight: normal;">In der Funktion als Client-Server Proxy prüft</span><span style="font-weight: bold;"> </span><span style="font-weight: normal;">der Messenger-Proxy</span><span style="font-weight: bold;"> </span><span style="font-weight: normal;">eingehende <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Events </span></span>der TI-Messenger-Clients (in der Abbildung rot dargestellt)<span style="font-weight: normal;">.<span id="polarion-comment:578"></span>&nbsp; Hierbei MUSS der Messenger-Proxy prüfen, ob die in der Anfrage enthaltenen Matrix-Domains zur TI-Föderation gehören (siehe Kapitel<span style="font-style: italic;"> <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-122581" data-option-id="longoutline"></span> </span>&nbsp;- Stufe 1). Nach erfolgreicher Prüfung, wird das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> an den Matrix-Homeserver weitergeleitet. Der Matrix-Homeserver prüft daraufhin, ob die beteiligten Akteure auf dem selben Matrix-Homeserver registriert sind. Ist dies nicht der Fall, wird das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event </span></span>an den <span style="font-weight: normal;">zuständigen Messenger-Proxy des Einzuladenden weitergeleitet. In diesem Fall findet die weitere<span id="polarion-comment:653"></span> Prüfung beim Messenger-Proxy des Einzuladenden statt (Server-Server Proxy).</span> </p>
  <p id="polarion_14"></p>
  <p id="polarion_128"> <span style="font-weight: bold;">Server-Server Proxy <br> </span><span style="font-weight: normal;">In der Funktion als Server-Server Proxy prüft der Messenger-Proxy eingehende <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Events </span></span>anderer Messenger-Proxies<span style="font-weight: normal;">. Hierbei MÜSSEN alle Stufen gemäß Kapitel<span style="font-style: italic;"> <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-122581" data-option-id="longoutline"></span> </span>vom Messenger-Proxy geprüft werden<span style="font-style: normal;"> (in der Abbildung blau dargestellt). Ist keine der drei Stufen erfolgreich geprüft worden, dann MUSS der Messenger-Proxy die Verbindung ablehnen. </span></span> </p>
  <p id="polarion_121"> <span style="font-weight: normal;"><br> <span style="font-weight: bold;">Weiterführende Vorgaben</span></span> </p>
  <p id="polarion_76"> <span id="polarion-comment:628"></span>Der Messenger-Proxy MUSS eine Freigabeliste bereitstellen. Diese dient zur Prüfung von Berechtigungen bei der Kontaktaufnahme von anderen Akteuren (siehe Kapitel <a href="/polarion/#/project/Mainline_OPB1/wiki/Spezifikation/gemSpec_TI-Messenger-Dienst?selection=ML-122581" target="_top">3.5 - Berechtigungskonzept</a>&nbsp; - Stufe 2). Ebenfalls MUSS der Messenger-Proxy eine Schnittstelle bereitstellen, mit der TI-Messenger-Clients Berechtigungen in der Freigabeliste hinterlegen können.<span style="font-weight: bold;"> </span> </p>
  <p id="polarion_156"> Der Messenger-Proxy MUSS nach dem Erhalt einer neuen Föderationsliste vom Registrierungs-Dienst die Signatur der erhaltenen Datei prüfen und diese nur nach erfolgreicher Prüfung verwenden.<span style="background-color: #FFFF99;"><span id="polarion-comment:689"></span></span> </p>
  <p id="polarion_93"> <span style="font-weight: bold;"> </span>Die Komponente Messenger-Proxy MUSS für jeden Messenger-Service&nbsp;<span style="font-size: 10pt;line-height: 1.5;">separat</span>&nbsp;bereitgestellt werden.&nbsp;Es ist nicht zwingend notwendig, diese auf die Matrix-Server-Server-API und Matrix-Client-Server-API bezogenen Prüfungen durch getrennte Komponenten zu realisieren. Die Art der Umsetzung bleibt dem TI-Messenger-Fachdienst-Hersteller überlassen. </p>
  <p id="polarion_123"> Bei einer Nutzung des Messenger-Services für eine Organisation dient der Messenger-Proxy zusätzlich als Schnittstelle für den Anschluss des Authentifizierungs-Dienstes der Organisation an den Ziel Matrix-Homeserver.<br> <br> <span id="polarion-comment:37"></span> </p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122879">4.3.3.2 Matrix-Homeserver</h5>
  <p id="polarion_453"> Für den Betrieb des TI-Messenger-Dienstes MUSS der TI-Messenger-Anbieter mindestens einen Matrix-Homeserver&nbsp;<span id="polarion-comment:284"></span>gemäß der Matrix-Foundation Spezifikation in der sektorübergreifenden TI-Föderation betreiben. Es MÜSSEN alle Matrix-Homeserver die in der Föderation verwendet werden den Anforderungen der Matrix Foundation Spezifikation entsprechen.<span id="polarion-comment:337"></span> Über den Matrix-Homeserver findet die Ad-hoc-Kommunikation der Akteure sowie weitere Nutzerinteraktionen (z. B. Starten neuer Räume etc.) statt. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122036">4.4 TI-Messenger-Client</h3>
  <p id="polarion_456">Ein TI-Messenger-Client ist eine mobile oder stationäre Anwendung. Diese basiert auf der von der Matrix-Foundation definierten Spezifikation&nbsp;und ermöglicht die Ad-hoc-Kommunikation von Akteuren über den TI-Messenger-Dienst. Im Kontext des TI-Messenger-Dienstes wird zwischen zwei Ausprägungen des TI-Messenger-Clients unterschieden. Diese ergeben&nbsp;sich aus den jeweiligen Rollen der Akteure, die im Folgenden weiter beschrieben werden.</p>
  <p id="polarion_79"> Für die Realisierung von Anwendungsfällen, die ausschließlich ein Administrator der Organisation ausführt (siehe Kapitel <span style="font-style: italic;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-121968" data-option-id="longoutline"></span></span>, dem Akteur "<span style="font-style: normal;">Org-Admin</span>" zugeordneten Anwendungsfälle), MUSS ein TI-Messenger-Anbieter einen TI-Messenger-Client mit Administrationsfunktionen anbieten (auch als Org-Admin-Client bezeichnet). Diese erweiterte Funktionalität KANN auch in den TI-Messenger-Client für Akteure integriert sein. TI-Messenger-Clients für Akteure (Akteure in der Rolle User / User-HBA) unterstützen die von der Matrix-Spezifikation festgelegten&nbsp;Funktionalitäten sowie die Abfragen im VZD-FHIR-Directory. Der geforderte mindestens bereitzustellende Funktionsumfang wird in der [gemSpec_TI-Messenger-Client] beschrieben.<span style="background-color: #FFFF99;"> <span id="polarion-comment:460"></span></span> </p>
  <p id="polarion_459"> <span id="polarion-comment:258"></span> </p>
  <p id="polarion_460"></p>
  <p id="polarion_21"> <span style="background-color: #99FF99;"> </span><span style="background-color: #FFFF99;"><span id="polarion-comment:461"></span></span> </p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121904">5 Übergreifende Festlegungen</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122033">5.1 Datenschutz und Sicherheit</h3>
  <p id="polarion_480"> Der TI-Messenger-Dienst baut auf flächendeckender Verwendung von Transportverschlüsselung mittels TLS (gemäß den Vorgaben aus [gemSpec_Krypt]), zusätzlicher moderner Ende-zu-Ende-Verschlüsselung von Chatinhalten mittels OLM/MEGOLM und einer dezentralen Gesprächsarchitektur mittels föderierten&nbsp;<span id="polarion-comment:97"></span>Matrix-Homeservern auf. </p>
  <p id="polarion_481"> Die Vorgaben für die Absicherung des TI-Messengers bestehen aus komponentenbezogenen Anforderungen, die in den jeweiligen Dokumenten in eigenen Kapiteln untergebracht sind, funktionsbezogenen Anforderungen, die im Rahmen der jeweiligen Funktionsbeschreibungen zu finden sind und ergänzenden übergreifenden Anforderungen, die aus anderen Spezifikationen stammen und den Steckbriefen zugeordnet werden.<span style="font-weight: bold;text-decoration: line-through;background-color: #FFFFCC;"><span id="polarion-comment:338"></span><span id="polarion-comment:352"></span><span id="polarion-comment:335"></span></span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122031">5.2 Verwendete Standards</h3>
  <p id="polarion_484"> <span style="font-weight: bold;">Matrix</span> </p>
  <p id="polarion_485"> Für den TI-Messenger-Dienst wird das offene Kommunikationsprotokoll der Matrix-Foundation verwendet. Im Rahmen der Spezifikation wird das Server-Server- (gemäß [Server-Server API]) und das Client-Server-Protokoll (gemäß [Client-Server API]) nachgenutzt. Für die Kommunikation der Matrix-Homeserver in der Föderation wird die API gemäß [Server-Server API] verwendet. Der TI-Messenger-Client setzt bei der Kommunikation mit den Matrix-Homeservern die API des Matrix-Client-Server-Protokolls um. Für die Benachrichtigung der Akteure über eingehende Nachrichten wird ein Push-Gateway verwendet, welches gemäß [Push Gateway API] nachgenutzt wird. Bei der Kommunikation werden REST-Webservices über HTTPS (JSON-Objekte) aufgerufen.&nbsp;<br> </p>
  <p id="polarion_487"> <span id="polarion-comment:428"></span> </p>
  <p id="polarion_488"> <span style="font-weight: bold;">OpenID-Connect</span> </p>
  <p id="polarion_489"> <span style="text-decoration: line-through;background-color: #FFFFCC;"><span id="polarion-comment:282"></span></span> Das VZD-FHIR-Directory, der Registrierungs-Dienst sowie die TI-Messenger-Clients nutzen im Rahmen der Authentifizierung ID_TOKEN in Form eines JSON-Web-Token (JWT) gemäß&nbsp;[OpenID].<br> </p>
  <p id="polarion_491"> <span style="font-weight: bold;">FHIR</span> </p>
  <p id="polarion_492"> <span id="polarion-comment:410"></span>Die TI-Messenger-Clients nutzen die FHIR-Schnittstellen der Teilkomponente FHIR-Proxy des VZD-FHIR-Directorys gemäß dem FHIR-Standard&nbsp;[FHIR] mit einer RESTful API. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122035">5.3 Authentifizierung und Autorisierung</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122030">5.3.1 Authentifizierung von Akteuren am Messenger-Service</h4>
  <p id="polarion_497"> <span id="polarion-comment:488"></span>Für die Authentifizierung von Akteuren werden die durch den jeweiligen Matrix-Homeserver bereitgestellten Authentifizierungsverfahren genutzt.&nbsp;Dies ermöglicht es z. B. Krankenhäusern ihre eigene Benutzerverwaltung (z. B. Active Directory) zu nutzen, oder Verbänden ihre eigenen Identitätsserver (IDP-Dienst) zu verwenden.&nbsp;Die Abstimmung, welches Authentifizierungsverfahren verwendet wird, trifft die Organisation mit dem jeweiligen TI-Messenger-Anbieter. Die Benutzerverwaltung erfolgt durch autorisierte Mitarbeiter in der jeweiligen Organisation (Akteur in der&nbsp;<span style="font-style: normal;">Rolle</span><span style="font-style: italic;"> </span><span style="font-style: normal;">"Org-Admin"</span>).&nbsp;<span style="background-color: #FFFFFF;">Die Administration der verwendeten Authentifizierungsmethoden MÜSSEN unter der Kontrolle der jeweiligen Organisation sein.<br> </span> </p>
  <p id="polarion_137"> <span style="background-color: #FFFFCC;"><span id="polarion-comment:507"></span><span id="polarion-comment:508"></span></span> </p>
  <p id="polarion_498"> <span style="font-weight: bold;"> </span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-132207">5.3.2 Authentifizierung am VZD-FHIR-Directory</h4>
  <p id="polarion_56"> <span style="font-weight: normal;">Die Authentifizierung für den Lese- und Schreibzugriff auf das FHIR-Directory erfolgt mit Hilfe von Identitätstoken. Die jeweilige Überprüfung der Identitätstoken erfolgt am FHIR-Proxy des VZD-FHIR-Directory. Die Authentifizierung der Komponenten Registrierungs-Dienst und TI-Messenger-Client wird im Folgenden weiter beschrieben</span><span style="font-weight: bold;">.<br> <br> Registrierungs-Dienst</span><span style="background-color: #FFFF99;"> </span> </p>
  <p id="polarion_16"> <span style="font-weight: normal;">Die Authentifizierung des Registrierungs-Dienstes am VZD-FHIR-Directory erfolgt mittels OAuth am OAuth-Service des VZD-FHIR-Directory. Nach erfolgreicher Authentifizierung mit vereinbarten Client-Credentials wird dem Registrierungs-Dienst ein provider-accesstoken ausgestellt.</span> <span style="background-color: #FFFF99;"> </span> </p>
  <p id="polarion_5"></p>
  <p id="polarion_58"> <span style="font-weight: bold;">TI-Messenger-Client</span><span style="background-color: #FFFF99;"><br> </span>TI-Messenger-Clients MÜSSEN sich gegenüber dem Auth-Service des VZD-FHIR-Directory mit Hilfe eines ID_TOKENS oder des Matrix-OpenID-Token authentifizieren.&nbsp;Dem <span style="font-size: 10pt;line-height: 1.5;">Matrix-OpenID-Token</span>&nbsp;des Matrix-Homeservers wird vertraut, wenn der ausstellende Matrix-Homeserver als Matrix-Domain einer verifizierten Organisations-Ressource im VZD-FHIR-Directory eingetragen wurde. Der Auth-Service des VZD-FHIR-Directory stellt nach erfolgreicher Prüfung des jeweiligen Matrix-OpenID-Token ein search-accesstoken aus. Dem ID_TOKEN wird vertraut, wenn der ausstellende IDP-Dienst beim VZD-FHIR-Directory registriert ist und somit das Token durch den Auth-Service validiert werden kann. Nach erfolgreicher Prüfung des ID_TOKEN durch den Auth-Service des VZD-FHIR-Directory wird ein owner-accesstoken ausgestellt. <br> <span style="background-color: #FFFF99;"> </span> </p>
  <p id="polarion_19"> <span style="background-color: #FFFF99;"> </span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122034">5.3.3 Autorisierung am Messenger-Service</h4>
  <p id="polarion_80">Durch die Übergabe eines Matrix-ACCESS_TOKENS erhalten&nbsp;TI-Messenger-Clients Zugriff auf den Messenger-Service einer, in der Föderation registrierten, Organisation. Dieses wird durch den Matrix-Homeserver ausgestellt nachdem ein Akteur erfolgreich authentifiziert wurde. Das Matrix-ACCESS_TOKEN MUSS sicher auf dem Endgerät gespeichert werden.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-132206">5.3.4 Autorisierung am VZD-FHIR-Directory</h4>
  <p id="polarion_60"> <span style="font-weight: bold;">Registrierungs-Dienst</span><br> Für den Schreibzugriff des&nbsp;Registrierungs-Dienstes autorisiert dieser sich gegenüber dem FHIR-Proxy des VZD-FHIR-Directory mit einem provider-accesstoken, welches vom OAuth-Service des VZD FHIR-Directory ausgestellt wurde.<br> <br> <span style="font-weight: bold;">TI-Messenger-Client</span><br> Für den Lesezugriff autorisieren sich TI-Messenger-Clients gegenüber dem FHIR-Proxy des VZD-FHIR-Directory mit einem search-accesstoken, welches vom Auth-Service des VZD FHIR-Directory ausgestellt wurde. Für den Schreibzugriff nutzen TI-Messenger-Clients das owner-accesstoken, welches vom Auth-Service des VZD FHIR-Directory ausgestellt wurde. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122573">5.4 Rechtekonzept VZD-FHIR-Directory</h3>
  <p id="polarion_513"> <span style="font-size: 10pt;line-height: 1.5;">Im folgenden Kapitel wird beschrieben, wie der Lese- und Schreibzugriff durch die TI-Messenger-Clients und dem Registrierungs-Dienst auf dem VZD-FHIR-Directory erfolgt.</span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-123889">5.4.1 Lesezugriff</h4>
  <p id="polarion_24"> <span style="font-weight: bold;">Registrierungs-Dienst</span> </p>
  <p id="polarion_2"> <span style="font-weight: normal;">Die TI-Messenger-Fachdienste erhalten die Möglichkeit, mittels ihres Registrierungs-Dienstes die Föderationsliste vom FHIR-Proxy des VZD-FHIR-Directory abzurufen. Hierfür MUSS die Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services</span> am FHIR-Proxy des VZD-FHIR-Directory unter Vorlage des provider-accesstoken aufgerufen werden.</span> </p>
  <p id="polarion_170"> <span style="font-weight: normal;"> </span><span style="font-weight: normal;background-color: #FFFF99;"> </span><span style="font-weight: bold;background-color: #FFFF99;"> <br> </span><span style="font-weight: bold;">TI-Messenger-Clients<br> </span>Durch den Aufruf der<span style="font-weight: bold;"> </span><span style="font-weight: normal;">Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/search</span> am FHIR-Proxy des VZD-FHIR-Directory KANN ein TI-Messenger-Client unter Vorlage des search-accesstoken Suchanfragen an das FHIR-Directory stellen.</span><span style="font-weight: bold;"> </span><span style="font-weight: normal;font-style: normal;">Die Suchergebnisse sind abhängig von den eingetragenen FHIR-Ressourcen und deren Sichtbarkeit.</span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-131799">5.4.2 Schreibzugriff</h4>
  <p id="polarion_22"> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Registrierungs-Dienst</span> </p>
  <p id="polarion_514"> Die TI-Messenger-Fachdienste erhalten die Möglichkeit, mittels ihres Registrierungs-Dienstes Messenger-Services in die TI-Föderation aufzunehmen. Hierfür MUSS die Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services</span> am FHIR-Proxy des VZD-FHIR-Directory unter Vorlage des provider-accesstoken aufgerufen werden.<span style="background-color: #FFFFCC;"><span id="polarion-comment:276"></span></span> </p>
  <p id="polarion_515"></p>
  <p id="polarion_23"> <span style="font-weight: bold;">TI-Messenger-Clients</span> </p>
  <p id="polarion_516"> Durch den Aufruf der <span style="font-weight: normal;">Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/owner</span> am FHIR-Proxy des VZD-FHIR-Directory erhält ein Akteur unter Vorlage des owner-accesstoken Schreibzugriffe auf das FHIR-Directory.</span> In der folgenden Tabelle wird die zu verändernde FHIR-Ressource in Abhängigkeit zu der verwendeten Identität eines Akteurs beschrieben (siehe dazu auch die Tabelle "Verzeichnistypen - Rechtekonzept"). <span style="background-color: #FFFF99;"><br> </span> </p>
  <p id="polarion_517"></p>
  <p id="polarion_87" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">5</span>: Schreibzugriff - VZD-FHIR-Ressourcen </p>
  <table id="polarion_wiki macro name=table;params=uid=27|width=99.64%" class="polarion-Document-table" style="width: 99.64%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Rolle</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 69px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Identität</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 127px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">FHIR-Ressource</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 432px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Beschreibung</th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Org-Admin</td> 
     <td style="text-align: left;vertical-align: top;width: 69px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">SMC-B</td> 
     <td style="text-align: left;vertical-align: top;width: 127px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">HealthcareService <br> </td> 
     <td style="text-align: left;vertical-align: top;width: 432px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die Nutzung einer SMC-B ermöglicht es einem Akteur in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">Org-Admin</span><span style="font-style: italic;">" </span>mit Hilfe eines TI-Messenger-Clients mit Administrationsfunktion FHIR-Ressourcen (<span style="font-style: italic;">Endpoint</span>) im Namen der Organisation in das Organisationsverzeichnis einzutragen. Die Einträge im Organisationsverzeichnis beginnen immer mit einer <span style="font-style: italic;">HealthcareService </span>Ressource.</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">User-HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 69px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">HBA<span id="polarion-comment:579"></span></td> 
     <td style="text-align: left;vertical-align: top;width: 127px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">PractitionerRole</td> 
     <td style="text-align: left;vertical-align: top;width: 432px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die Nutzung eines HBAs ermöglicht es einem Akteur in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">User-HBA</span><span style="font-style: italic;">" </span>mit Hilfe eines TI-Messenger-Clients seine, bereits bestehende FHIR-Ressource <span style="font-style: italic;">(</span><span style="font-style: normal;"><span style="font-style: italic;">Endpoint</span>),</span><span style="font-style: italic;"> </span>im Personenverzeichnis zu erweitern, um für andere Leistungserbringer anschreibbar zu werden oder um andere Leistungserbringer anzuschreiben. Die Einträge im Personenverzeichnis beginnen immer mit einer <span style="font-style: italic;">PractitionerRole </span>Ressource.</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_28"> <span style="font-weight: normal;background-color: #FFFFCC;"><span id="polarion-comment:277"></span></span> </p>
  <p id="polarion_523"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-133382">5.5 User Management</h3>
  <p id="polarion_84"> <span id="polarion-comment:673"></span>Aufgrund der Vielzahl an Teilnehmern wird eine komfortable Benutzerverwaltung innerhalb des TI-Messenger-Dienstes benötigt. In diesem Kapitel werden die für das User Management notwendigen Rollen und die dafür verwendeten Nutzer-Verzeichnisse beschrieben. </p>
  <p id="polarion_158">Voraussetzung für die Nutzung des TI-Messenger-Dienstes ist zunächst, dass sich ein Akteur über ein Authentifizierungsverfahren am Matrix-Homeserver seiner Organisation authentifizieren kann und ein Nutzer-Account auf dem Matrix-Homeserver angelegt wurde. Der Nutzer-Account auf dem Matrix-Homeserver wird entweder vom&nbsp;Akteur in der Rolle "Org-Admin" seiner Organisation bereitgestellt oder vom Akteur selbst am Matrix-Homeserver registriert. Bei der Erstellung des Nutzer-Accounts wird die MXID des Akteurs erzeugt sowie der Displayname des Akteurs festgelegt (siehe gemSpec_TI-Messenger-Client#Weitere Funktionen). Nach der Erstellung des Nutzer-Accounts am Matrix-Homeserver wird die MXID des Akteurs im User-Directory des Matrix-Homeservers hinterlegt. Alle im User-Directory des Matrix-Homeservers hinterlegten MXIDs sind anschließend durch andere Akteure seiner Organisation auffindbar und erreichbar. Soll der Akteur auch von außerhalb der Organisation auffindbar werden, so MUSS dieser mit seiner MXID&nbsp;in das Organisationsverzeichnis im VZD-FHIR-Directory hinterlegt werden. Das Hinterlegen der MXID eines Akteurs in das Organisationsverzeichnis MUSS durch den Akteur in der Rolle "Org-Admin" erfolgen. Voraussetzung ist das vorhandensein einer HealthcareService-Ressource der Organisation. Die MXIDs werden in, der HealthcareService-Ressource zugeordnet, Endpoint-Ressourcen hinterlegt. Die Einrichtung einer HealthcareService-Ressource einer Organisation erfolgt durch den Akteur in der Rolle "Org-Admin". Möchte ein Akteur ohne Zugehörigkeit zu einer Organisation gefunden werden, so MUSS seine MXID in das Personenverzeichnis des VZD-FHIR-Directory hinterlegt werden. Voraussetzung hierfür ist der Besitz eines HBAs.</p>
  <p id="polarion_159">Die folgende Tabelle zeigt einen zusammenfassenden Überblick der Benutzerverwaltung.</p>
  <p id="polarion_164"></p>
  <p id="polarion_166" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">6</span>: Überblick der Benutzerverwaltung in Abhängigkeit der Rolle </p>
  <table id="polarion_wiki macro name=table;params=uid=2|width=98.84%" class="polarion-Document-table" style="width: 98.84%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Rolle</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 175px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Client</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 270px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Administration</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 177px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Wo</th> 
    </tr> 
    <tr> 
     <td colspan="1" rowspan="2" style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Org-Admin</td> 
     <td colspan="1" rowspan="2" style="text-align: left;vertical-align: top;width: 175px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">TI-Messenger Client mit Administrationsfunktionen <br> (Org-Admin-Client)</td> 
     <td style="text-align: left;vertical-align: top;width: 270px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
      <ul> 
       <li>Nutzer-Account anlegen</li> 
       <li>Nutzer-Account verwalten</li> 
      </ul> </td> 
     <td style="text-align: left;vertical-align: top;width: 177px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Matrix-Homeserver<br> (User Directory)</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 270px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
      <ul> 
       <li>HealthcareService-Ressource anlegen</li> 
       <li>Endpoint einer HealthcareService-Ressource anlegen</li> 
       <li>Endpoint einer HealthcareService-Ressource verwalten </li> 
      </ul> </td> 
     <td style="text-align: left;vertical-align: top;width: 177px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">VZD-FHIR-Directory <br> (Organisationsverzeichnis) <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">User</td> 
     <td style="text-align: left;vertical-align: top;width: 175px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">TI-Messenger Client <br> </td> 
     <td style="text-align: left;vertical-align: top;width: 270px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
      <ul> 
       <li>Nutzer-Account anlegen</li> 
      </ul> </td> 
     <td style="text-align: left;vertical-align: top;width: 177px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Matrix-Homeserver<br> (User Directory)</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">User-HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 175px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">TI-Messenger Client</td> 
     <td style="text-align: left;vertical-align: top;width: 270px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
      <ul> 
       <li>Endpoint einer PractitionerRole-Ressource anlegen</li> 
       <li>Endpoint einer PractitionerRole-Ressource verwalten</li> 
      </ul> </td> 
     <td style="text-align: left;vertical-align: top;width: 177px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">VZD-FHIR-Directory<br> (Personenverzeichnis)</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_151"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-132208">5.6 Funktionsaccounts</h3>
  <p id="polarion_61"> <span style="font-size: 10pt;line-height: 1.5;">Einrichtungen im Gesundheitswesen sind sehr unterschiedlich strukturiert und wollen hinsichtlich ihrer Erreichbarkeit flexibel eigene Strukturen abbilden können. Daher sind beim TI-Messenger-Dienst Accounts notwendig, die es ermöglichen, Akteure unterhalb der Struktur erreichbar zu machen.&nbsp;</span>Der anfragende Akteur muss dann nicht die genaue interne Struktur der Organisation kennen. Diese speziellen Accounts werden im folgenden als Funktionsaccounts bezeichnet.&nbsp;<span id="polarion-comment:639"></span><br> Ein Funktionsaccount ist als eine <span style="font-style: italic;">Endpoint</span>-Ressource (mit dem <span style="font-style: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">payloadType</span> <span style="font-style: italic;">"TI-Messenger chat")&nbsp;</span>eines <span style="font-style: italic;">HealthcareService </span>einer Organisation anzulegen. Der <span style="font-style: italic;">HealthcareService</span> bildet im FHIR-Directory eine Struktur (z. B. Station in einem Krankenhaus) der Organisation ab. Zur Erreichbarkeit dieser Struktur wird die MXID eines Chatbots&nbsp;oder eines Akteurs (der stellvertretend für die Organisation eintritt) in das <span style="font-style: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">address</span> Attribut der Endpoint Ressource hinterlegt.&nbsp;Pro <span style="font-style: italic;">HealthcareService </span>darf nur eine <span style="font-style: italic;">Endpoint-</span>Ressource für den <span style="font-style: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;">payloadType</span> "<span style="font-style: italic;">TI-Messenger chat" </span>existieren. Somit kann die angelegte Struktur der&nbsp;Organisation über den Funktionsaccount und dessen hinterlegten Namen (<span style="font-style: italic;">Endpoint.name</span>) im VZD-FHIR-Directory von einem Akteur gefunden werden. </p>
  <p id="polarion_132"> <span style="font-weight: bold;background-color: #99FF99;"><br> </span><span style="font-weight: bold;">Chatbot</span> </p>
  <p id="polarion_133"> <span style="font-weight: normal;">Chatbots sind spezielle Akteure <span id="polarion-comment:640"></span>(siehe Kapitel "<span style="font-style: italic;">Akteure und Rollen</span>"), die stellvertretend für eine Struktur einer Organisation von einem die Kommunikation initiierenden Akteur eingeladen werden können. Chatbots KÖNNEN die Kommunikation vollständig automatisiert abschließen (z. B. Terminvergabe) oder in der Organisation hinterlegte natürliche Personen dem Chat hinzuziehen (z. B. Ausstellen eines Rezeptes). Beispiele für Chatbots sind unter [Matrix Bots] zu finden. Treten Chatbots als Kommunikationsteilnehmer des TI-Messengers auf, so MÜSSEN diese im jeweiligen Chat als Chatbot gekennzeichnet werden.</span> </p>
  <p id="polarion_75"> <span style="font-weight: bold;"> </span> Im Folgenden wird ein Beispiel für eine mögliche Zuordnung für die Abbildung von Funktionsaccounts mit Hilfe von Chatbots und eines Akteurs der stellvertretend für die Organisation auftritt.<br> Der Chatbot KANN automatisiert Anfragen von Akteuren (z. B. für Terminanfragen, Medikationsentscheidung) bearbeiten oder bei Bedarf die zugeordneten und zu diesem Zeitpunkt verfügbaren Akteure in den Chatraum einladen. Die dem Chatbot zur Verfügung stehenden Akteure (in der Spalte Akteur&nbsp;blau hinterlegt) sind in der Konfiguration des Chatbots zu definieren. Im abschließenden Beispiel ist ein Akteur (natürliche Person) als Endpoint hinterlegt und tritt stellvertretend für die Organisation in den Chat ein. </p>
  <p id="polarion_185"> <br> </p>
  <p id="polarion_89" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">7</span>: Beispiel für Funktionsaccounts </p>
  <table id="polarion_wiki macro name=table;params=uid=1|width=96.57%" class="polarion-Document-table" style="width: 96.57%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Abteilung</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 135px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Funktionsaccount</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 113px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Endpoint.address</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 137px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteur (MXID)<br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Displayname</th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Kardiologie</td> 
     <td style="text-align: left;vertical-align: top;width: 135px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Labor_Kardiologie</td> 
     <td style="text-align: left;vertical-align: top;width: 113px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">@MXID_Bot01:&lt;domain&gt;.de</td> 
     <td style="text-align: left;vertical-align: top;width: 137px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"> <span style="color: #3333FF;">@MXID_01:&lt;domain&gt;.de<br> @MXID_02:&lt;domain&gt;.de</span></td> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span id="polarion-comment:682"></span>Empfang_Kardiologie (Chatbot)<br> Dennert, Maltilde<br> Fritsche, Sarah <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Neurologie</td> 
     <td style="text-align: left;vertical-align: top;width: 135px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Ambulanz_Neurologie</td> 
     <td style="text-align: left;vertical-align: top;width: 113px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">@MXID_Bot02:&lt;domain&gt;.de</td> 
     <td style="text-align: left;vertical-align: top;width: 137px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"> <span style="color: #3333FF;">@MXID_03:&lt;domain&gt;.de</span></td> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Ambulanz_Neurologie (Chatbot)<br> Gotsch, Gerd<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 81px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Radiologie</td> 
     <td style="text-align: left;vertical-align: top;width: 135px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Empfang_Radiologie</td> 
     <td style="text-align: left;vertical-align: top;width: 113px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">@MXID_04:&lt;domain&gt;.de&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 137px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"> Fruechtl, Wilfried <br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_51"> <span style="background-color: #FFFF99;"> </span> </p>
  <p id="polarion_8"></p>
  <p id="polarion_17">Im Folgenden wird die Interaktion eines externen Akteurs mit einem Funktionsaccount gezeigt.</p>
  <p id="polarion_62"> <span style="font-weight: bold;"><br> Prozess:</span> </p>
  <table id="polarion_wiki macro name=table;params=header=no|uid=67|width=86.37%" class="polarion-Document-table" style="width: 86.37%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 636px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">1. Vorbedingung: 
      <ul> 
       <li>Organisation verfügt über einen TI-Messenger-Client&nbsp;mit Administrationsfunktion und einen Messenger-Service</li> 
       <li>Chatbots stehen zur Verfügung und können vom Akteur in der Rolle "Org-Admin" verwaltet werden</li> 
      </ul> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_68"></p>
  <table id="polarion_wiki macro name=table;params=header=no|uid=69|width=86.37%" class="polarion-Document-table" style="width: 86.37%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 640px;height: 171px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">2. Konfiguration von Funktionsaccounts:<br> 
      <ul> 
       <li>Der Akteur in der Rolle "Org-Admin" legt einen Funktionsaccount (organisationsbezogene MXID) als einen <span style="font-style: italic;">Endpoint </span>des gewünschten <span style="font-style: italic;">HealthcareService </span>der Organisation an und ordnet dieser MXID einen Chatbot zu&nbsp;<br> </li> 
       <li>Der Akteur in der Rolle "Org-Admin" weist zuständige Akteure der Organisation (personenbezogene MXIDs) dem Chatbot zu</li> 
       <li>Die Zuordnung von Akteuren zu einzelnen Anfragen innerhalb eines Funktionsaccounts (z. B. Terminanfragen, Medikationsentscheidung) erfolgt durch die Konfiguration im Chatbot</li> 
      </ul> Alternative: Der Akteur in der Rolle "Org-Admin" legt einen Funktionsaccount (organisationsbezogene MXID) als einen <span style="font-style: italic;">Endpoint </span>des gewünschten <span style="font-style: italic;">HealthcareService </span>der Organisation an und hinterlegt in diesem Endpoint die MXID von einem Akteur.<span id="polarion-comment:688"></span><br> 
      <div style="margin-left: 40px;"></div><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_72"></p>
  <table id="polarion_wiki macro name=table;params=header=no|uid=1|width=86.37%" class="polarion-Document-table" style="width: 86.37%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 640px;height: 44px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">3. Beispielhafter Ablauf (siehe Abbildung "<span style="font-style: italic;">Interaktion mit einem Chatbot"</span>):<br> 
      <ol> 
       <li>Ein Akteur sucht nach einer Organisation und/oder Unterstruktur dieser Organisation (z. B. in einem Krankenhaus&nbsp;die Abteilung&nbsp;Kardiologie)</li> 
       <li>Der Akteur öffnet einen Chatraum mit dem Funktionsaccount der Abteilung&nbsp;Kardiologie</li> 
       <li> </li> 
       <ol> 
        <li>Der Chatbot des Funktionsaccounts der Abteilung Kardiologie betritt den Raum </li> 
        <li>Der Chatbot KANN automatisiert das Anliegen vom Akteur&nbsp;(z. B. Terminanfrage, Rückfrage an Arzt etc.) abfragen</li> 
       </ol> 
       <li>Der Akteur antwortet dem Chatbot</li> 
       <li>Der Chatbot lädt je nach Anliegen die ihm zugeordneten und verfügbaren Akteure in den Chatraum ein</li> 
       <li></li> 
       <ol> 
        <li>Eingeladene Akteure betreten den Chatraum mit ihrem Displaynamen</li> 
        <li>Eingeladene Akteure kommunizieren mit dem Akteur</li> 
       </ol> 
      </ol> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_71"> <span style="font-size: 18pt;color: #000000;line-height: 1.2;"><span id="polarion-comment:519"></span></span> </p>
  <p id="polarion_77" style="text-align: center;" data-keep-next="true"></p>
  <p id="polarion_57" style="text-align: center;" class="polarion-rte-caption-paragraph"> <img src="attachments/393-screenshot-20220608-071205.png" style="width: 700px;height: 309px;"> </p>
  <p id="polarion_147" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">5</span>: Beispiel einer Interaktion mit einem Chatbot<span id="polarion-comment:654"></span> </p>
  <p id="polarion_82"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-132904">5.7 Test</h3>
  <p id="polarion_110"> Der TI-Messenger-Anbieter MUSS eine Referenz-Instanz und mindestens eine Test-Instanz des TI-Messenger-Fachdienstes und TI-Messenger-Clients bereitstellen und betreiben. Die Referenz-Instanz hat die gleiche Version wie die Produktionsumgebung und kann von anderen Herstellern für Tests und Entwicklung gegen die zugelassene Version benutzt werden. Weiterhin wird die Referenz-Instanz für die Reproduktion aktueller Fehler/Probleme aus der Produktionsumgebung genutzt. Der Zugriff auf die Referenz-Instanz MUSS für die gematik zur Fehleranalyse gewährleistet sein.<br> Die Test-Instanz dient den Herstellern bei der Entwicklung neuer TI-Messenger-Clients und TI-Messenger Fachdienste Versionen, den IOP-Tests zwischen den verschiedenen TI-Messenger-Anbietern und wird auch von der gematik für die Zulassung genutzt.<br> Der TI-Messenger-Anbieter MUSS die verschiedenen Benutzer der Referenz-Instanz und der Test-Instanz koordinieren (Verwaltung eines Test-/Nutzungsplans). Bei Bedarf (Entwicklung verschiedener Versionen, hoher Auslastung durch andere Hersteller oder durch die gematik) MUSS der TI-Messenger-Anbieter auch mehrere Test-Instanzen mit der gleichen oder mit verschiedene Versionen bereitstellen und betreiben.<br> <br> <span id="polarion-comment:615"></span> </p>
  <p id="polarion_138"> <span id="polarion-comment:309"></span> </p>
  <p id="polarion_139"> <span id="polarion-comment:300"></span> </p>
  <p id="polarion_145" style="text-align: center;" data-keep-next="true"> <img src="attachments/TI_Messenger_Dienst.png" style="width: 750px;height: 429px;" data-lastmodified="2022-06-08T15:19:12.779+02:00"> </p>
  <p id="polarion_148" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">6</span>: TI-Messenger-Dienst Instanzen </p>
  <p id="polarion_149"> <span id="polarion-comment:158"></span> </p>
  <p id="polarion_111"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122652">5.8 Betrieb</h3>
  <p id="polarion_529">Der TI-Messenger-Anbieter verantwortet im Betrieb folgende Produkte:</p>
  <ul id="polarion_6"> 
   <li>TI-Messenger-Fachdienst(e),</li> 
   <li>TI-Messenger-Client(s) für Akteure und</li> 
   <li>TI-Messenger-Clients mit Administrationsfunktionen (Org-Admin-Client) inkl. Authenticator(-modul).<span id="polarion-comment:698"></span></li> 
  </ul>
  <p id="polarion_18"> Der TI-Messenger-Anbieter MUSS mindestens einen TI-Messenger-Fachdienst, mindestens einen TI-Messenger-Client für Akteure und mindestens einen Org-Admin-Client&nbsp;(die Clients jeweils oder in einen TI-Messenger-Client integriert) anbieten.<span id="polarion-comment:685"></span> </p>
  <p id="polarion_26"> Der TI-Messenger-Anbieter KANN auch mehrere TI-Messenger-Clients und mehrere TI-Messenger-Fachdienste anbieten. Der tatsächliche Betrieb kann gemäß [gemKPT_Betr#Anbieterkonstellationen] ausgelagert werden.<span style="background-color: #FFCCCC;"><span id="polarion-comment:511"></span></span> </p>
  <p id="polarion_530"> <span id="polarion-comment:383"></span>Der TI-Messenger-Anbieter MUSS seinen Nutzern und Organisationen einen Helpdesk entsprechend [gemKPT_Betr] anbieten, welcher auch Störungen zu allen verantworteten TI-Messenger-Clients und TI-Messenger-Fachdiensten entgegennimmt.&nbsp;<span id="polarion-comment:301"></span><span id="polarion-comment:118"></span> </p>
  <p id="polarion_531"> Der TI-Messenger-Anbieter ist gemäß Betriebskonzept [gemKPT_Betr] ein Teilnehmer im TI-IT<span style="font-size: 10pt;line-height: 1.5;">SM (<span style="color: #172B4D;">IT-Service-Management der TI</span>) mit allen damit verbundenen Rechten und Pflichten.</span> </p>
  <p id="polarion_118" style="text-align: center;"></p>
  <p id="polarion_50" style="text-align: center;"> <img src="attachments/TIM-Betriebsmodell1.png" style="width: 550px;height: 325px;" data-lastmodified="2022-07-11T11:52:43.732+02:00"> </p>
  <p id="polarion_125" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">7</span>: Ausschnitt - TI-Messenger-Anbieter im TI-ITSM<span id="polarion-comment:646"></span> </p>
  <p id="polarion_150"> <span style="font-weight: normal;font-style: italic;background-color: #FFFF99;"><br> </span><span style="font-weight: normal;font-style: italic;"> Hinweis: Die Abbildung bildet die organisatorischen Kommunikationsbeziehungen im Vordergrund des TI-ITSM-System zwischen den jeweiligen Entitäten ab. Die Produkte beim TI-Messenger Anbieter können einzeln zugelassen werden, werden aber im Bundle im Sinne des Nutzers mit einem SPOC für die jeweiligen Komponenten vom jeweiligen Anbieter angeboten.</span><span style="font-weight: normal;font-style: italic;background-color: #FFFF99;"><span id="polarion-comment:655"></span></span> </p>
  <p id="polarion_70"></p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121968">6 Anwendungsfälle</h2>
  <p id="polarion_537"> <span id="polarion-comment:206"></span><span id="polarion-comment:351"></span> </p>
  <p id="polarion_7"> <span style="background-color: #99FF99;"><span id="polarion-comment:493"></span></span>Die nachfolgend beschriebenen Anwendungsfälle sind spezifisch für den TI-Messenger-Dienst und weichen daher teilweise von der Matrix-Client-Server-API ab. Das gleiche gilt für die auf dem Matrix-Server-Server-Protokoll ([Server-Server API]) basierenden Anwendungsfälle. Das bedeutet, dass alle Anwendungsfälle, die gemäß Matrix-Client-Server-Protokoll umgesetzt werden, an dieser Stelle&nbsp;nicht weiter aufgeführt sind. Stattdessen wird hier auf die Matrix-Client-Server-API verwiesen ([Client-Server API]). </p>
  <p id="polarion_32"> Im Kontext des TI-Messenger-Dienstes nehmen Akteure unterschiedliche Rollen ein (siehe Kapitel <span style="font-style: italic;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-121901" data-option-id="longoutline"></span>).</span> Entsprechend der eingenommen Rolle eines Akteurs werden unterschiedliche Anwendungsfälle ausgelöst. Für die Rollen "Org-Admin und User/User-HBA" wird dies in den folgenden Abbildungen dargestellt. </p>
  <p id="polarion_541"></p>
  <p id="polarion_542"> <span style="font-weight: bold;">Rolle: Org-Admin</span> </p>
  <p id="polarion_543"> Ein Akteur in der Rolle "Org-Admin" KANN ein <span id="polarion-comment:683"></span>Leistungserbringer / beauftragter Mitarbeiter in einer Organisation oder ein beauftragter Administrator des TI-Messenger-Anbieters sein. Für seine administrativen Tätigkeiten löst dieser Akteur, unter Nutzung einer freigeschalteten SMC-B, im Kontext des TI-Messenger-Dienstes die folgenden Anwendungsfälle aus. </p>
  <p id="polarion_544" style="text-align: center;"> <span style="background-color: #FFFF99;"><br> </span> <img src="attachments/257-screenshot-20220408-095601.png" style="width: 570px;height: 285px;"> </p>
  <p id="polarion_545" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">8</span>: Org-Admin - Übersicht Anwendungsfälle </p>
  <p id="polarion_546"></p>
  <p id="polarion_547"> Der Anwendungsfall "<span style="font-style: italic;">AF_10060<span id="polarion-comment:469"></span> - Bereitstellung eines Messenger Service für eine Organisation</span>" setzt die erfolgreiche Authentifizierung der Organisation durch den Anwendungsfall "AF_10103 - Authentisieren einer Organisation am TI-Messenger-Dienst" voraus. Werden durch eine Organisation mehrere Messenger-Services benötigt (z. B. im Krankenhausumfeld) KANN der Anwendungsfall mehrfach ausgeführt werden. Mit der farblichen Zuordnung soll auf eine funktionale Beziehung zwischen den einzelnen Anwendungsfällen hingewiesen werden. </p>
  <p id="polarion_20"> Eine weitere Aufgabe des <span id="polarion-comment:684"></span>Akteurs in der Rolle "Org-Admin", welche hier nicht weiter in einem Anwendungsfall gezeigt wird, ist die Einrichtung von Funktionsaccounts und die Benutzerverwaltung. </p>
  <p id="polarion_549"></p>
  <p id="polarion_31"> <span style="font-weight: bold;font-style: normal;">Rolle: User / User-HBA</span> </p>
  <p id="polarion_550"> Ein Akteur in der Rolle "User / User-HBA" KANN&nbsp;die folgenden Anwendungsfälle auslösen.<span style="background-color: #FFFF99;"><br> <br> </span> </p>
  <p id="polarion_29" style="text-align: center;" class="polarion-rte-caption-paragraph"> <img src="attachments/402-screenshot-20220711-104622.png" style="width: 550px;height: 623px;"> </p>
  <p id="polarion_171" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">9</span>:&nbsp;User / User HBA - Übersicht Anwendungsfälle<br> </p>
  <p id="polarion_552" style="text-align: left;"> Der Anwendungsfall "<span style="font-style: italic;">AF_10058<span id="polarion-comment:470"></span> - Akteur (User-HBA) im Verzeichnisdienst hinzufügen</span>" KANN nur von einen Akteur in der Rolle "User-HBA" ausgeführt werden. Alle anderen gezeigten Anwendungsfälle KÖNNEN von den Akteuren in der Rolle "User / User-HBA" ausgeführt werden. Mit der farblichen Zuordnung soll auf eine funktionale Beziehung zwischen den einzelnen Anwendungsfällen hingewiesen werden. </p>
  <p id="polarion_25"> <span style="font-style: italic;">Hinweis: In den folgenden Anwendungsfällen wird auf Abläufe verwiesen, die&nbsp;im Anhang B zu finden sind. Ebenfalls können für eine bessere Lesbarkeit die in den jeweiligen Anwendungsfällen dargestellten Laufzeitsichten als PlantUML-Quelle in [api-messenger] unter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">src/plantuml</span>&nbsp;und in Diagrammform unter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/images/diagrams</span> abgerufen werden.</span> </p>
  <p id="polarion_553"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-128575">6.1 AF - Authentisieren einer Organisation am TI-Messenger-Dienst</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-128574|layout=2">
   <p><b>AF_10103</b></p>
   <p><span style="font-size: 10pt;color: #000000;line-height: 1.5;">Mit diesem Anwendungsfall authentisiert ein Akteur, in der Rolle "Org-Admin"</span><span style="color: #000000;"><span style="font-size: 10pt;line-height: 1.5;">, seine Organisation bei einem TI-Messenger-Anbieter.</span> Für die Authentisierung einer Organisation stellt der TI-Messenger-Fachdienst eine Schnittstelle an seinem&nbsp;Registrierungs-Dienst bereit. Diese wird über das Frontend des Registrierungs-Dienstes für die Authentisierung verwendet. Die Authentisierung&nbsp;der Organisation erfolgt individuell und nutzungsabhängig durch einen Akteur in der Rolle "Org-Admin". Für die Verifizierung der Organisation MUSS bei der Authentisierung am IDP-Dienst eine freigeschaltete SMC-B verwendet werden. Als Nachweis zur Prüfung auf eine gültige Organisation MUSS der&nbsp;Registrierungs-Dienst die im ID_TOKEN enthaltene</span> <span style="font-style: italic;color: #000000;">ProfessionOID</span> <span style="color: #000000;">gegen die OID-Festlegung für Institutionen prüfen.<span id="polarion-comment:466"></span> <span id="polarion-comment:495"></span>Bei erfolgreicher Verifizierung der Organisation wird ein Administrator-Account für die Organisation am Registrierungs-Dienst angelegt. Dies ermöglicht es einem Administrator Messenger-Services zu registrieren und seiner Organisation am TI-Messenger-Dienst teilzunehmen.</span><span style="background-color: #FFFF99;"><br> <br> </span> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___1"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">8</span>: Tabelle : AF - Authentisieren einer Organisation am TI-Messenger-Dienst<br> </p> 
    <table id="polarion_wiki macro name=table;params=width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10103</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Authentisieren einer Organisation am TI-Messenger-Dienst<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Beauftragter Mitarbeiter einer Organisation in der Rolle "Org-Admin"<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser<br> </td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eine Organisation des deutschen Gesundheitswesens möchte am TI-Messenger-Dienst teilnehmen und benötigt die Berechtigung einen Messenger-Service zu registrieren<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>Frontend des Registrierungs-Dienstes,</li> 
         <li>Authenticator,</li> 
         <li>Konnektor,</li> 
         <li>eHealth Kartenterminal mit gesteckter SMC-B,</li> 
         <li>Registrierungs-Dienst,</li> 
         <li>IDP-Dienst</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">&nbsp;Vorbedingung</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Der Akteur kann über ein Frontend des Registrierungs-Dienstes für die Kommunikation auf den Registrierungs-Dienst zugreifen.</span></li> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Das verwendete Frontend des Registrierungs-Dienstes ist bei einem zuständigen IDP-Dienst registriert.</span></li> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Der Akteur kann den Authenticator des jeweiligen TI-Messenger-Anbieters verwenden.<br> </span></li> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Die im eHealth Kartenterminal gesteckte SMC-B ist freigeschaltet.</span></li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">&nbsp;Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Identität der Organisation, SMC-B<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Die Organisation wurde am Registrierungs-Dienst des TI-Messenger-Fachdienstes verifiziert<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">ID_TOKEN, Admin-Account, Status<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 546px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-128757" data-option-id="short"></span>,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-128759" data-option-id="short"></span>,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-128758" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-129853" data-option-id="short"></span>,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132446" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Für die Authentisierung einer Organisation wird in der Laufzeitsicht der zentrale IDP-Dienst der TI verwendet<span style="font-weight: normal;">. Die Nutzung anderer IDP-Dienste ist auch möglich.<span id="polarion-comment:465"></span></span> <span style="font-weight: bold;background-color: #FFCCCC;"><br> </span> <br> <img src="attachments/404-screenshot-20220726-101404.png" style="width: 750px;height: 898px;margin-left: auto;margin-right: auto;display: block;"> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___2"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">10</span>: Laufzeitsicht - Authentisieren einer Organisation am TI-Messenger-Dienst<span style="background-color: #FFFF99;"><span id="polarion-comment:701"></span></span> </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_554"></p>
  <p id="polarion_555"> <span style="font-weight: bold;">Akzeptanzkriterien für den Anwendungsfall:&nbsp;Authentisieren einer Organisation am TI-Messenger-Dienst (AF_10103)</span> </p>
  <p id="polarion_556"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-128757|layout=4">
   <p><b>ML-128757</b></p>
   <p>Nur ein Akteur in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">Org-Admin</span>" darf seine Organisation gegenüber dem TI-Messenger-Fachdienst authentifizieren. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-128759|layout=4">
   <p><b>ML-128759</b></p>
   <p>Die Organisation wurde beim TI-Messenger-Fachdienst erfolgreich mit einer Identität einer Organisation des Gesundheitswesens verifiziert<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-128758|layout=4">
   <p><b>ML-128758</b></p>
   <p>Das vom IDP-Dienst ausgestellte ID_TOKEN ist gültig und liegt dem Frontend des Registrierungs-Dienstes vor.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129853|layout=4">
   <p><b>ML-129853</b></p>
   <p>Ein Administrator Account für die Organisation wurde erfolgreich am Registrierungs-Dienst angelegt.&nbsp;<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132446|layout=4">
   <p><b>ML-132446</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span><span style="font-size: 10pt;background-color: #FFCCCC;line-height: 1.5;"><span id="polarion-comment:553"></span></span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_13"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123867">6.2 AF - Bereitstellung eines Messenger-Service für eine Organisation</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123519|layout=2">
   <p><b>AF_10060</b></p>
   <p>Mit diesem Anwendungsfall wird einer zuvor am Registrierungs-Dienst authentifizierten Organisation ein Messenger-Service für diese Organisation durch einen Akteur in der Rolle "Org-Admin" bereitgestellt. Die Beantragung zur Bereitstellung eines Messenger-Service wird durch den Akteur in der Rolle "Org-Admin" am Frontend des Registrierungs-Dienstes vorgenommen. Dieser MUSS sich zuvor mit dem Admin-Account der Organisation am Registrierungs-Dienst anmelden. Für eine zeitnahe Adaption des TI-Messenger-Dienstes MUSS eine schnelle Bereitstellung von Messenger-Services gewährleistet sein. TI-Messenger-Anbieter sind verpflichtet, Prozesse zu etablieren, damit Messenger-Services für Organisationen schnell und ggf. automatisiert&nbsp;bereitgestellt werden können. Nach erfolgreicher Bereitstellung eines Messenger-Service wird dieser in die Föderation des TI-Messenger-Dienstes aufgenommen. Werden mehrere Messenger-Services für eine Organisation benötigt KANN dieser Anwendungsfall mehrfach ausgeführt werden.<span style="background-color: #FFFF99;"><br> <br> </span> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p>
    <div style="text-align: center;"></div> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___3"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">9</span>: AF - Bereitstellung eines Messenger-Service für eine Organisation<br> </p> 
    <table id="polarion_wiki macro name=table;params=width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10060</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Bereitstellung eines Messenger-Service für eine Organisation<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Beauftragter Mitarbeiter einer Organisation in der Rolle "Org-Admin"<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eine Organisation des deutschen Gesundheitswesen möchte am TI-Messenger-Dienst teilnehmen und benötigt die Bereitstellung eines oder mehrerer Messenger-Services<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 95px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 95px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>Frontend des Registrierungs-Dienstes,</li> 
         <li>Registrierungs-Dienst,</li> 
         <li>VZD-FHIR-Directory,</li> 
         <li>Messenger-Service.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 166px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingung<br> </td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 166px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li style="text-align: left;">Es besteht ein Vertragsverhältnis mit einem TI-Messenger-Anbieter.<br> </li> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Der Akteur verfügt über ein Frontend des Registrierungs-Dienstes für die Kommunikation mit dem Registrierungs-Dienst.</span></li> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Das verwendete Frontend des Registrierungs-Dienstes ist beim zuständigen IDP-Dienst registriert.</span></li> 
         <li><span style="font-size: 10pt;line-height: 1.5;">Die Organisation ist erfolgreich beim Registrierungs-Dienst authentifiziert und ein Admin-Account ist vorhanden.<br> </span></li> 
         <li style="text-align: left;"><span style="font-size: 10pt;line-height: 1.5;">Der Registrierungs-Dienst kann sich beim VZD-FHIR-Directory Server für Schreibzugriffe mit OAuth2 authentisieren.</span></li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Admin-Account, Identität der Organisation (SMC-B)<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 61px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 61px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li style="text-align: left;">Der Messenger-Service für die Organisation wurde erstellt.</li> 
         <li>Die Matrix-Domain des neuen Messenger-Services wurde als Endpunkt im VZD-FHIR-Directory eingetragen und in die Föderation aufgenommen.</li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Neuer Messenger-Service für die Organisation, Status<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123648" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123649" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123650" data-option-id="short"></span> ,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132585" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> <span style="font-weight: normal;font-style: normal;">In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Für den Anwendungsfall wird die erfolgreiche Authentifizierung der Organisation mit Hilfe des Anwendungsfalls "<span style="font-style: italic;">AF_10103 - Authentisieren einer Organisation am TI-Messenger-Dienst</span>" vorausgesetzt. Die Komponente Messenger-Service für die Organisation wird im Verlauf des Anwendungsfalles zu einem späteren Zeitpunkt erstellt.<br> </span><span style="font-weight: normal;font-style: normal;background-color: #FFFF99;"><br> </span> <img src="attachments/389-screenshot-20220607-115756.png" style="width: 750px;height: 801px;margin-left: auto;margin-right: auto;display: block;"> 
    <div style="text-align: center;"></div> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___4"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">11</span>: Laufzeitsicht - Bereitstellung eines Messenger-Service für eine Organisation&nbsp; </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_558"> <span style="font-weight: bold;"><br> Akzeptanzkriterien für den Anwendungsfall:&nbsp;Bereitstellung eines Messenger-Service für eine Organisation (AF_10060) <br> <br> </span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123648|layout=4">
   <p><b>ML-123648</b></p>
   <p>Nur ein Akteur in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">Org-Admin</span>" darf einen Messenger-Service bereitstellen. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123649|layout=4">
   <p><b>ML-123649</b></p>
   <p>Ein neuer Messenger-Service wurde mit dem gewählten Domainbezeichner erzeugt.<span id="polarion-comment:467"></span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123650|layout=4">
   <p><b>ML-123650</b></p>
   <p>Für den erzeugten Messenger-Service wurde ein neuer Eintrag im VZD-FHIR-Directory angelegt<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132585|layout=4">
   <p><b>ML-132585</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_10"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123869">6.3 AF - Organisationsressourcen im Verzeichnisdienst hinzufügen</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123518|layout=2">
   <p><b>AF_10059</b></p>
   <p><span style="color: #000000;">Mit diesem Anwendungsfall macht ein Akteur in der Rolle "Org-Admin" Akteure seiner Organisation im TI-Messenger-Dienst für andere Akteure auffindbar und erreichbar. D<span style="font-size: 10pt;line-height: 1.5;">afür werden FHIR-Ressourcen mit ihrer jeweiligen MXID im Organisationsverzeichnis (<span style="font-style: italic;">HealthcareService</span>) des VZD-FHIR-Directory hinterlegt. Organisationen KÖNNEN mehrere FHIR-Ressourcen pro Organisation administrieren und somit eingehende Kommunikationsprozesse organisatorisch und thematisch strukturieren.</span></span> <span style="font-size: 10pt;color: #333333;line-height: 1.5;"><br> <br> </span> 
    <div style="text-align: center;"> 
     <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> 
    </div> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___5"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">10</span>: AF - Organisationsressourcen im Verzeichnisdienst hinzufügen </p> 
    <table id="polarion_wiki macro name=table;params=uid=2|width=96.17%" class="polarion-Document-table" style="width: 96.17%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;"> 
     <tbody> 
      <tr> 
       <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10059</th> 
       <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Organisationsressourcen im Verzeichnisdienst hinzufügen<br> </th> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="width: 521px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Beauftragter Mitarbeiter einer Organisation in der Rolle "Org-Admin" <br> </td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Der Administrator der Organisation&nbsp;(<span style="font-style: normal;">Org-Admin</span>) möchte seine Organisation erreichbar machen indem die MXIDs der Akteure der Organisation im VZD-FHIR-Directory hinterlegt werden.</td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger-Client (mit erweiterter&nbsp;<span style="font-style: normal;">Org-Admin</span> Funktionalität),</li> 
         <li>TI-Messenger Registrierungs-Dienst,</li> 
         <li>Authenticator des IDP-Dienst,</li> 
         <li>IDP-Dienst,</li> 
         <li>Auth-Service,</li> 
         <li>FHIR-Proxy, </li> 
         <li>FHIR-Directory.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 167px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen<br> </td> 
       <td style="width: 521px;height: 167px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li>Für die Organisation wurde ein Messenger-Service bereitgestellt und eine FHIR-Ressource im VZD-FHIR-Directory erzeugt.<br> </li> 
         <li>Der Administrator der Organisation verfügt über einen TI-Messenger-Client (mit erweiterter&nbsp;<span style="font-style: normal;">Org-Admin</span> Funktionalität).</li> 
         <li>Das VZD-FHIR-Directory ist bei einem zuständigen IDP-Dienst registriert.</li> 
         <li>Der Administrator der Organisation kann sich an einem zuständigen IDP-Dienst authentisieren.</li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">SMC-B, FHIR-Organisations-Ressourcen<br> </td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">FHIR-Organisations-Ressourcen&nbsp;aktualisiert, Status<br> </td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Aktualisierte VZD-FHIR-Directory-Datensätze&nbsp;</td> 
      </tr> 
      <tr> 
       <td style="width: 182px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien&nbsp;</td> 
       <td style="width: 521px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123626" data-option-id="short"></span>&nbsp;, <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123627" data-option-id="short"></span> ,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132586" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Hierbei handelt es sich um eine <span style="font-weight: bold;">vereinfachte Laufzeitansicht</span> in der zum Beispiel die TLS-Terminierung am FHIR-Proxy auf Grund der Übersichtlichkeit nicht berücksichtigt wurde. <br> <br> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p class="polarion-rte-caption-paragraph" style="text-align: center;"> <span id="polarion-comment:236"></span><img src="attachments/405-screenshot-20220816-100602.png" style="width: 750px;height: 1190px;"> </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___6"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">12</span>:&nbsp;Laufzeitsicht - Organisationsressourcen im Verzeichnisdienst hinzufügen </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_559"> <span style="font-weight: bold;"><br> Akzeptanzkriterien für den Anwendungsfall:&nbsp;Organisationsressourcen im Verzeichnisdienst hinzufügen (AF_10059)<br> <br> </span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123627|layout=4">
   <p><b>ML-123627</b></p>
   <p>Nach erfolgreicher Authentisierung an einem zuständigen IDP-Dienst als Administrator einer Organisation kann der Akteur in der Rolle <span style="font-style: normal;">"Org-Admin"</span> die MXID eines Akteurs seiner Organisation in den <span style="font-style: italic;">HealthcareService </span>in einen <span style="font-style: italic;">Endpoint </span>eintragen und Unterstrukturen für die Organisation anlegen.&nbsp;Der Akteur <span style="font-style: normal;">in der Rolle</span> "<span style="font-style: normal;">Org-Admin"</span> wird<span id="polarion-comment:341"></span> über den Erfolg der Operation informiert.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123626|layout=4">
   <p><b>ML-123626</b></p>
   <p>Der Akteur in der "Rolle <span style="font-style: normal;">Org-Admin</span>" darf nur FHIR-Ressourcen seiner eigenen Organisation (inklusive der Unterstrukturen) ändern. Ein Zugriff auf FHIR-Ressourcen, die nicht zu der eigenen Organisation gehören, MUSS unterbunden werden.<span style="background-color: #FFFF99;"><span id="polarion-comment:671"></span></span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132586|layout=4">
   <p><b>ML-132586</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_48"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123865">6.4 AF - Anmeldung eines Akteurs am Messenger-Service</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123516|layout=2">
   <p><b>AF_10057</b></p>
   <p><span style="color: #000000;"><span style="font-size: 10pt;line-height: 1.5;">Mit diesem Anwendungsfall meldet sich ein Akteur an einem</span> in der TI-Föderation zuständigen Messenger-Service<span style="font-size: 10pt;line-height: 1.5;">&nbsp;an und registriert seinen TI-Messenger-Client als Endge</span></span><span style="font-size: 10pt;color: #000000;line-height: 1.5;">rät. Der Akteur MUSS die Matrix-Domain des gewünschten&nbsp;Messenger-Service direkt im TI-Messenger-Client eingeben können. Die Eingabe KANN dabei automatisiert oder durch andere Hilfsmittel wie beispielweise durch ein QR-Code-Scan unterstützt werden. <span id="polarion-comment:517"></span>Die Authentifizierung erfolgt hierbei nach den Vorgaben der jeweiligen Organisation. Nach der erfolgreichen Anmeldung eines Akteurs am Messenger-Service KÖNNEN die von ihm angebotenen Dienste verwendet werden.&nbsp;</span> <span style="font-size: 10pt;color: #333333;background-color: #FFFF99;line-height: 1.5;"><br> <br> </span> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___7"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">11</span>: AF - Anmeldung eines Akteurs am Messenger-Service </p> 
    <table id="polarion_wiki macro name=table;params=width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 191px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10057</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 540px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Anmeldung eines Akteurs&nbsp;am Messenger-Service<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer, Mitarbeiter einer Organisation im Gesundheitswesen in der "Rolle User / User-HBA"<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser<span id="polarion-comment:225"></span></td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ein Akteur möchte sich mit seinem TI-Messenger-Client bei einem Messenger-Service anmelden.</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger-Client,</li> 
         <li>Messenger-Proxy,</li> 
         <li>Messenger-Homeserver,</li> 
         <li>FHIR-Proxy,</li> 
         <li>FHIR-Directory.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 143px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 143px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li>Der Akteur verfügt über einen vom Anbieter unterstützen TI-Messenger-Client.</li> 
         <li>Der Akteur kennt die URL des Messenger-Services oder die URL ist bereits in seinem TI-Messenger-Client konfiguriert.</li> 
         <li>Der Akteur kann sich durch ein beim Matrix-Homeserver unterstütztes Authentisierungsverfahren identifizieren. Wird durch die Organisation ein eigenes Authentifizierungsverfahren verwendet MUSS eine Anbindung an den Matrix-Homeserver erfolgt sein.<br> </li> 
         <li>Der verwendete Matrix-Homeserver ist in die Föderation integriert (valider Messenger-Service).</li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">URL des Matrix-Homeservers<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Es wurde ein TI-Messenger Account für einen Akteur in der Rolle "User / User-HBA" erzeugt.<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 21px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 21px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Matrix-ACCESS_TOKEN, MXID, device_id<span id="polarion-comment:344"></span></span><code>, Matrix-OpenID-Token,</code> Status<code><br></code></td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 191px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 540px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123571" data-option-id="short"></span>,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123576" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123575" data-option-id="short"></span>&nbsp;, <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-129870" data-option-id="short"></span>,&nbsp; <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132587" data-option-id="short"></span>&nbsp;<br> </td> 
      </tr> 
     </tbody> 
    </table> <br> In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. In dieser wird der Prozess einer Anmeldung eines Akteurs an einem Messenger-Service dargestellt. Sollte ein Akteur noch nicht an einem Matrix-Homeserver registriert sein, dann wird zunächst eine Registrierung des Akteurs mit der Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">POST /_matrix/client/register</span> durchgeführt. Der Ablauf der Registrierung ist analog dem des Login-Verfahrens. <span style="background-color: #CDE6EB;"><span id="polarion-comment:349"></span></span><br> <span id="polarion-comment:414"></span> <br> <img src="attachments/381-screenshot-20220607-075515.png" style="width: 750px;height: 1617px;"> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___8"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">13</span>: Laufzeitsicht - Anmeldung eines Akteurs am Messenger-Service<span id="polarion-comment:215"></span><span id="polarion-comment:202"></span> </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_560"></p>
  <p id="polarion_561"> <span style="font-weight: bold;">Akzeptanzkriterien für den Anwendungsfall: Anmeldung eines Akteurs am Messenger-Service (AF_10057)</span> </p>
  <p id="polarion_562"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123571|layout=4">
   <p><b>ML-123571</b></p>
   <p>Ein Akteur hat sich erfolgreich an einem gültigen Messenger-Service angemeldet und mit einem zugelassenen Authentifizierungsverfahren erfolgreich authentisiert. Es MUSS sichergestellt werden, dass die Anmeldung an Messenger-Services, die nicht Teil der Föderation sind, nicht möglich ist.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123576|layout=4">
   <p><b>ML-123576</b></p>
   <p>Nach erfolgreicher Anmeldung hat der Messenger-Service dem TI-Messenger-Client ein Matrix-ACCESS_TOKEN ausgestellt.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123575|layout=4">
   <p><b>ML-123575</b></p>
   <p>Der TI-Messenger-Client speichert das ihm übergebene Matrix-ACCESS_TOKEN zur Verwendung in den folgenden Anwendungsfällen.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129870|layout=4">
   <p><b>ML-129870</b></p>
   <p>Ein Akteur kann sich nicht bei einem öffentlichen Matrix-Homeserver anmelden, der nicht in die TI-Föderation integriert ist. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132587|layout=4">
   <p><b>ML-132587</b></p>
   <p>Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet. <b>&lt;=</b></p>
  </div>
  <p id="polarion_49"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123866">6.5 AF - Akteur (User-HBA) im Verzeichnisdienst hinzufügen</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123517|layout=2">
   <p><b>AF_10058</b></p>
   <p>Mit diesem Anwendungsfall wird ein Akteur in der Rolle "User-HBA" für andere Akteure anderer Messenger-Services auffindbar und erreichbar. D<span style="font-size: 10pt;line-height: 1.5;">afür werden FHIR-Ressourcen mit ihrer jeweiligen MXID im Personenverzeichnis (<span style="font-style: italic;">PractitionerRole</span>) des VZD-FHIR-Directory hinterlegt. </span>Zusätzlich besteht die Möglichkeit die Sichtbarkeit für andere Akteure einzuschränken. Dieser Anwendungsfall KANN direkt mit dem initialen Anmeldevorgang eines Akteurs am Messenger Service (siehe Anwendungsfall: "AF_10057 - Anmeldung eines Akteurs am Messenger-Service") kombiniert werden. Hierfür wird der Akteur in der Rolle "User-HBA" während des Anmeldevorgangs durch den TI-Messenger-Client gefragt, ob dieser im Besitz eines HBAs ist.<br> <span style="color: #000000;"> </span><br> 
    <div style="text-align: center;"> 
     <p class="polarion-rte-caption-paragraph" style="text-align: center;"> </p> 
    </div> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___9"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">12</span>: AF - Akteur (User-HBA) im Verzeichnisdienst hinzufügen<br> </p> 
    <table id="polarion_wiki macro name=table;params=width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 186px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10058</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur (User-HBA) im Verzeichnisdienst hinzufügen<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer, Mitarbeiter einer Organisation im Gesundheitswesen in der Rolle "User-HBA"<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ein Akteur in der Rolle "User-HBA" möchte sich im Personenverzeichnis erreichbar machen, indem er seine MXID&nbsp;im seinen&nbsp;Practitioner-Datensatz im VZD-FHIR-Directory hinterlegt. </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger-Client,</li> 
         <li> Authenticator des IDP-Dienst,</li> 
         <li> IDP-Dienst,</li> 
         <li> FHIR-Proxy,</li> 
         <li> Auth-Service,</li> 
         <li> FHIR-Directory&nbsp;.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 99px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen<br> </td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 99px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li> Der Akteur ist bei einem gültigen Messenger-Service angemeldet (siehe AF_10057).</li> 
         <li> Der Akteur&nbsp;verfügt über einen zugelassenen TI-Messenger-Client. </li> 
         <li> Das VZD-FHIR-Directory ist bei einem zuständigen IDP-Dienst registriert.</li> 
         <li> Der Akteur kann sich am IDP-Dienst authentisieren. </li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">HBA, FHIR-Practitioner-Ressourcen<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 21px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 21px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">FHIR-Practitioner-Ressourcen&nbsp;aktualisiert, Status<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">aktualisierter Practitioner-Datensatz</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 186px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien&nbsp;</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123611" data-option-id="short"></span>, <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123612" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132588" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt.&nbsp;Hierbei handelt es sich um eine <span style="font-weight: bold;">vereinfachte Laufzeitansicht</span> in der zum Beispiel die TLS-Terminierung am FHIR-Proxy auf Grund der Übersichtlichkeit nicht berücksichtigt wurde.<span style="background-color: #FFCCCC;"><br> </span> <br> <p class="polarion-rte-caption-paragraph" style="text-align: center;"> <span id="polarion-comment:104"></span> </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;"> <span id="polarion-comment:231"></span><img data-keep-next="true" src="attachments/337-screenshot-20220530-072239.png" style="width: 750px;height: 1017px;"> </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___10"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">14</span>: Laufzeitsicht -&nbsp;Akteur (User-HBA) im Verzeichnisdienst hinzufügen&nbsp; </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_565"></p>
  <p id="polarion_566"> <span style="font-weight: bold;">Akzeptanzkriterien für den Anwendungsfall: Akteur <span id="polarion-comment:462"></span> (User-HBA) im Verzeichnisdienst hinzufügen (AF_10058)</span> </p>
  <p id="polarion_567"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123612|layout=4">
   <p><b>ML-123612</b></p>
   <p>Die MXID wurde in den Practitioner-FHIR-Datensatz eingefügt und der Akteur über den Erfolg informiert.<span id="polarion-comment:332"></span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123611|layout=4">
   <p><b>ML-123611</b></p>
   <p>Der Akteur in der Rolle <span style="font-style: italic;">"</span><span style="font-style: normal;">User-HBA</span><span style="font-style: italic;">"</span> darf nur die eigene FHIR-Ressourcen&nbsp;ändern.<br> <span id="polarion-comment:232"></span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132588|layout=4">
   <p><b>ML-132588</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_53"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123870">6.6 AF - Föderationszugehörigkeit eines Messenger-Service prüfen</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123523|layout=2">
   <p><b>AF_10064</b></p>
   <p><span style="font-size: 10pt;color: #333333;line-height: 1.5;">Dieser Anwendungsfall prüft, ob ein Messenger-Service zugehörig zur TI-Messenger-Föderation ist und&nbsp;gilt für alle Anwendungsfälle, welche die Matrix-Domain eines anderen Messenger-Services überprüfen müssen. Für die Prüfung der Zugehörigkeit der Matrix-Domain zur TI-Messenger-Föderation, verwendet der Messenger-Proxy eine&nbsp;Föderationsliste die vom Registrierungs-Dienst seines TI-Messenger-Fachdienstes bereitgestellt wird. Die Speicherdauer der Föderationsliste des Messenger-Proxies ist limitiert. Die Aktualisierung der Föderationsliste erfolgt wie in Anhang B&nbsp;<span id="polarion-comment:464"></span>8.2 "<span style="font-style: italic;">Aktualisierung der Föderationsliste</span>" beschrieben.</span><span style="font-size: 12pt;color: #333333;line-height: 1.5;"><br> <br> </span> 
    <div style="text-align: center;"></div><p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___11"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">13</span>: Föderationszugehörigkeit eines Messenger-Service prüfen </p> 
    <table id="polarion_wiki macro name=table;params=noPageBreak=yes|uid=231|width=99.48%" class="polarion-Document-table" style="width: 99.48%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;"> 
     <tbody> 
      <tr> 
       <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">AF_10064</th> 
       <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Föderationszugehörigkeit eines Messenger-Service prüfen<br> </th> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Der Messenger-Proxy empfängt einen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> und MUSS die im Request enthaltenen MXIDs auf Domain-Zugehörigkeit zur TI-Messenger-Föderation prüfen.</td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>Messenger-Proxy,</li> 
         <li>Matrix-Homeserver.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">keine</td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span></td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Der Messenger-Proxy ermittelt mittels der Föderationsliste, ob die Matrix-Domain des anderen Messenger-Service Teil der TI-Messenger-Föderation ist.</td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Status vom Matrix-Homeserver und Weiterleitung<br> </td> 
      </tr> 
      <tr> 
       <td style="width: 186px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="width: 541px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123672" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123891" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123893" data-option-id="short"></span> , <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132589" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <span id="polarion-comment:199"></span> <br> In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Das auslösende Matrix-Event am Messenger-Proxy wird in der folgenden Abbildung nicht gezeigt. Die Aktualisierung der Föderationsliste ist in Anhang B "Aktualisierung der Föderationsliste" hinreichend beschrieben.<span style="background-color: #FFFF99;"><br> </span> <br> <img src="attachments/348-screenshot-20220531-110018.png" style="width: 600px;height: 642px;margin-left: auto;margin-right: auto;display: block;"><br> 
    <div style="text-align: center;"> 
     <span id="polarion-comment:111"></span> 
    </div> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___12"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">15</span>: Laufzeitsicht -&nbsp;Föderationszugehörigkeit eines Messenger-Service prüfen&nbsp; </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_569"> <span style="font-weight: bold;"><br> Akzeptanzkriterien für den Anwendungsfall:&nbsp;Föderationszugehörigkeit eines Messenger-Service prüfen (AF_10064)<br> <br> </span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123672|layout=4">
   <p><b>ML-123672</b></p>
   <p>Der Registrierungs-Dienst des TI-Messenger-Fachdienstes MUSS die Föderationsliste erfolgreich vom FHIR-Proxy des VZD-FHIR-Directory abrufen.<br> <span id="polarion-comment:130"></span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123893|layout=4">
   <p><b>ML-123893</b></p>
   <p>Es MUSS sichergestellt werden, dass die Föderationsliste des Messenger-Proxy aktuell ist. Dafür MUSS der Messenger-Proxy mindestens&nbsp;einmal täglich eine aktuelle Liste bei dem Registrierungs-Dienst anfordern.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123891|layout=4">
   <p><b>ML-123891</b></p>
   <p>Es MUSS sichergestellt werden, dass der Registrierungs-Dienst die Föderationsliste auf Aktualität überprüft, bevor eine aktualisierte Liste durch den Messenger-Proxy abgerufen werden kann. Ebenfalls MUSS sichergestellt werden, dass der Messenger-Proxy tatsächlich überprüft, ob die Matrix-Domain des anderen Messenger-Service Teil der Föderationsliste ist. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132589|layout=4">
   <p><b>ML-132589</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_54"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-129318">6.7 AF - Einladung von Akteuren innerhalb einer Organisation</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129320|layout=2">
   <p><b>AF_10104</b></p>
   <p>In diesem Anwendungsfall wird ein Akteur der zu einer gemeinsamen Organisation gehört in einen Raum eingeladen um Aktionen auszuführen. Für die Suche von Akteuren innerhalb einer gemeinsamen Organisation durchsucht ein TI-Messenger-Client das Nutzerverzeichnis seiner Organisation auf dem Matrix-Homeserver. In diesem Anwendungsfall prüft der Messenger-Proxy ob die im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> enthaltenen Matrix-Domains Teil der TI-Föderation sind (siehe Berechtigungskonzept - Stufe 1). Ist dies der Fall erfolgt die Weiterleitung an den zugehörigen Matrix-Homeserver. Dieser prüft ob die beteiligten Akteure bei ihm registriert sind. Ist dies nicht der Fall, <span style="font-weight: normal;"> handelt es sich bei dem einzuladenden Akteur nicht um einen Akteur innerhalb der Organisation und das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> wird an den Matrix- Homeserver des einzuladenden Akteurs weitergeleitet. Der Anwendungsfall "<span style="font-style: normal;">AF_10061</span><span style="font-style: italic;"> - Einladung von Akteuren außerhalb einer Organisation</span>" zeigt den sich daraus ergebenden Verlauf. </span><br> <br> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___13"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">14</span>: Einladung von Akteuren innerhalb einer Organisation<br> </p> 
    <table id="polarion_wiki macro name=table;params=width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10104</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Einladung von Akteuren innerhalb einer Organisation<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer, Mitarbeiter einer Organisation im Gesundheitswesen in der Rolle "User / User-HBA"</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur A möchte Akteur B seiner Organisation in einen gemeinsamen Raum einladen.<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger Client A + B,</li> 
         <li>Messenger-Proxy,</li> 
         <li>Matrix-Homeserver,</li> 
         <li>Push-Gateway.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 16px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 16px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li>Die Akteure sind am selben Messenger-Service angemeldet.</li> 
         <li>Jeder Akteur hat einen zugelassenen TI-Messenger-Client.</li> 
         <li>Ein Chatraum wurde durch den Einladenden eingerichtet.</li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span><br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur A und Akteur B sind beide in einem gemeinsamen Chatraum.<br> Optional erfolgt eine Benachrichtigung an Akteur B über die Einladung in den Chatraum.</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Status</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 544px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123896" data-option-id="short"></span>, <span class="polarion-rte-link" data-type="workItem" id="fake" data-item-id="ML-129415" data-option-id="short"></span>,&nbsp; <span class="polarion-rte-link" data-type="workItem" id="fake" data-item-id="ML-129414" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132590" data-option-id="short"></span>&nbsp;<br> </td> 
      </tr> 
     </tbody> 
    </table> <br> In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Der für die zukünftige Kommunikation genutzte Chatraum wurde durch den einladenden Akteur bereits erstellt. Die folgende Darstellung zeigt lediglich die Einladung zwischen zwei Akteuren. Weitere Akteure können unabhängig von dieser Laufzeitsicht eingeladen werden (Hinweis: Group-Messaging). Für die vereinfachte Darstellung wird vorausgesetzt, dass die TI-Messenger-Clients der beteiligten Akteure online sind. Ebenfalls wird davon ausgegangen, dass beide Akteure am selben Matrix-Homeserver registriert sind.<span id="polarion-comment:512"></span> <br> <br> <img src="attachments/366-screenshot-20220602-102152.png" style="width: 750px;height: 844px;"> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___14"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">16</span>: Einladung von Akteuren innerhalb einer Organisation </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_571"> <br> <span style="font-weight: bold;">Akzeptanzkriterien für den Anwendungsfall:&nbsp;Einladung von Akteuren innerhalb einer Organisation (AF_10104)</span><br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123896|layout=4">
   <p><b>ML-123896</b></p>
   <p>Der TI-Messenger-Client zeigt eine Liste aller Akteuren eines Matrix-Homeservers an.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129415|layout=4">
   <p><b>ML-129415</b></p>
   <p>Der Messenger-Proxy lehnt den <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> ab, wenn die Matrix-Domain nicht zur TI-Föderation gehört.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129414|layout=4">
   <p><b>ML-129414</b></p>
   <p>Alle Chat-Parteien sind erfolgreich im Chatraum vorhanden.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132590|layout=4">
   <p><b>ML-132590</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_98"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123872">6.8 AF - Austausch von Events zwischen Akteuren innerhalb einer Organisation</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123522|layout=2">
   <p><b>AF_10063</b></p>
   <p>Dieser Anwendungsfall ermöglicht es Akteuren, welche sich in einem gemeinsamen Raum innerhalb eines Messenger-Service befinden, Nachrichten auszutauschen und weitere durch die Matrix-Spezifikation festgelegte Aktionen (Events) auszuführen.<br> <br> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___15"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">15</span>: Austausch von Events zwischen Akteuren innerhalb einer Organisation </p> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;"> </p> 
    <table id="polarion_wiki macro name=table;params=noPageBreak=yes|width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 187px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10063</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 545px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Austausch von Events zwischen Akteuren innerhalb einer Organisation<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer, Mitarbeiter einer Organisation im Gesundheitswesen in der Rolle "User / User-HBA"<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 17px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Alle Matrix-Events die innerhalb eines Messenger-Service einer Organisation ausgeführt werden<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 57px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger Client A + B,</li> 
         <li>Messenger-Proxy,</li> 
         <li> Matrix-Homeserver,</li> 
         <li> Push-Gateway.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 51px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 51px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li>Die Akteure sind am selben Messenger-Service angemeldet.</li> 
         <li>Jeder Akteur hat einen zugelassenen TI-Messenger-Client.</li> 
         <li>Die Teilnehmer sind einem gemeinsamen Raum beigetreten.</li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Matrix-Event</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 22px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 22px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Matrix-Event wurde erfolgreich verarbeitet<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Abhängig vom Matrix-Event<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 187px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 545px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123669" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123670" data-option-id="short"></span>&nbsp;&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132591" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> <span style="font-style: normal;">In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Hierbei handelt es sich um eine <span style="font-weight: bold;">vereinfachte Laufzeitansicht</span> in der zum Beispiel die TLS-Terminierung am Messenger-Proxy auf Grund der Übersichtlichkeit nicht berücksichtigt wurde. Die in der Abbildung rot dargestellten Linien symbolisieren den Kommunikationsverlauf des auslösenden Matrix-Request.&nbsp;Für die vereinfachte Darstellung wird vorausgesetzt, dass die TI-Messenger-Clients der beteiligten Akteure online sind. </span> <br> <br> 
    <div style="text-align: center;"> 
     <span style="font-size: 12pt;color: #333333;line-height: 1.5;"><img data-keep-next="true" src="attachments/355-screenshot-20220531-130656.png" style="width: 750px;height: 573px;"> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___16"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">17</span>:&nbsp;Laufzeitsicht - Austausch von Events zwischen Akteuren innerhalb einer Organisation </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p></span> 
    </div> <b>&lt;=</b></p>
  </div>
  <p id="polarion_573"> <span style="font-weight: bold;"><br> Akzeptanzkriterien für den Anwendungsfall:&nbsp;Austausch von Events zwischen Akteuren innerhalb einer Organisation (AF_10063)<br> <br> </span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123670|layout=4">
   <p><b>ML-123670</b></p>
   <p>Eine Chatnachricht vom TI-Messenger-Client A an TI-Messenger-Client B wurde vom Matrix-Homeserver erfolgreich verarbeitet.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123669|layout=4">
   <p><b>ML-123669</b></p>
   <p>Der Matrix-Homeserver löst eine Benachrichtigung des TI-Messenger-Clients vom Empfänger über das mit dem TI-Messenger-Client verbundene Push-Gateway des TI-Messenger-Anbieters aus.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132591|layout=4">
   <p><b>ML-132591</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_100"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123868">6.9 AF - Einladung von Akteuren außerhalb einer Organisation</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123520|layout=2">
   <p><b>AF_10061</b></p>
   <p>In diesem Anwendungsfall wird ein Akteur außerhalb einer Organisation eingeladen. Für die Suche von Akteuren außerhalb der Organisation KANN das VZD-FHIR-Directory verwendet werden. Ist die MXID des gesuchten Akteurs dort nicht vorhanden MUSS die Kontaktaufnahme auch über einen QR-Code Scan erfolgen. Im Gegensatz zu einer Einladung von Akteuren innerhalb einer Organisation (siehe "AF_10063 - <span style="font-style: italic;">Austausch von Events innerhalb einer Organisation</span>"), prüft in diesem Anwendungsfall der Messenger-Proxy des Einzuladenden zusätzlich die im Kapitel "<span style="font-style: italic;">Berechtigungskonzept</span>" festgelegten Kriterien (Stufe 1 - 3).<span style="background-color: #FFFF99;"> <br> <br> </span> 
    <div style="text-align: center;"></div><p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___17"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">16</span> AF - Einladung von Akteuren außerhalb einer Organisation<br> </p> 
    <table id="polarion_wiki macro name=table;params=noPageBreak=yes|width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 185px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10061</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span id="polarion-comment:317"></span>Einladung von Akteuren außerhalb einer Organisation<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer, Mitarbeiter einer Organisation im Gesundheitswesen in der "Rolle User / User-HBA"</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur A möchte mit Akteur B außerhalb einer Organisation einen gemeinsamen Chatraum einrichten.</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 95px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 95px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger Client A + B,</li> 
         <li>Messenger-Proxy A + B,</li> 
         <li>Matrix-Homeserver A + B,</li> 
         <li>VZD-FHIR-Directory,</li> 
         <li>Push-Gateway B.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 121px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 121px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li>Die Akteure verfügen über einen zugelassenen TI-Messenger-Client.</li> 
         <li>Die Akteure kennen die URL ihres Messenger-Service oder die URL ist bereits in ihren TI-Messenger-Clients konfiguriert.</li> 
         <li>Die Akteure sind am Messenger-Services angemeldet (siehe AF_10057)<span id="polarion-comment:345"></span><br> </li> 
         <li>Die verwendeten Messenger-Services sind Bestandteile der TI-Messenger-Föderation.</li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span><br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 47px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 47px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur A und Akteur B sind beide in einem gemeinsamen Chatraum.<br> Optional erfolgt eine Benachrichtigung an Akteur B über die Einladung in den Chatraum.</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Status<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 185px;height: 0px;border: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 547px;height: 0px;border: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123654" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123663" data-option-id="short"></span> , <span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132592" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> <span style="font-style: normal;">In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Hierbei handelt es um eine <span style="font-weight: bold;">vereinfachte Laufzeitansicht</span> in der zum Beispiel die TLS-Terminierung am Messenger-Proxy auf Grund der Übersichtlichkeit nicht berücksichtigt wurde. Ebenfalls wurde für eine vereinfachte Darstellung darauf verzichtet eine eventuell notwendige Aktualisierung der Föderationsliste vom eigenem Registrierungs-Dienst zu zeigen. Der Abruf der Föderationsliste ist im Anhang B "Aktualisierung der Föderationsliste" hinreichend beschrieben.&nbsp;</span><span style="font-style: italic;"><span id="polarion-comment:421"></span><span id="polarion-comment:513"></span></span> <span style="font-style: normal;">Für die vereinfachte Darstellung wird vorausgesetzt, dass die TI-Messenger-Clients der beteiligten Akteure online sind. Der in der Abbildung dargestellte Registrierungs-Dienst gehört zu dem TI-Messenger-Fachdienst des Messenger-Service B.</span><span style="font-style: italic;"><br> <br> <img src="attachments/397-screenshot-20220622-105433.png" style="width: 750px;height: 1231px;"></span> <p class="polarion-rte-caption-paragraph" style="text-align: center;"> <span id="polarion-comment:109"></span><span id="polarion-comment:546"></span> </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___18"> <span style="background-color: #FFFF99;"><span id="polarion-comment:630"></span></span>Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">18</span>: Laufzeitsicht - Einladung von Akteuren außerhalb einer Organisation <span id="polarion-comment:239"></span> <span id="polarion-comment:240"></span><span id="polarion-comment:241"></span><span id="polarion-comment:242"></span> </p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_575"> <span style="font-weight: bold;">Akzeptanzkriterien für den Anwendungsfall: Einladung von Akteuren außerhalb einer Organisation (AF_10061)</span> </p>
  <p id="polarion_576"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123654|layout=4">
   <p><b>ML-123654</b></p>
   <p>Ein Messenger-Client kann erfolgreich im VZD-FHIR-Directory nach einem Chatpartner suchen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_577"> Ein Beispiel für einen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> ist im Dokument [gemSpec_TI-Messenger-FD#Messenger Proxy] zu finden. </p>
  <p id="polarion_12"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123663|layout=4">
   <p><b>ML-123663</b></p>
   <p>Alle Chat Parteien sind erfolgreich im Chatraum vorhanden.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132864|layout=4">
   <p><b>ML-132864</b></p>
   <p>Die Berechtigungsprüfung der Stufen 1-3 wurden berücksichtigt.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132592|layout=4">
   <p><b>ML-132592</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_104"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-123871">6.10 AF - Austausch von Events zwischen Akteuren außerhalb einer Organisation</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123521|layout=2">
   <p><b>AF_10062</b></p>
   <p>In diesem Anwendungsfall können Akteure welche sich in einem gemeinsamen Raum befinden Nachrichten austauschen und andere durch die Matrix-Spezifikation festgelegte Aktionen ausführen. Dieser Anwendungsfall setzt ein erfolgreiches <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> eines oder mehrerer beteiligter Akteure voraus. In diesem Anwendungsfall sind die beteiligten Akteure in einem gemeinsamen Chatraum und auf unterschiedlichen Messenger-Services verteilt. <br> <br> 
    <div style="text-align: center;"></div><p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p data-keep-next="true" class="polarion-rte-caption-paragraph" style="text-align: left;" id="polarion___19"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">17</span>: AF - Austausch von Events zwischen Akteuren außerhalb einer Organisation&nbsp; </p> 
    <table id="polarion_wiki macro name=table;params=noPageBreak=yes|width=100%" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AF_10062</th> 
       <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Austausch von Events zwischen Akteuren außerhalb einer Organisation<br> </th> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Akteur&nbsp;</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer, Mitarbeiter einer Organisation im Gesundheitswesen in der Rolle "User / User-HBA"</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Auslöser</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Alle Matrix-Events die zwischen Messenger-Services unterschiedlicher Organisationen ausgeführt werden.</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 87px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Komponenten</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 87px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ul> 
         <li>TI-Messenger-Client A + B,</li> 
         <li>Messenger-Proxy A + B,</li> 
         <li>Matrix-Homeserver A + B,</li> 
         <li>Push-Gateway B.</li> 
        </ul> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 114px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vorbedingungen</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 114px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"> 
        <ol> 
         <li>Beide Akteure sind Teilnehmer eines gemeinsamen Raumes.</li> 
         <li>Die Messenger Proxies verfügen über eine aktuelle Föderationsliste.</li> 
         <li>Die Messenger-Proxys überprüfen die Zugehörigkeit der beteiligten Messenger-Services (siehe AF_10064)&nbsp;<span id="polarion-comment:110"></span></li> 
        </ol> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Eingangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Matrix-Event<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 22px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ergebnis</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 22px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Matrix-Event wurde erfolgreich verarbeitet&nbsp;</td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ausgangsdaten</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 19px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Abhängig vom Matrix-Event, Status<br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: left;vertical-align: top;width: 184px;height: 0px;border: 1px solid #CCCCCC;padding: 5px;">Akzeptanzkriterien</td> 
       <td style="text-align: left;vertical-align: top;width: 548px;height: 0px;border: 1px solid #CCCCCC;padding: 5px;"><span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123665" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123666" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123667" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-123668" data-option-id="short"></span>&nbsp;,&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-132593" data-option-id="short"></span>&nbsp;</td> 
      </tr> 
     </tbody> 
    </table> <br> <span style="font-style: normal;">In der Laufzeitsicht sind die Interaktionen zwischen den Komponenten, die durch den Anwendungsfall genutzt werden, dargestellt. Hierbei handelt es um eine <span style="font-weight: bold;">vereinfachte Laufzeitansicht</span> in der zum Beispiel die TLS-Terminierung am Messenger-Proxy auf Grund der Übersichtlichkeit nicht berücksichtigt wurde. Es wird in dem Anwendungsfall von lediglich zwei beteiligten Akteuren ausgegangen. Auf die bei der Prüfung zur Föderationsliste, durch den Messenger-Proxy, notwendigen Interaktionen wurde in dieser Laufzeitsicht verzichtet. Für eine ausführliche Beschreibung dieser Prüfung wird&nbsp;auf den Anwendungsfall "AF_10064 - <span style="font-style: italic;">Föderationszugehörigkeit eines Messenger-Service prüfen"</span> verwiesen. Die in der Abbildung rot dargestellten Linien symbolisieren den Kommunikationsverlauf des auslösenden Matrix-Request. Für die vereinfachte Darstellung wird vorausgesetzt, dass die TI-Messenger-Clients der beteiligten Akteure online sind.</span> <span style="font-style: normal;background-color: #FFFF99;"><br> </span> <br> <p class="polarion-rte-caption-paragraph" style="text-align: center;"></p> <p class="polarion-rte-caption-paragraph" style="text-align: center;"> <span id="polarion-comment:244"></span><img data-keep-next="true" src="attachments/358-screenshot-20220531-131902.png" style="width: 750px;height: 558px;"> </p> <p class="polarion-rte-caption-paragraph" style="text-align: center;" id="polarion___20"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">19</span>:&nbsp;Laufzeitsicht - Austausch von Events zwischen Akteuren außerhalb einer Organisation </p> <span id="polarion-comment:126"></span> <span id="polarion-comment:547"></span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_579"> <span style="font-weight: bold;"><br> Akzeptanzkriterien für den Anwendungsfall:&nbsp;Austausch von Nachrichten zwischen Akteuren außerhalb einer Organisation (AF_10062)</span> </p>
  <p id="polarion_580"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123665|layout=4">
   <p><b>ML-123665</b></p>
   <p>Der Messenger-Proxy des Senders prüft die Domain des Empfängers auf Zugehörigkeit zur TI-Messenger-Föderation.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123666|layout=4">
   <p><b>ML-123666</b></p>
   <p>Der Messenger-Proxy des Empfängers prüft die Domain des Senders auf Zugehörigkeit zur TI-Messenger-Föderation.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123667|layout=4">
   <p><b>ML-123667</b></p>
   <p>Der Matrix-Homeserver des Empfängers löst eine Benachrichtigung des Messenger-Clients über sein Push-Gateway aus.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123668|layout=4">
   <p><b>ML-123668</b></p>
   <p>Die Nachricht wird dem Empfänger im gemeinsamen Raum angezeigt.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132593|layout=4">
   <p><b>ML-132593</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Die Rohdaten wurden entsprechend der Rohdatendefinition gemäß [gemSpec_TI-Messenger-FD#Betrieb] für den TI-Messenger-Fachdienst erfolgreich erfasst und an die definierte Schnittstelle der Rohdatenerfassung versendet.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_106"></p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-121920">7 Anhang A – Verzeichnisse</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121921">7.1 Abkürzungen</h3>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=582" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Kürzel</span><br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 611px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Erläuterung</span><span id="polarion-comment:477"></span><br> </span></th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;"><span id="polarion-comment:219"></span>AD</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Active Directory<br> </span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">AF</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Anwendungsfall</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">AZPD</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Anbieter zentrale Plattformdienste</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">FHIR</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Fast Healthcare Interoperable Resources</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">HBA</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Heilberufsausweis</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">HTTP</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Hypertext Transfer Protocol<br> </span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">IDP </span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Identity Provider</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">JSON</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">JavaScript Object Notation<br> </span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">JWT</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">JSON Web Token </span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">LDAP</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Lightweight Directory Access Protocol<br> </span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">LE</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Leistungserbringer</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">MXID</td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Matrix-User-ID</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">OAuth</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Open Authorization </span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">PTA</td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Pharmazeutisch-technischer Assistent</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">REST</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Representational State Transfer&nbsp;</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">SMC-B</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Institutionenkarte (Security Module Card Typ B)</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 16px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">SMC-B ORG</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 16px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;color: #003366;line-height: 1.5;">Security Module Card für Organisationen</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">SPOC</td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Single Point of Contact</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">SSO</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Single Sign-on</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 18px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">TI</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 18px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Telematikinfrastruktur</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">TI-ITSM</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;color: #172B4D;line-height: 1.5;">IT-Service-Management der TI</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">TI-M</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">TI-Messenger</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">TSP</td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;color: #172B4D;line-height: 1.5;">Trust Service Provider</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">VZD</span></td> 
     <td style="text-align: left;vertical-align: top;width: 611px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Verzeichnisdienst</span></td> 
    </tr> 
   </tbody> 
  </table>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121922">7.2 Glossar</h3>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=583" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 195px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Begriff </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 536px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Erläuterung </span></th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">MXID</td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">eindeutige Identifikation eines TI-Messenger Teilnehmers (Matrix-User-ID)<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">on-premise<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">das Produkt wird auf eigener oder gemieteter Hardware betrieben <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Third-Party&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Drittanbieter, der Zusatzleistungen oder Komponenten beisteuert<br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_584">Das Glossar wird als eigenständiges Dokument (vgl. [gemGlossar]) zur Verfügung gestellt.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121923">7.3 Abbildungsverzeichnis</h3>
  <div data-sequence="Abbildung" id="polarion_wiki macro name=tof;params=uid=585"></div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121924">7.4 Tabellenverzeichnis</h3>
  <div data-sequence="Tabelle" id="polarion_wiki macro name=tof;params=uid=586"></div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-121925">7.5 Referenzierte Dokumente</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-121926">7.5.1 Dokumente der gematik</h4>
  <p id="polarion_587">Die nachfolgende Tabelle enthält die Bezeichnung der in dem vorliegenden Dokument referenzierten Dokumente der gematik zur Telematikinfrastruktur. Der mit der vorliegenden Version korrelierende Entwicklungsstand dieser Konzepte und Spezifikationen wird pro Release in einer Dokumentenlandkarte definiert; Version und Stand der referenzierten Dokumente sind daher in der nachfolgenden Tabelle nicht aufgeführt. Deren zu diesem Dokument jeweils gültige Versionsnummern sind in der aktuellen, von der gematik veröffentlichten Dokumentenlandkarte enthalten, in der die vorliegende Version aufgeführt wird.</p>
  <p id="polarion_588"></p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=589" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Quelle]<br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Herausgeber: Titel<br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">[api-messenger]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">gematik: api-ti-messenger<br> <a href="https://github.com/gematik/api-ti-messenger/" target="_top" class="descriptionLink">https://github.com/gematik/api-ti-messenger/</a>&nbsp;<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">[api-vzd]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Verzeichnisdienst der Telematikinfrastruktur<br> <a href="https://github.com/gematik/api-vzd" target="_top" class="descriptionLink">https://github.com/gematik/api-vzd</a>&nbsp;<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">[gemKPT_Betr]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Betriebskonzept Online-Produktivbetrieb</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">[gemKPT_TI_Messenger] <br> </td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 23px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Konzeptpapier TI-Messenger</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_IDP_Dienst]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation Identity Provider-Dienst<span style="font-weight: normal;"><span style="font-size: 10pt;line-height: 1.5;"><br> 
        <div style="text-align: center;"></div></span><span style="font-size: 12pt;line-height: 1.5;">
        <div style="text-align: center;"></div></span>
       <div style="text-align: center;"></div></span>
      <div style="text-align: center;"></div></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_TI-Messenger-FD]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation TI-Messenger-Fachdienst<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_VZD_FHIR_Directory]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 24px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation Verzeichnisdienst FHIR-Directory<br> </td> 
    </tr> 
   </tbody> 
  </table>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-121927">7.5.2 Weitere Dokumente</h4>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=590" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Quelle]<br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Herausgeber (Erscheinungsdatum): Titel<br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Client-Server API]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification - Client-Server API<br> <a href="https://spec.matrix.org/v1.3/client-server-api/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/client-server-api/</a>&nbsp;&nbsp;<span id="polarion-comment:635"></span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[FHIR]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">HL7 FHIR Dokumentation<br> <a href="https://www.hl7.org/fhir/documentation.html" target="_top" class="descriptionLink">https://www.hl7.org/fhir/documentation.html</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gematik Authenticator]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik Authenticator<br> <a href="https://cloud.gematik.de/index.php/s/23ebxa75z3s7zGt?path=%2Fv2.1.0" target="_top" class="descriptionLink">https://cloud.gematik.de/index.php/s/23ebxa75z3s7zGt?path=%2Fv2.1.0</a>&nbsp;<span id="polarion-comment:697"></span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Matrix Bots]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Bot Implementierungen<br> <a href="https://matrix.org/bots/" target="_top" class="descriptionLink">https://matrix.org/bots/</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Matrix Specification]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification<br> <a href="https://spec.matrix.org/v1.3/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/</a>&nbsp;<span id="polarion-comment:636"></span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[OpenID]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">OpenID Foundation<br> <a href="https://openid.net/developers/specs/" target="_top" class="descriptionLink">https://openid.net/developers/specs/</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Push Gateway API]<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification - Push Gateway API<br> <a href="https://spec.matrix.org/v1.3/push-gateway-api/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/push-gateway-api/</a>&nbsp;<span id="polarion-comment:637"></span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[RFC 8225]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">IETF<br> <a href="https://datatracker.ietf.org/doc/html/rfc8225" target="_top" class="descriptionLink">https://datatracker.ietf.org/doc/html/rfc8225</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 182px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Server-Server API]</td> 
     <td style="text-align: left;vertical-align: top;width: 549px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification - Server-Server API<br> <a href="https://spec.matrix.org/v1.3/server-server-api/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/server-server-api/</a>&nbsp;<span id="polarion-comment:638"></span></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_591"> <span style="font-weight: bold;font-family: Georgia, Garamond;"> </span> </p>
  <p id="polarion_592"></p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-124860">8 Anhang B - Abläufe</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-129343">8.1 Einträge im VZD-FHIR-Directory suchen</h3>
  <p id="polarion_593"> Die folgende Abbildung beschreibt, wie ein Akteur&nbsp;im VZD-FHIR-Directory nach <span style="font-style: italic;">HealthcareService</span>- und <span style="font-style: italic;">PractitionerRole</span> Ressourcen sucht. Dies setzt eine erfolgreiche Anmeldung des Akteurs an einem Messenger-Service voraus. Der dargestellte Ablauf zeigt alle prinzipiell notwendigen Kommunikationsbeziehungen. Weitergehende Informationen zum Ablauf sind in der [gemSpec_VZD_FHIR_Directory] zu finden.<span style="background-color: #FFFF99;"><br> <br> </span> </p>
  <p id="polarion_11" style="text-align: center;" data-keep-next="true" class="polarion-rte-caption-paragraph"> <img src="attachments/387-screenshot-20220607-093802.png" style="width: 750px;height: 978px;"> </p>
  <p id="polarion_1" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">20</span>:&nbsp;Laufzeitansicht - Einträge im VZD-FHIR-Directory suchen&nbsp;<span id="polarion-comment:548"></span> </p>
  <p id="polarion_90"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-129871">8.2 Aktualisierung der Föderationsliste</h3>
  <p id="polarion_597"> Die folgende Abbildung beschreibt, wie der Messenger-Proxy seine lokal vorgehaltene Föderationsliste aktualisiert. Für die Aktualisierung der Föderationsliste MUSS der Messenger-Proxy diese beim Registrierungs-Dienst seines TI-Messenger-Fachdienstes anfragen. Die Häufigkeit der Anfrage einer neuen Liste wird durch den Anbieter festgelegt, Ziel sollte eine möglichst aktuelle Föderationsliste sein (mindestens jedoch einmal am Tag). Hierbei übergibt der Messenger-Proxy die durch ihn gespeicherte Version der Föderationsliste im Aufruf an den Registrierungs-Dienst. Bei Übereinstimmung der Version wird für den Messenger-Proxy keine neue Föderationsliste durch den Registrierungs-Dienst bereitgestellt. Ist die Version größer als die vom Messenger-Proxy übergebene, dann wird durch den Registrierungs-Dienst eine aktualisierte Föderationsliste zur Verfügung gestellt. Bei jeder Anfrage eines Messenger-Proxys beim Registrierungs-Dienst nach einer aktuellen Föderationsliste MUSS auch der Registrierungs-Dienst die Aktualität beim FHIR-Proxy prüfen indem er die von ihm gespeicherte Version der Föderationsliste beim Aufruf am FHIR-Proxy übergibt. Ein Download der Föderationsliste ist nur notwendig, wenn eine neuere Version auf dem FHIR-Proxy existiert. Die Struktur der Föderationsliste ist in [gemSpec_VZD_FHIR_Directory] beschrieben. Nach dem Abruf der Föderationsliste vom Registrierungs-Dienst, durch den Messenger Proxy, MUSS dieser die Signatur der Föderationsliste prüfen.<span style="background-color: #FFFF99;"><span id="polarion-comment:686"></span></span> </p>
  <p id="polarion_143"></p>
  <p id="polarion_157" style="text-align: center;" class="polarion-rte-caption-paragraph"> <img src="attachments/403-screenshot-20220711-115913.png" style="width: 600px;height: 379px;"> </p>
  <p id="polarion_102" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">21</span>: Laufzeitansicht - Aktualisierung der Föderationsliste<span style="background-color: #FFFF99;"><span id="polarion-comment:687"></span></span> </p>
  <p id="polarion_601" style="text-align: center;"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-132682">8.3 Stufen der Berechtigungsprüfung</h3>
  <p id="polarion_101"> Die folgende Abbildung beschreibt, wie die Berechtigungsprüfung eingehender Matrix-Anfragen am Messenger-Proxy erfolgen MUSS. Das Berechtigungskonzept basiert auf einer dreistufigen Prüfung, die in Kapitel "<span style="font-style: italic;">Berechtigungskonzept</span>" beschrieben ist. Es wird auf die Erwähnung notwendiger Authentifizierungen an dieser Stelle verzichtet.<span id="polarion-comment:620"></span> </p>
  <p id="polarion_107" style="text-align: center;"> <br> <img src="attachments/395-screenshot-20220622-085118.png" style="width: 750px;height: 1346px;"> </p>
  <p id="polarion_117" style="text-align: center;" class="polarion-rte-caption-paragraph"> <span style="background-color: #FFFF99;"><span id="polarion-comment:629"></span></span>Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">22</span>: Laufzeitansicht - Stufen der Berechtigungsprüfung </p>
 </body>
</html>