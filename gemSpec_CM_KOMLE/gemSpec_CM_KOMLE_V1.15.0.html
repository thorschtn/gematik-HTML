<html>
 <head>
  <link rel="stylesheet" href="attachments/styleSheetForToc.css">
 </head>
 <body>
  <p id="polarion_1"> <br> </p>
  <p id="polarion_2"> <br> </p>
  <p id="polarion_3"> <br> </p>
  <p id="polarion_5"> <br> </p>
  <p id="polarion_6"> <span style="font-weight: bold;text-decoration: underline;font-size: 12pt;line-height: 1.5;">Elektronische Gesundheitskarte und Telematikinfrastruktur</span> </p>
  <p id="polarion_7"> <br> </p>
  <p id="polarion_8"></p>
  <p id="polarion_9"> <br> </p>
  <p id="polarion_10"> <br> </p>
  <p id="polarion_11" style="text-align: center;"> <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">Spezifikation</span> </p>
  <p id="polarion_12" style="text-align: center;"> <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">KOM-LE-Clientmodul</span> </p>
  <p id="polarion_13"></p>
  <p id="polarion_128"></p>
  <p id="polarion_129"></p>
  <p id="polarion_132"></p>
  <div id="polarion_editor_html_block1" class="polarion-dle-wiki-block"> 
   <div id="polarion_editor_html_block_content" contenteditable="false"></div>
   <pre id="polarion_editor_html_block_source" class="polarion-dle-wiki-block-source" contenteditable="false">
    <table>
     <tr>
      <td>Version</td>
      <td>1.15.0</td>
     </tr>
     <tr>
      <td>Revision</td>
      <td>571451</td>
     </tr>
     <tr>
      <td>Stand</td>
      <td>13.01.2023</td>
     </tr>
     <tr>
      <td>Status</td>
      <td>freigegeben</td>
     </tr>
     <tr>
      <td>Klassifizierung</td>
      <td>öffentlich</td>
     </tr>
     <tr>
      <td>Referenzierung</td>
      <td>gemSpec_CM_KOMLE</td>
     </tr>
    </table></pre> 
  </div>
  <div id="polarion_wiki macro name=page_break;params=uid=1" contenteditable="false" data-is-landscape="false"></div>
  <h1 id="polarion_wiki macro name=module-workitem;params=id=ML-16651">Dokumentinformationen</h1>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=2" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <td style="text-align: left;vertical-align: top;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Seit März 2020 verwendet die gematik die Bezeichnung „<span style="font-weight: bold;">KIM – Kommunikation im Medizinwesen</span>“ für die Anwendung <span style="font-weight: bold;">KOM-LE</span>. Diese neue Benennung findet sich insbesondere in Informationsmaterialien für die Zielgruppe Leistungserbringer sowie in Presseveröffentlichungen. Eine Umbenennung in den technisch-normativen Dokumenten wie Spezifikationen, Konzepten, Zulassungsdokumenten etc. mit Ausnahme von Angaben zu Domänen, E-Mail-Adressen, technischen Schnittstellen, Parametern u.ä. ist mit Stand Release 4.0.0 nicht geplant.</span></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_739"></p>
  <p id="polarion_742"> <span style="font-weight: bold;font-size: 12pt;line-height: 1.5;">Änderungen zur Vorversion</span> </p>
  <p id="polarion_23"> <span style="font-size: 10pt;line-height: 1.5;">Anpassungen des vorliegenden Dokumentes im Vergleich zur Vorversion können Sie der nachfolgenden Tabelle entnehmen.</span> </p>
  <p id="polarion_24"></p>
  <p id="polarion_25"> <span style="font-weight: bold;font-size: 12pt;line-height: 1.5;">Dokumentenhistorie</span> </p>
  <table id="polarion_wiki macro name=table;params=uid=1" style="width: 100%;margin-left: 0px;margin-right: auto;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 73px;height: 14px;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Version </span><br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 83px;height: 14px;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Stand </span><br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 78px;height: 14px;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Kap./ Seite </span><br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 355px;height: 14px;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Grund der Änderung, besondere Hinweise </span><br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 102px;height: 14px;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: bold;">Bearbeitung </span><br> </span></th> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">0.5.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">19.11.13 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"> </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">zur Abstimmung freigegeben </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.0.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">27.01.14 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"> </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Einarbeitung Kommentare </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.1.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">28.02.14 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">4.1.2 </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">XP-Verweis entfernt </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 29pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.2.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 29pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">25.07.14 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 29pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">3.1<br> 4.1.2/4.1.4 </span></td> 
     <td style="vertical-align: top;width: 355px;height: 29pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Zeitsynchronisation Konnektor ergänzt Formulierungsanpassungen </span></td> 
     <td style="vertical-align: top;width: 102px;height: 29pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.3.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">24.07.15 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"> </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Begriff Betreiber durch Anbieter ersetzt </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.4.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">16.10.16 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.5.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">14.05.18 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"> </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Einarbeitung P15.4 </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.6.0 </span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">15.05.2019 </span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"> </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Einarbeitung P18.1 </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.7.0</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">02.03.20</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Einarbeitung P21.1</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.8.0&nbsp;</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">30.06.20</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"> </span></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste P22.1 und Scope-Themen aus Systemdesign R4.0.0 </span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik </span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.9.0&nbsp;</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">12.11.20</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste P22.2 und Scope-Themen aus Systemdesign R4.0.1</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.9.1</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">18.12.20</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste P22.4</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.10.0</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">19.02.21</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste P22.5&nbsp;</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.11.0</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">06.04.21</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste KIM_Maintenance_21.1/<br> KIM 1.5.1</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.11.1</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">20.04.21</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Anpassung C_10247 aus KIM_Maintenance_21.1 vervollständigt (A_21247 entfernt)</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.12.0</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">04.08.21</span></td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Einarbeitung gemäß KIM Maintenance 21.2 /KIM 1.5.1-3</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">1.13.0</span></td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">31.01.22</td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">Einarbeitung gemäß KIM Maintenance 21.3 /KIM 1.5.2</span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">1.14.0</td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">20.09.22</td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><br> <br> 3.2.1 und<br> 3.4.4.2.2</td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;"><span style="font-weight: normal;font-size: 10pt;line-height: 1.5;">Anpassungen gemäß Änderungsliste KIM_Maintenance_22.2 - KIM 1.5.2-1 und R3.1.3-12&nbsp;(C_11209)</span><br> Ergänzung der Beispiele in Kapitel 3.2.1 und&nbsp;<span style="font-weight: normal;">3.4.4.2.2</span><span style="font-weight: normal;color: #FF0000;">&nbsp;</span><span style="font-weight: bold;color: #FF0000;"><span id="polarion-comment:260"></span></span></span></td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 9pt;line-height: 1.5;">gematik</span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">1.15.0</td> 
     <td style="vertical-align: top;width: 83px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">13.01.23</td> 
     <td style="vertical-align: top;width: 78px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"></td> 
     <td style="vertical-align: top;width: 355px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">Anpassungen gemäß Änderungsliste KIM_Maintenance_22.3 - KIM 1.5.2-2</td> 
     <td style="vertical-align: top;width: 102px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">gematik</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_27"> <br> </p>
  <h1 id="polarion_wiki macro name=module-workitem;params=id=ML-16652">Inhaltsverzeichnis</h1>
  <div id="polarion_wiki macro name=toc"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion_wiki macro name=module-workitem;params=id=ML-16651">Dokumentinformationen</a></li>
   <li><a href="#polarion_wiki macro name=module-workitem;params=id=ML-16652">Inhaltsverzeichnis</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16653">1 Einordnung des Dokumentes</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16654">1.1 Zielsetzung</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16655">1.2 Zielgruppe</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16656">1.3 Geltungsbereich</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16657">1.4 Arbeitsgrundlagen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16658">1.5 Abgrenzung des Dokuments</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16659">1.6 Methodik</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16660">1.6.1 Anforderungen</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16662">1.6.2 Diagramme</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16663">1.6.3 Nomenklatur</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16664">2 Systemüberblick</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16665">3 Produktfunktionen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16666">3.1 Allgemeine Anforderungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103769">3.2 Umgang mit großen Client-Mails</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103771">3.2.1 Senden von großen Client-Mails</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103770">3.2.2 Empfangen von großen Client-Mails</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16672">3.3 Senden von Nachrichten</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16673">3.3.1 Übersicht</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16674">3.3.2 CONNECT-Zustand</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16675">3.3.2.1 Initialisierung</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16678">3.3.2.2 Verbindungsaufbau mit MTA</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16688">3.3.3 PROXY-Zustand</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16691">3.3.4 PROCESS-Zustand</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16692">3.3.4.1 Empfang und Weiterleitung einer Nachricht</a></li>
   <li> : : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16694">3.3.4.1.1 Bearbeitung einer ungeschützten Nachricht</a></li>
   <li> : : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16711">3.3.4.1.2 Bearbeitung einer geschützten KOM-LE-Nachricht</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16713">3.3.5 Beispiele</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16714">3.4 Empfangen von Nachrichten</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16715">3.4.1 Übersicht</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16716">3.4.2 CONNECT-Zustand</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16717">3.4.2.1 Initialisierung</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16719">3.4.2.2 Verbindungsaufbau mit dem POP3-Server</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16729">3.4.3 PROXY-Zustand</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16732">3.4.4 PROCESS-Zustand</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16733">3.4.4.1 Empfang und Weiterleitung einer Nachricht</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16734">3.4.4.2 Aufbereitung einer Nachricht</a></li>
   <li> : : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16735">3.4.4.2.1 Entschlüsselung</a></li>
   <li> : : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16743">3.4.4.2.2 Integritätsprüfung</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16748">3.4.5 Beispiele</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16749">3.5 Übermittlung von Kontaktdaten</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103943">3.6 Übermittlung von E-Mail-Kategorien</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103772">3.7 Administrationsmodul</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103891">3.7.1 Allgemeine Anforderungen</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103885">3.7.2 Registrierung KOM-LE-Teilnehmer</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103888">3.7.3 Deregistrierung KOM-LE-Teilnehmer</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-103887">3.7.4 Download PKCS#12 KOM-LE-Teilnehmer</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16750">3.8 Kryptographischen Schnittstellen des Konnektors</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16751">3.8.1 Erstellung der digitalen Signatur einer Nachricht mit einer SM-B</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16755">3.8.2 Prüfung der digitalen Signatur einer Nachricht</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16756">3.8.3 Verschlüsselung einer Nachricht</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16757">3.8.4 Entschlüsselung einer Nachricht mit einer SM-B bzw. einem HBA</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16763">4 Nichtfunktionale Anforderungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16764">4.1 Transportsicherung</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16765">4.1.1 Allgemeine Festlegungen</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16768">4.1.2 Transportsicherung zwischen Clientsystem und Clientmodul</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16773">4.1.3 Transportsicherung zwischen Clientmodul und Konnektor</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16777">4.1.4 Transportsicherung zwischen Clientmodul und Fachdienst</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16781">4.2 Nutzung von Webservice-Schnittstellen des Konnektors</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16784">4.3 Protokollierung/Logging</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16793">4.3.1 Ablaufprotokoll</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16795">4.3.2 Performance</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16798">4.3.3 Fehler</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16800">4.4 Konfiguration</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16803">4.5 Update-Mechanismen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16805">4.6 Produktleistungen</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16806">4.6.1 Performance</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16807">4.6.2 Skalierbarkeit</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16809">5 Anhang A – Verzeichnisse</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16810">5.1 Abkürzungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16811">5.2 Glossar</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16812">5.3 Abbildungsverzeichnis</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16813">5.4 Tabellenverzeichnis</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16814">5.5 Referenzierte Dokumente</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16815">5.5.1 Dokumente der gematik</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-16816">5.5.2 Weitere Dokumente</a></li>
  </div>
  <p id="polarion_34"> <br> </p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-16653">1 Einordnung des Dokumentes</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16654">1.1 Zielsetzung</h3>
  <p id="polarion_35">Das vorliegende Dokument spezifiziert die Anforderungen an den Produkttyp KOM-LE-Clientmodul. Das Clientmodul ist verantwortlich für das Signieren und Verschlüsseln von KOM-LE-Nachrichten beim Versenden sowie für die Entschlüsselung und Signaturprüfung beim Abholen von KOM-LE-Nachrichten.</p>
  <p id="polarion_36">Aus den Kommunikationsbeziehungen mit Clientsystem, Konnektor, Verzeichnisdienst und KOM-LE-Fachdienst resultieren vom Clientmodul anzubietende Schnittstellen, die in diesem Dokument normativ beschrieben werden. Vom Clientmodul genutzte Schnittstellen liegen zumeist in anderen Verantwortungsbereichen (Konnektor, Verzeichnisdienst). Diese werden in den entsprechenden Produkttypspezifikationen definiert.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16655">1.2 Zielgruppe</h3>
  <p id="polarion_37">Dieses Dokument richtet sich an</p>
  <ul id="polarion_38"> 
   <li>Entwickler des KOM-LE-Clientmoduls,</li> 
   <li>Primärsystemhersteller und</li> 
   <li>Verantwortliche für Zulassung und Test.</li> 
  </ul>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16656">1.3 Geltungsbereich</h3>
  <p id="polarion_39">Dieses Dokument enthält normative Festlegungen zur Telematikinfrastruktur des deutschen Gesundheitswesens. Der Gültigkeitszeitraum der vorliegenden Version und deren Anwendung in Zulassungsverfahren werden durch die gematik GmbH in gesonderten Dokumenten (z.B. Dokumentenlandkarte, Produkttypsteckbrief, Leistungsbeschreibung) festgelegt und bekannt gegeben.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16657">1.4 Arbeitsgrundlagen</h3>
  <p id="polarion_40">Grundlagen für die Ausführungen dieses Dokumentes sind</p>
  <ul id="polarion_41"> 
   <li>Lastenheft Adressierte Kommunikation Leistungserbringer</li> 
   <li>Systemspezifisches Konzept KOM-LE [gemSysL_KOMLE]</li> 
   <li>KOM-LE S/MIME-Profil [gemSMIME_KOMLE]</li> 
   <li>Gesamtarchitektur der TI [gemÜK_Arch_TI]</li> 
   <li>Konzept Architektur der TI-Plattform [gemKPT_Arch_TIP]</li> 
   <li>Spezifikation PKI [gemSpec_PKI]</li> 
   <li>Verwendung kryptographischer Algorithmen in der Telematikinfrastruktur [gemSpec_Krypt]</li> 
   <li>Spezifikation Konnektor [gemSpec_Kon]</li> 
  </ul>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16658">1.5 Abgrenzung des Dokuments</h3>
  <p id="polarion_42">Spezifiziert werden in dem Dokument die vom Produkttyp bereitgestellten (angebotenen) Schnittstellen. Benutzte Schnittstellen werden hingegen in der Spezifikation desjenigen Produkttypen beschrieben, der diese Schnittstelle bereitstellt. Auf die entsprechenden Dokumente wird referenziert.</p>
  <p id="polarion_43">Die Systemlösung der Fachanwendung KOM-LE ist im systemspezifischen Konzept [gemSysL_KOMLE] beschrieben. Dieses Konzept setzt die fachlichen Anforderungen des Lastenheftes auf Systemebene um, zerlegt die Fachanwendung KOM-LE in die zugehörigen Produkttypen, darunter das KOM-LE-Clientmodul und der KOM-LE-Fachdienst. Ferner definiert es die Schnittstellen zwischen den einzelnen Produkttypen. Für das Verständnis dieser Spezifikation wird die Kenntnis von [gemSysL_KOMLE] vorausgesetzt.</p>
  <p id="polarion_44">Die Anforderungen am Fachdienst werden separat in der Spezifikationen Fachdienst KOM-LE [gemSpec_FD_KOMLE] beschrieben.</p>
  <p id="polarion_45">Die Anforderungen an das Format der KOM-LE-Nachrichten, die zwischen dem Clientmodul und dem Fachdienst übermittelt werden, werden separat im KOM-LE-S/MIME-Profil [gemSMIME_KOMLE] beschrieben.</p>
  <p id="polarion_46">Abbildung 1 zeigt schematisch die Einbettung des vorliegenden Dokuments in die Dokumentenlandschaft der Lastenheft- und Pflichtenheftphase in Form einer Dokumentenhierarchie.</p>
  <p id="polarion_48" style="text-align: center;"> <br> <img src="attachments/image3.png" style="width: 582px;height: 276px;"> </p>
  <p id="polarion_26" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">1</span>: Abb_Dok_Hierarchie Dokumentenhierarchie KOM-LE </p>
  <p id="polarion_31"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16659">1.6 Methodik</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16660">1.6.1 Anforderungen</h4>
  <p id="polarion_50">Anforderungen als Ausdruck normativer Festlegungen werden durch eine eindeutige ID sowie die dem RFC 2119 [RFC2119] entsprechenden, in Großbuchstaben geschriebenen deutschen Schlüsselworte MUSS, DARF NICHT, SOLL, SOLL NICHT, KANN gekennzeichnet.</p>
  <p id="polarion_51">Sie werden im Dokument wie folgt dargestellt:</p>
  <p id="polarion_52"> <span style="font-weight: bold;">&lt;AFO-ID&gt; - &lt;Titel der Afo&gt;</span><br> Text / Beschreibung<br> <span style="font-weight: bold;">[</span>&lt;=<span style="font-weight: bold;">]</span><br> </p>
  <p id="polarion_53">Dabei umfasst die Anforderung sämtliche innerhalb der Afo-ID und der Textmarke angeführten Inhalte.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16662">1.6.2 Diagramme</h4>
  <p id="polarion_54">Die Darstellung der Spezifikationen von Komponenten erfolgt auf der Grundlage einer durchgängigen Use-Case-Modellierung als</p>
  <ul id="polarion_55"> 
   <li>technische Use Cases (eingebundene Graphik sowie tabellarische Darstellung mit Vor- und Nachbedingungen gemäß Modellierungsleitfaden),</li> 
   <li>Sequenz- und Aktivitätendiagramme sowie</li> 
   <li>Klassendiagramme</li> 
   <li>XML-Strukturen und Schnittstellenbeschreibungen.</li> 
  </ul>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16663">1.6.3 Nomenklatur</h4>
  <p id="polarion_56">Sofern im Text dieser Spezifikation auf die Ausgangsanforderungen verwiesen wird, erfolgt dies in eckigen Klammern, z.B. [KOMLE-A_2015]. Wird auf Eingangsanforderungen verwiesen, erfolgt dies in runden Klammern, z.B. (KOMLE-A_202).</p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-16664">2 Systemüberblick</h2>
  <p id="polarion_58">Das Clientmodul bietet die Funktionalität, die für Anwendungsfälle KOM-LE_AF_1 „Nachricht senden“ und KOM-LE_AF_2 „Nachricht empfangen“ (siehe [gemSysL_KOMLE]) relevant ist. Die Aufgabe des Clientmoduls ist das Aufbringen und Aufheben des Schutzes der Integrität und Vertraulichkeit der zwischen den KOM-LE-Teilnehmern ausgetauschten E-Mail-Nachrichten. Dabei kommuniziert das Clientmodul mit dem Clientsystem, dem KOM-LE-Fachdienst und nutzt mehrere Dienste der TI-Plattform. Optional kann das Clientmodul in das Clientsystem integriert werden. Abbildung 2 stellt die grundlegenden Elemente der KOM-LE-Architektur dar.</p>
  <p id="polarion_49" style="text-align: center;" data-keep-next="true" class="polarion-rte-caption-paragraph"> <br> <img data-keep-next="true" src="attachments/image4.png" style="width: 582px;height: 226px;"> </p>
  <p id="polarion_59" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">2</span>: Abb_KOMLE_Komp KOM-LE-Komponenten </p>
  <p id="polarion_62"></p>
  <p id="polarion_63">Die im Clientmodul zu bearbeitenden originalen MIME-Nachrichten von einem Clientsystem, die kleiner oder gleich 15 MiB sind, werden beim Senden entsprechend dem KOM-LE-S/MIME-Profil&nbsp;gemäß [gemSMIME_KOMLE] digital signiert und verschlüsselt und im empfangenden Clientmodul entschlüsselt und deren Signatur geprüft. Die originalen MIME-Nachrichten, die von einem Clientsystem an das Clientmodul übergeben werden, werden im KIM-Kontext als Client-Mails bezeichnet. Bei Client-Mails größer 15 MiB wird die gesamte Client-Mail auf einem separaten&nbsp;Speicherort (Fachdienst) verschlüsselt abgelegt (E-Mail-Daten). Das KOM-LE-S/MIME-Profil konkretisiert die S/MIME-Spezifikation und stellt sicher, dass die Interoperabilität zwischen den verschiedenen KOM-LE-Komponenten sowie der Schutz von Integrität und Vertraulichkeit für alle personenbezogenen medizinischen Daten gewährleistet werden.</p>
  <p id="polarion_64"> Jede dem KOM-LE-S/MIME-Profil entsprechende Nachricht hat die in Abbildung 3 dargestellte Struktur. Die äußere Nachricht ist eine entsprechend dem S/MIME-Standard signierte und verschlüsselte E-Mail-Nachricht. Die innere Nachricht ist die vom Clientmodul verarbeitete Client-Mail (signiert und verschlüsselt) die gemäß <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> als Anhang in die äußere Nachricht angehangen wird. Die so erzeugte Mail wird im KIM-Kontext als KOM-LE-Nachricht bezeichnet. </p>
  <p id="polarion_65" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image5.jpeg" style="width: 574px;height: 163px;"> </p>
  <p id="polarion_60" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">3</span>: Abb_Struk_KOMLE_Msg Struktur einer KOM-LE-Nachricht </p>
  <p id="polarion_67" style="text-align: center;"></p>
  <p id="polarion_480"> Die durch das Clientmodul versendeten Nachrichten können vom Client optional gekennzeichnet werden. Es wird empfohlen eine Dienstkennung zu setzen. Andernfalls werden Nachrichten mit einer standardisierten Dienstkennung versehen. Das hierfür&nbsp;notwendiges Attribut im Header der Mail <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">(X-KIM-Dienstkennung)</span> wird im Kapitel 3.6 beschrieben. Erfolgte durch den Client keine Belegung dieses Attributes, wird durch das Clientmodul eine Default-Kennung gesetzt.&nbsp;<span style="font-size: 10pt;line-height: 1.5;">Um die Abholung der auf dem Mail-Server ankommenden Nachrichten inhaltsabhängig durchführen zu können, wird das Header-Feld "X-KIM-Dienstkennung" aus der inneren Nachricht, die signiert und verschlüsselt ist, in den äußeren Header der Nachricht übernommen.<br> </span> </p>
  <p id="polarion_472">Zusätzlich wird das Clientmodul um das Administrationsmodul erweitert (siehe auch Kap. 3.7). Mit Hilfe des Administrationsmoduls kann sich der KOM-LE-Teilnehmer beim Fachdienst registrieren&nbsp;oder eine Deregistrierung vornehmen. Zugleich kann über das Administrationsmodul das benötigte Clientzertifikat (PKCS#12 - Datei) heruntergeladen werden.</p>
  <p id="polarion_729"></p>
  <p id="polarion_14" style="text-align: center;" class="polarion-rte-caption-paragraph"> <img src="attachments/21-screenshot-20220912-104714.png" style="width: 754px;height: 380px;"> </p>
  <p id="polarion_123" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">4</span>: Administrationsmodul für die Kommunikation mit dem Account Manager </p>
  <p id="polarion_47"></p>
  <p id="polarion_609">Der Funktionsumfang des Clientmodules kann optional in das Clientsystem integriert werden. Somit ist kein separates Clientmodul mehr notwendig.</p>
  <p id="polarion_708"> Wenn das Clientmodul in das Clientsystem (PVS) integriert wird, richten sich die Anforderungen des Clientmodul an das Clientsystem (PVS). Durch die optionale Integration entfallen&nbsp;a<span style="font-size: 10pt;line-height: 1.5;">lle Anforderungen an die Schnittstelle zwischen Clientsystem und Clientmodul, da diese nicht mehr existiert.</span> </p>
  <p id="polarion_709">In diesem Szenario gilt für Anforderungen, die nur Anteile auf die Schnittstelle zwischen Clientsystem und dem Clientmodul enthalten (z.B. "vom Clientsystem erhaltene E-Mail-Nachrichten"), dass diese Anteile entfallen und die restliche Anforderung umgesetzt werden muss. Abzüglich der Tests der weggefallenen Schnittstelle ändert sich also das Zulassungsverfahren nicht.</p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-16665">3 Produktfunktionen</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16666">3.1 Allgemeine Anforderungen</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16667">
   <p><b>KOM-LE-A_2003</b></p>
   <p><p style="margin-left: 0px;"><span>Das KOM-LE</span><span>-</span><span>Clientmodul MUSS das Senden und Empfangen von Nachrichten mit </span><span>marktüblichen SMTP/POP3 Desktop-</span><span>E</span><span>-Mail-Clients unterstützen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133927">
   <p><b>KOM-LE-A_2004-01</b></p>
   <p>Das KOM-LE-Clientmodul MUSS eine decodierte MIME-Message (Client-Mail) mit einer Größe von bis zu 15 MiB verarbeiten können. <br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_550"> <span style="font-style: italic;font-size: 10pt;line-height: 1.5;">Hinweis: </span> </p>
  <ul id="polarion_551"> 
   <li><span style="font-style: italic;font-size: 10pt;line-height: 1.5;">Durch die Limitierung des Konnektors ist die Client-Mail Verarbeitung nur bis zu einer Größe von 15 MiB sinnvoll möglich. </span></li> 
   <li><span style="font-style: italic;font-size: 10pt;line-height: 1.5;">Es ist zu beachten dass durch die base64-Kodierung der übersendeten Client-Mail die empfangene Mailgröße am Clientmodul durch die Transportkodierung um den Faktor 1,37 erhöht ist.</span></li> 
   <li><span style="font-style: italic;font-size: 10pt;line-height: 1.5;">Wenn der Empfänger ein Clientmodul ab Version 1.5 nutzt, können mit der in Kap. 3.2 beschriebenen Vorgehensweise auch große Client-Mails über 15 MiB versendet werden.</span></li> 
  </ul>
  <p id="polarion_593"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104481">
   <p><b>A_19513</b></p>
   <p>Das KOM-LE-Clientmodul MUSS die Zertifikate aus der PKCS#12-Datei entpacken und zur Verfügung stellen. <b>&lt;=</b></p>
  </div>
  <p id="polarion_716"> Die PKCS#12-Datei wird für die Registrierung eines KOM-LE-Teilnehmers sowie bei Ablauf des Clientzertifikates benötigt.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16669">
   <p><b>KOM-LE-A_2005</b></p>
   <p><p style="margin-left: 0px;"><span>Das </span><span>KOM-LE-</span><span>Clientmodul DARF NICHT die Inhalte von Nachrichten länger als es für die Aufbereitung und Übermittlung</span><span> nötig ist, speichern. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16670">
   <p><b>KOM-LE-A_2230</b></p>
   <p><p style="margin-left: 0px;"><span>Das KOM-LE-Clientmodul MUSS sich unter Verwendung der Operation sync_Time mit der Systemzeit des Konnektors synchronisieren. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16671">
   <p><b>KOM-LE-A_2006</b></p>
   <p>Das KOM-LE-Clientmodul MUSS sich beim Senden und Empfangen von Nachrichten konform zu folgenden Standards verhalten:<br> 
    <ul> 
     <li>IETF Draft: The LOGIN SASL Mechanism, K. Murchison, M. Crispin, August 2003,<br> </li> 
     <li>RFC 1939: Post Office Protocol – Version 3 [RFC1939],<br> </li> 
     <li>RFC 2045: Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies [RFC2045],<br> </li> 
     <li>RFC2046: Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types [RFC2046],<br> </li> 
     <li>RFC 2449: POP3 Extension Mechanism [RFC2449],<br> </li> 
     <li>RFC 3463: Enhanced Mail System Status Codes [RFC3463],<br> </li> 
     <li>RFC 4616: The PLAIN Simple Authentication and Security Layer (SASL) Mechanism, K. Zeilenga, August 2006 [RFC4616],<br> </li> 
     <li>RFC 4954: SMTP Service Extension for Authentication [RFC4954],<br> </li> 
     <li>RFC 5321: Simple Mail Transfer Protocol [RFC5321],<br> </li> 
     <li>RFC 5322: Internet Message Format [RFC5322],<br> </li> 
     <li>RFC 5750: Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.2 Certificate Handling, B. Ramsdell, S. Turner, Januar 2010 [RFC5750] und<br> </li> 
     <li>RFC 5751: Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.2 Message Specification, B. Ramsdell, S. Turner, Januar 2010 [RFC5751].<br> </li> 
    </ul> <b>&lt;=</b></p>
  </div>
  <p id="polarion_731"> Diese Spezifikation erläutert nicht alle Schritte und Einzelheiten der SMTP- und POP3-Kommunikation zwischen dem Clientsystem, dem KOM-LE-Clientmodul und dem KOM-LE-Fachdienst. Es setzt voraus, dass das Format einer E-Mail, MIME, SMTP und POP3 dem Leser bekannt sind.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117964">
   <p><b>A_20189-02</b></p>
   <p>Der Anbieter des KOM-LE-Fachdienstes MUSS seinem KOM-LE Teilnehmer bei der Erstellung des Accounts sowie bei einem&nbsp; relevanten Update des Fachdienstes, die nötige KOM-LE-Version des Clientmoduls mitteilen. <br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_730">Die KOM-LE-Version des Clientmodules muss mitgeteilt werden, damit der Nutzer weiß, welche Clientmodul-Version zu verwenden ist. Bei Nutzung eines Clientmodules in der KOM-LE-Version 1.0 ist eine Registrierung durch den Teilnehmer über die KOM-LE-1.5-Schnittstelle am KOM-LE-Fachdienst nicht möglich.</p>
  <p id="polarion_330"></p>
  <p id="polarion_544"> Die Übermittlung der KOM-LE-Version vom Anbieter kann hierbei in geeigneter Form erfolgen. Die jeweilige Client-Version kann aus dem LDAP-Directory Attribut: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">komLeData</span> vom VZD entnommen werden. Geltende KOM-LE-Versionen sind <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">1.0</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">1.5</span> und werden in der Form in das Header-Element <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KOM-LE-Version</span> eingetragen.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133964">
   <p><b>A_20650-05</b></p>
   <p>Das&nbsp;KOM-LE-Clientmodul MUSS bei der Übertragung von Fehlernachrichten ein Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung</span>&nbsp;mit dem Wert aus der Tabelle "Tab_Fehlercodes_KOMLE-Clientmodule" befüllen. Treten weitere Fehler auf, die nicht in der Tabelle "Tab_Fehlercodes_KOMLE-Clientmodul" definierte sind, MUSS das Clientmodul für diese Fehler das Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung</span> mit einem herstellerspezifischen Fehlercode befüllen, welcher mit "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X</span>" beginnt.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_471"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">#</span>: Tab_Fehlercodes_KOMLE-Clientmodule </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=11" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 348.266px;height: 19.5px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: normal;">Fehler</span></th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 138.734px;height: 19.5px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: normal;">Wert</span></th> 
    </tr> 
    <tr> 
     <td colspan="2" style="text-align: left;vertical-align: top;width: 498px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Fehlermeldungen beim Senden einer KOM-LE-Nachricht</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Empfänger entfernt, wegen falscher KIM-Version</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> 4001</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Verschlüsselte E-Mail-Daten konnten nicht zum KOM-LE-Attachment-Service übertragen werden&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> 4002</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">keine eindeutige Telematik-ID mit Verschlüsselungszertifikat gefunden</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> 4003</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 21.5px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Nachricht nicht für alle Empfänger verschlüsselbar</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 21.5px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> 4004</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 59.9531px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Für einen Empfänger existieren mehrere Verschlüsselungszertifikate mit unterschiedlichen Telematik-IDs</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 59.9531px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4005</span></td> 
    </tr> 
    <tr> 
     <td colspan="2" style="text-align: left;vertical-align: top;width: 498px;height: 20.3906px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;font-style: normal;">Fehlermeldungen beim Empfangen einer KOM-LE-Nachricht </span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Verschlüsselte E-Mail-Daten konnten nicht vom KOM-LE-Attachment-Service geladen werden&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> 4006</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beim Entschlüsseln der&nbsp;E-Mail-Daten ist ein Fehler aufgetreten</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4007</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Das verwendete Clientmodul unterstützt die in der Mail verwendete Version nicht</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4008</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Nachricht konnte auf Grund eines nicht verfügbaren Schlüssels nicht entschlüsselt werden</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4009</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Nachricht konnte aufgrund des falschen Formats nicht entschlüsselt werden</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4010</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Der Konnektor steht für die Entschlüsselung nicht zur Verfügung</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39.9688px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4011</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 61px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Prüfsumme der E-Mail-Daten stimmt nicht mit der beigefügten Prüfsumme überein. Die empfangene aufbereitete Client-Mail entspricht eventuell nicht der vom Sender auf dem KAS hinterlegten aufbereiteten Client-Mail.</span></td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 61px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4012</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 58.5px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Verschlüsselte E-Mail-Daten konnten nicht heruntergeladen werden, da durch zu häufigen Zugriff der KOM-LE-Attachment-Service den Abruf verweigert.&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 58.5px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4013</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 78px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Die Prüfung der Nachricht hat ergeben, dass die Nachricht nach dem Verschlüsseln manipuliert wurde. Möglicherweise wurde die verschlüsselte Nachricht auch an einen nicht empfangsberechtigten Personenkreis versendet.</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 78px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4014</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 78px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Die Prüfung der Signatur der Nachricht hat ergeben, dass die Nachricht manipuliert wurde, um einem anderen Nutzer das Entschlüsseln der Nachricht mit einem Schlüssel, der nicht in seinem Besitz ist, zu ermöglichen.</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 78px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4015</span></td> 
    </tr> 
    <tr> 
     <td colspan="2" style="text-align: left;vertical-align: top;width: 498px;height: 20.3906px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Sonstige Fehlermeldungen</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Bei der Aktualisierung der PKCS#12-Datei ist ein Fehler aufgetreten</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4016</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 348.266px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Die KIM-Version des Clientmoduls ist kleiner als die im Verzeichnisdienst zu seinem Eintrag hinterlegte Version</td> 
     <td style="text-align: left;vertical-align: top;width: 138.734px;height: 39px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4017</span></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_826"> Die Fehlermeldungen beim Senden einer KIM-Mail werden über den Fachdienst zurück an den Sender übermittelt, da eine direkte Rückgabe der Fehlernachricht zum Client nicht vorgesehen ist.&nbsp;Das Clientmodul befüllt im Fehlerfall das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung</span>-Attribut und sendet dies anschließend über den Fachdienst an den Sender zurück. Die Fehlermeldungen beim Empfang einer KIM-Mail werden auf direkten Weg dem Empfänger zugestellt. Der Client (z. B. PVS) muss die Fehlercodes aus der Tabelle Tab_Fehlercodes_KOMLE-Clientmodule auswerten. </p>
  <p id="polarion_606"></p>
  <p id="polarion_537"> <span style="font-style: italic;">Hinweis: Sollten mehrere negative Ergebnisse auftreten, KANN das Mail-Header-Attribut X-KIM-Fehlermeldung mehrmals verwendet werden.</span> </p>
  <p id="polarion_540"> Beispiel:<br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung: 4001<br> X-KIM-Fehlermeldung: 4004<br> X-KIM-Fehlermeldung: X99</span> </p>
  <p id="polarion_594"></p>
  <p id="polarion_781">Die folgende Anforderung bezweckt, dass bei Einsatz mehrerer Clientmodule in unterschiedlichen Versionen, der KIM-Teilnehmer bei Verwendung eines Clientmoduls in einer kleineren Version darüber informiert wird, dieses zu updaten.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-126426">
   <p><b>A_21387-01</b></p>
   <p>Das KOM-LE-Clientmodul MUSS vor dem Versenden einer Nachricht die KOM-LE-Version des Absenders mittels des LDAP-Directory Attributs: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">komLeData</span> aus dem Verzeichnisdienst [<span style="font-size: 10pt;line-height: 1.5;">gemSpec_VZD#5</span>] abfragen. Ist die KOM-LE-Version des Clientmoduls&nbsp;kleiner als die im Verzeichnisdienst eingetragene, so MUSS das Clientmodul den Absender mit einer E-Mail darüber informieren. Aus dem Inhalt der E-Mail MUSS hervorgehen, dass die verwendete Clientmodul Version veraltet ist. Die E-Mail ist weder zu signieren noch zu verschlüsseln und entspricht <span style="font-size: 10pt;line-height: 1.5;">der Delivery Status Notification gemäß [RFC3461-3464]</span>. Ist die KOM-LE-Version des Clientmoduls größer als die im Verzeichnisdienst abgefragte Version MUSS das Clientmodul das LDAP-Directory Attribut: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">komLeData</span> für den Absender mit der neuen Versionen überschreiben. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125950">
   <p><b>A_22416</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Das KOM-LE Clientmodul MUSS beim Versenden einer E-Mail die Operation</span> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">getLimits</span> <span style="font-size: 10pt;line-height: 1.5;">am Account Manager aufrufen, um alle technischen Konfigurationsdaten eines Nutzers (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">dataTimeToLive</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">maxMailSize</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">quota</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">remainQuota</span>) zu erhalten. Das Clientmodul KANN für jeden Nutzer-Account die abgerufenen Daten 24 Stunden zwischenspeichern (cachen).</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125951">
   <p><b>A_22417</b></p>
   <p><span style="font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"></span><span style="font-size: 10pt;line-height: 1.5;">Das Clientmodul MUSS beim Versand-Vorgang der verschlüsselten Mail einen Header "Expires" in den Header der äußeren Nachricht aufnehmen. Der Wert ermittelt sich aus Versandzeitpunkt (TI-Zeit) + TTL</span> <span style="font-size: 10pt;line-height: 1.5;">(dataTimeToLive)&nbsp;als offset.</span> <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125699">
   <p><b>A_21388-01</b></p>
   <p>Das Clientmodul MUSS im Header Element <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-CMVersion</span> der äußeren Nachricht die VendorID, sowie die Produktversion des verwendeten Clientmoduls gemäß des Formates:<br> "[a-zA-Z0-9_]{1,5}_[0-9]{1,2}\.[0-9]{1,2}\.[0-9]{1,2}(-25[0-5]|-2[0-4][0-9]|-[0-1]?[0-9]?[0-9]){0,1}" eintragen.<br> <br> Zusätzlich MUSS das Clientmodul im Header Element <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-PTVersion</span> der äußeren Nachricht die Produkttypversion des Clientmoduls gemäß des Formates<span style="font-family: Arial, Helvetica;">:<br> </span> "[0-9]{1,2}\.[0-9]{1,2}\.[0-9]{1,2}(-25[0-5]|-2[0-4][0-9]|-[0-1]?[0-9]?[0-9]){0,1}"eintragen.<span style="font-family: Arial, Helvetica;"><br> <br> </span>Zusätzlich MUSS das Clientmodul im Header-Element&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-KONVersion</span>&nbsp;der äußeren Nachricht die Version des verwendeten Konnektors gemäß&nbsp;seiner&nbsp;Produktversion im Format "&lt;Productname&gt;&lt;ProductType&gt;&lt;ProductTypeVersion&gt;&lt;HWVersion&gt;&lt;FWVersion&gt;&nbsp;&nbsp;eintragen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_805"> <span style="font-weight: bold;">Beispiel:</span><br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-CMVersion: [VendorID]_2.1.2-8</span><br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-PTVersion: 1.5.0-2<br> X-KIM-KONVersion: &lt;secunet konnektor 2.0.0&gt;&lt;Konnektor PTV4Plus&gt;&lt;4.80.3&gt;&lt;2.0.0&gt;&lt;4.10.1&gt;</span> </p>
  <p id="polarion_784">Die Produkttypversion entspricht dabei der Produkttypversion aus dem Produkttypsteckbrief. Die Clientmodulversion entspricht dabei der zugelassenen Produktversion, die im TI-ITSM-System hinterlegt und gepflegt wird.</p>
  <p id="polarion_788"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-116869">
   <p><b>A_21389</b></p>
   <p>Der KIM-Anbieter MUSS der gematik auf Anfrage eine nicht-personenbezogene Gesamtübersicht, der sich im Feld befindenden aktiven KIM-Clientmodule, zur Verfügung stellen.<span style="background-color: #FFFF99;"></span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_533"></p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-103769">3.2 Umgang mit großen Client-Mails</h3>
  <p id="polarion_599">Dieses Kapitel beschreibt die Verarbeitung von Client-Mails, welche die Größe von 15 MiB überschreiten. Die Größenbeschränkung auf 15 MiB basiert auf Limitierungen der Konnektoroperationen zum Signieren und Verschlüsseln.</p>
  <p id="polarion_600"> Client-Mails mit einer Gesamtgröße bis zu 15 MiB werden entsprechend den Festlegungen in KOM-LE 1.0 behandelt. Übersteigt die Größe einer Client-Mail die 15-MiB-Grenze, wird die gesamte Client-Mail (E-Mail-Daten) durch das KOM-LE-Clientmodul auf einem Speicher des KOM-LE-Fachdienstes (KAS) abgelegt. Das KOM-LE-Clientmodul ersetzt die KOM-LE-Nachricht mit den Metadaten der auf dem KAS abgelegten E-Mail-Daten&nbsp;und versendet sie als signierte und verschlüsselte KOM-LE-Nachricht. Das&nbsp;KOM-LE-Clientmodul des Empfängers erkennt anhand der im Mail Header übergebenen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KOM-LE-Version</span>, dass es sich um eine KOM-LE 1.5 Nachricht handelt. Es nutzt die im Mail Body enthaltene Information, um die verschlüsselten E-Mail-Daten vom KOM-LE-Fachdienst (KAS) abzurufen, zu entschlüsseln und zu einer Client-Mail zusammenzufügen. </p>
  <p id="polarion_601"> In&nbsp;Kapitel "Schnittstelle I_Attachment_Services" gemäß&nbsp;[<span style="font-size: 10pt;line-height: 1.5;">gemSpec_FD_KOMLE</span>] wird der Umgang mit großen Client-Mails&nbsp;in einem Sequenzdiagramm erläutert. </p>
  <p id="polarion_473"></p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-103771">3.2.1 Senden von großen Client-Mails</h4>
  <p id="polarion_701"> <span style="font-size: 10pt;line-height: 1.5;">In diesem Kapitel werden Anforderungen an das Clientmodul formuliert, die es erlauben, Client-Mails von über 15 M<span style="font-style: normal;">i</span>B zu versenden.</span> </p>
  <p id="polarion_755"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-126427">
   <p><b>A_19355-01</b></p>
   <p>Das KOM-LE-Clientmodul MUSS die Größe der vom KOM-LE-Client erhaltenen Nachricht (gegen den Wert maxMailSize aus der Operation&nbsp;I_AccountLimit_Service::getLimits) prüfen. Im Fehlerfall wird dem KOM-LE-Client der Fehlercode&nbsp;X.3.4&nbsp;<span style="font-size: 10pt;line-height: 1.5;">[RFC3463] zurückgegeben.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134023">
   <p><b>A_19356-05</b></p>
   <p>Das KOM-LE-Clientmodul MUSS die vom Empfänger verwendete KOM-LE-Version prüfen. Das KOM-LE-Clientmodul MUSS dazu die KOM-LE-Version mittels des LDAP-Directory Attributs: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">komLeData</span> aus dem Verzeichnisdienst [<span style="font-size: 10pt;line-height: 1.5;">gemSpec_VZD#5</span>] abfragen. Ist das LDAP-Directory Attribut: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">komLeData</span> für den Empfänger undefiniert, dann muss ein KOM-LE-Clientmodul mit einer Version 1.0 angenommen werden.<span style="font-family: Arial, Helvetica;"><br> <br> </span> Wenn eine Client-Mail größer als 15 MiB an einen Empfänger mit KOM-LE-Version &lt; 1.5 versendet werden soll, MUSS das KOM-LE-Clientmodul diesen Empfänger aus der Mail entfernen.&nbsp;Beim Entfernen eines Empfängers MUSS das KOM-LE-Clientmodul den Absender mit einer E-Mail über den Fehlerfall informieren. Aus dem Inhalt der Fehlernachricht müssen alle aus der Mail entfernten Empfänger hervorgehen. Die Fehlernachricht ist weder zu signieren noch zu verschlüsseln&nbsp;und entspricht <span style="font-size: 10pt;line-height: 1.5;">der Delivery Status Notification gemäß [RFC3461-3464]</span>. Kann die Mail für keinen der Empfänger versendet werden, wird das Senden der Nachricht abgebrochen. Dabei wird dem MTA das RSET-Kommando gesendet und das Clientsystem wird mit dem SMTP-Antw<span style="font-size: 10pt;line-height: 1.5;">ortcode "451" über den Fehlerfall informiert.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125226">
   <p><b>A_22340</b></p>
   <p>Das Clientmodul MUSS das Cachen von KOM-LE-Versionen der Mail-Empfänger nach der Abfrage am VZD für eine maximale Zeitdauer von 24 Stunden unterstützen.<span style="background-color: #FFFF99;"><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133914">
   <p><b>A_19357-02</b></p>
   <p>Das KOM-LE-Clientmodul MUSS gewährleisten, dass die von einem Clientsystem übergebene Client-Mail vor der Übergabe an den Konnektor 15 MiB nicht überschreitet. Übersteigt die Größe einer Client-Mail die 15 MiB-Grenze MUSS das Clientmodul&nbsp;die gesamte Client-Mail verschlüsselt auf einem Speicher des KOM-LE-Fachdienstes (KAS) abgelegen und&nbsp;die Metadaten der auf dem KAS abgelegten Client-Mail in die zu versendende KOM-LE-Mail einbetten.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133922">
   <p><b>A_19358-01</b></p>
   <p>Das KOM-LE-Clientmodul MUSS für die Verschlüsselung der auf dem KAS abzulegenden E-Mail-Daten einen symmetrischen Schlüssel generieren. Hierbei MUSS das KOM-LE-Clientmodul die Kriterien gemäß [gemSpec_Krypt] einhalten.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_563"> <span style="font-style: italic;">Hinweis: Der Initialisierungsvektor muss vom Sender pro Nachricht zufällig erzeugt werden. Dieser wird nach Konvention dem Chiffrat (=&gt; ersten 12 Byte) vorangestellt: [IV + Chiffrat].</span> </p>
  <p id="polarion_602"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133924">
   <p><b>A_19364-02</b></p>
   <p>Das KOM-LE-Clientmodul MUSS das Ergebnis der Operation add_Attachment [<span style="font-size: 10pt;line-height: 1.5;">gemSpec_FD_KOMLE</span>] prüfen. Bei einem HTTP-Status 201 MUSS das KOM-LE-Clientmodul den zurückgelieferten Freigabelink&nbsp;in die KIM-Attachment-Datenstruktur im Mail-Body der zu versendenden KOM-LE-Nachricht aufnehmen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_603"></p>
  <p id="polarion_776">Mit der folgenden Anforderung wird sichergestellt, dass ein Client nicht bereits unerwünschten Kontent (über die Attachment Datenstruktur) in die an das Clientmodul übergebene KIM-Mail eingefügt hat.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125230">
   <p><b>A_22341</b></p>
   <p><span style="font-size: 10pt;color: #172B4D;line-height: 1.5;">Das KOM-LE-Clientmodul MUSS die vom KOM-LE-Client erhaltene Nachricht auf Vorhandensein von MIME konformen Content-Headern mit Content-Type: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain; charset=utf-8</span> sowie ein <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Content-Disposition: x-kas</span> prüfen. Ist mindestens ein derartiger Content-Header in der Nachricht enthalten, wird dem KOM-LE-Client der SMTP-Antwortcode 451</span> <span style="font-size: 10pt;color: #172B4D;line-height: 1.5;">zurückgegeben.</span><span style="font-size: 10pt;color: #172B4D;background-color: #FFFF99;line-height: 1.5;"><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133925">
   <p><b>A_19359-07</b></p>
   <p>Das KOM-LE-Clientmodul MUSS für die auf dem KAS abgelegten E-Mail-Daten folgende KIM-Attachment-Datenstruktur gemäß [Attachment_Schema] im Mail-Bod befüllen und als einziges Body-Element in den Mail-Body der vorverarbeiteten originalen Client-Mail durch den MIME-Part <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Content-Disposition: x-kas</span> ersetzen.<br> <br> <p data-keep-next="true" class="polarion-rte-caption-paragraph" id="polarion___1"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">1</span> KIM-Attachment-Datenstruktur </p> 
    <table id="polarion_wiki macro name=table;params=width=83.31%" class="polarion-Document-table" style="width: 83.31%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;"> 
     <tbody> 
      <tr> 
       <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 258px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Attribut in KIM-Attachment-Datenstruktur</th> 
       <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 347px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Wert</th> 
      </tr> 
      <tr> 
       <td style="width: 258px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">link</span></td> 
       <td style="width: 347px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Freigabelink der verschlüsselten E-Mail-Daten gemäß [A_19364]<br> </td> 
      </tr> 
      <tr> 
       <td style="width: 258px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">k</span></td> 
       <td style="width: 347px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">AES-GCM Key der E-Mail-Daten (symmetrischer Schlüssel) im Base64 Format&nbsp;<br> </td> 
      </tr> 
      <tr> 
       <td style="width: 258px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">hash</span></td> 
       <td style="width: 347px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Hashwert der E-Mail-Daten (entsprechend&nbsp;A_19644 [gemSpec_Krypt] zu bilden) im Base64 Format<br> </td> 
      </tr> 
      <tr> 
       <td style="width: 258px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">size</span></td> 
       <td style="width: 347px;height: 12px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Größe der E-Mail-Daten in Byte</td> 
      </tr> 
     </tbody> 
    </table> <br> Vor der KIM-Attachment-Datenstruktur MUSS ein MIME konformer Content Header mit <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Content-Type: text/plain</span>; <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">charset=utf-8</span>&nbsp;sowie ein <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Content-Disposition: x-kas</span> eingefügt werden.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_714"> <span style="font-style: italic;">Hinweis: Bei den E-Mail-Daten handelt es sich um die verschlüsselte Client-Mail die auf dem KAS abgelegt wurde und über den Freigabelink eindeutig zuordenbar ist. In der zu erzeugenden KOM-LE-Nachricht wird der Mail-Header der Client-Mail übernommen und der Mail-Body mit der KIM-Attachment-Datenstruktur ersetzt.</span> <span style="font-style: italic;">Das folgende Beispiel soll die Verarbeitung verdeutlichen:</span> </p>
  <p id="polarion_759"></p>
  <p id="polarion_555"> <span style="font-weight: normal;">Beispiel für eine Client-Mail mit zwei Anhängen die 15 MiB überschreitet:</span> </p>
  <p id="polarion_470"> <span style="font-style: normal;font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: "Sender" &lt;sender@maildomain.de&gt;<br> To: &lt;empfaenger@maildomain.de&gt;<br> </span><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Message-Id: &lt;II8HEDLEUEU4.EG0B98QUZNPM2@STST-TEST&gt;<span style="font-style: normal;"><br> Subject: Mail mit zwei Anhängen<br> </span>Mime-Version: 1.0</span> </p>
  <p id="polarion_74"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KIM-Dienstkennung: KIM-Mail;Default;V1.0<br> X-KIM-CMVersion: [VendorID]_2.1.2-8<br> X-KIM-PTVersion: 1.5.0-2<br> X-KIM-KONVersion: &lt;secunet konnektor 2.0.0&gt;&lt;Konnektor PTV4Plus&gt;&lt;4.80.3&gt;&lt;2.0.0&gt;&lt;4.10.1&gt;<br> X-KIM-Sendersystem: Beispiel-PVS;V2.81</span> </p>
  <p id="polarion_127"> <span style="font-style: normal;font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> <span style="font-size: 9pt;line-height: 1.5;"> Content-Type: multipart/mixed; boundary="body_part_boundary"</span></span> </p>
  <p id="polarion_745"> <span style="font-size: 10pt;font-family: Arial, Helvetica;line-height: 1.5;"> </span><span style="font-size: 9pt;line-height: 1.5;"><span style="font-family: Arial, Helvetica;"> </span><span style="font-style: normal;"><span style="font-family: Arial, Helvetica;"> </span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> --body_part_boundary<br> Content-Type: text/plain; charset=utf-8<br> Content-Transfer-Encoding: quoted-printable<br> Content-Disposition: inline</span><br> <br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Ein Dokument und eine Aufnahme im Anhang.</span><br> <br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">--body_part_boundary<br> Content-Type: application/msword; name="MR-2020-04-01-xyz.doc"<br> Content-Transfer-Encoding: base64<br> Content-Disposition: attachment; filename="MR-2020-04-01-xyz.doc"<br> <br> ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD<br> [Anhang gekürzt]<br> ABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCDABCD<br> ABCDABCDABCDABCDABCDABCDABCD==<br> <br> --body_part_boundary<br> Content-Type: image/jpeg; name="Roentgenbild-375632378.jpg"<br> Content-Transfer-Encoding: base64<br> Content-Disposition: attachment; filename="Roentgenbild-375632378.jpg"<br> <br> /9j/4AAQSkZJRgABAQEASSBIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEDAQEBAQEBAQEBAEEBAQEB<br> [Anhang gekürzt]<br> RAQFRBcwRD8H6y8B+voDMoSa1I4Md6+UMzwKVdT3W/fz4cotgwwoZDa1sbvrwU1QcEyNlI3KwKwZ<br> uiFj1Ka6BVAM2WU4rCh+xfXS1/p573//2Q==<br> <br> --body_part_boundary--</span></span></span><span style="font-size: 10pt;font-family: Arial, Helvetica;line-height: 1.5;"><br> </span> </p>
  <p id="polarion_22"></p>
  <p id="polarion_748">Die zu erzeugende KOM-LE-Nachricht mit der KIM-Atachment-Datenstruktur vor der Verarbeitung durch den Konnektor:</p>
  <p id="polarion_733"> <span style="font-style: normal;font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: "Sender" &lt;sender@maildomain.de&gt;<br> To: &lt;empfaenger@maildomain.de&gt;<br> Message-Id: &lt;II8HEDLEUEU4.EG0B98QUZNPM2@STST-TEST&gt;<br> Subject: Mail mit zwei Anhängen<br> Mime-Version: 1.0</span> </p>
  <p id="polarion_469"> <span style="font-style: normal;font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KIM-Dienstkennung: KIM-Mail;Default;V1.0<br> X-KIM-CMVersion: [VendorID]_2.1.2-8<br> X-KIM-PTVersion: 1.5.0-2<br> X-KIM-KONVersion: &lt;secunet konnektor 2.0.0&gt;&lt;Konnektor PTV4Plus&gt;&lt;4.80.3&gt;&lt;2.0.0&gt;&lt;4.10.1&gt;<br> X-KIM-Sendersystem: Beispiel-PVS;V2.81</span> </p>
  <p id="polarion_482"> <span style="font-style: normal;font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;"> Content-Type: text/plain; charset=utf-8<br> Content-Disposition: x-kas</span> </p>
  <p id="polarion_548"> <span style="font-style: normal;font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;"> &nbsp; {<br> &nbsp; &nbsp; "link":&nbsp; &nbsp; &nbsp;"HTTPS://KIM-FD1.telematik.de/CXFDTE82346dfzwr7634dfs76sd76sdtzq376e3tzsd",<br> &nbsp; &nbsp; "k": &nbsp; &nbsp; &nbsp;&nbsp; "RzVEY3M0MzkmNGZkc2RneCVoX2tkdFQlNXczZnZDdDM2ZGZ2eGZzJDYxITJndmR1VWpzKGk=",<br> &nbsp; &nbsp; "hash":&nbsp; &nbsp; &nbsp;"Z6A65Z2dasI2I00mM7uxtQjLsEwwl+WLMnDw8eLntaA=",<br> &nbsp; &nbsp; "size":&nbsp; &nbsp; &nbsp;25525700 <br> &nbsp; &nbsp;}<br> </span><span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;"> </span> </p>
  <p id="polarion_440"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133926">
   <p><b>A_19360-02</b></p>
   <p><span style="font-weight: normal;">Das KOM-LE-Clientmodul MUSS die E-Mail-Daten, welche auf dem KAS abgelegt werden, mit dem erzeugten symmetrischen Schlüssel gemäß <span style="font-size: 10pt;line-height: 1.5;">GS-A_5016&nbsp;</span>[gemSpec_Krypt] verschlüsseln.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-126428">
   <p><b>A_19361-01</b></p>
   <p><span style="font-weight: normal;">Das KOM-LE-Clientmodul MUSS mittels DNS Service Discovery den FQDN vom KIM Fachdienst und dessen zugehörigen KAS des Senders ermitteln.</span><br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_419"> Die für die Lokalisierung&nbsp; benötigten DNS Service-Records werden in der [gemSpec_FD_KOMLE] im Kapitel 3.4 Service Lokalisierung beschrieben.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104074">
   <p><b>A_19362</b></p>
   <p>Das KOM-LE-Clientmodul MUSS eine beidseitige gesicherte TLS-Verbindung zum KAS des Fachdienstes aufbauen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_160"> Der KAS ist ein Bestandteil des Fachdiensts. Deshalb gelten für die TLS-Verbindungen (inklusive genutzter Zertifikate) zum KAS ebenfalls die Festlegungen von Kap. 4.1.4.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134013">
   <p><b>A_19363-03</b></p>
   <p><span style="font-weight: normal;">Das KOM-LE-Clientmodul MUSS für die Übertragung von E-Mail-Daten, die vom KAS des Fachdienstes bereitgestellte Operation add_Attachment aufrufen.<br> <span style="text-decoration: line-through;"><br> </span> Im Fehlerfall MUSS das Clientmodul das Clientsystem mit dem SMTP-Antwortcode "451“ (gemäß [RFC3463]) benachrichtigen und den Versandt zum MTA mit dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">RSET</span>-Kommando abbrechen, da die Nachricht nicht übertragen werden konnte. Verarbeitungsschritte des&nbsp;Clientmoduls, welche die originale Nachricht betreffen (z. B. Anpassung Headerinformationen) MÜSSEN vor der Übertragung der originalen E-Mail-Daten zum KAS erfolgen.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134015">
   <p><b>A_19365-02</b></p>
   <p>Das KOM-LE-Clientmodul MUSS die KOM-LE-Nachricht, welche das Body-Element der KIM-Attachment-Datenstruktur beinhaltet, entsprechend den Festlegungen für Mails kleiner oder gleich 15 MiB senden. <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134016">
   <p><b>A_22419-01</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Wenn das Clientmodul bei der Übertragung von E-Mail-Daten einen Fehlercode 507 vom KAS erhält, MUSS es den Mailversand abbrechen und dem KOM-LE-Client den <span style="color: #000000;">SMTP-Fehlercode 521 gemäß [RFC3463]</span> zurückgeben und den Versandt zum MTA mit dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">RSET</span>-Kommando abbrechen.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134017">
   <p><b>A_22427-01</b></p>
   <p>Das KOM-LE-Clientmodul MUSS bei der Übertragung der E-Mail-Daten das HTTP-Header-Element&nbsp;"<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Content-Length</span>" immer mit der Gesamt-Länge des Request-Bodys befüllen.<br> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-103770">3.2.2 Empfangen von großen Client-Mails</h4>
  <p id="polarion_746">In diesem Kapitel werden Anforderungen an das Clientmodul formuliert, die es erlauben, große Client-Mails zu empfangen.</p>
  <p id="polarion_710"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104078">
   <p><b>A_19367</b></p>
   <p><span style="font-weight: bold;"> </span><span style="font-weight: normal;">Das KOM-LE-Clientmodul MUSS die E-Mail-Nachricht empfangen.<br> </span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_545"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104076">
   <p><b>A_19368</b></p>
   <p>Das KOM-LE-Clientmodul MUSS eine beidseitige gesicherte TLS-Verbindung &nbsp;zum KAS des Fachdienstes aufbauen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_604"> Die Anforderungen an die TLS Authentifizierung und die Zertifikate entsprechen den Anforderungen von dem Fachdienst.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134018">
   <p><b>A_19369-02</b></p>
   <p>Das KOM-LE-Clientmodul MUSS den Hash-Wert, den Freigabelink sowie den symmetrischen Schlüssel aus der KIM-Attachment-Datenstruktur, aus dem Body-Element der abgerufenen KOM-LE-Nachricht entnehmen. Das KOM-LE-Clientmodul DARF KOM-LE-Nachrichten NICHT verarbeiten, die mehr als eine&nbsp;KIM-Attachment-Datenstruktur gemäß [A_19359] beinhalten.<br> <br> Ist mehr als eine KIM-Attachment-Datenstruktur in der abgerufenen KOM-LE-Nachrichten enthalten, MUSS das Clientmodul den Nutzer über den Fehlerfall informieren. Hierfür MUSS das Clientmodul den Mail-Body der entschlüsselten originalen Nachricht durch den folgenden Inhalt "<span style="font-style: italic;">Nachricht konnte aufgrund uneindeutiger Informationen nicht abgerufen werden</span>" als&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit ersetzen.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134019">
   <p><b>A_19370-04</b></p>
   <p><span style="font-weight: normal;">Das KOM-LE-Clientmodul MUSS die E-Mail-Daten anhand des&nbsp;entnommenen Freigabelinks via der Operation read_Attachment am KAS des Fachdienstes herunterladen.<br> <br> <span style="color: #000000;">Wenn beim Herunterladen der E-Mail-Daten ein Fehler auftritt, dann MUSS das KOM-LE-Clientmodul die empfangene, dem KOM-LE-S/MIME-Profil entsprechende Nachricht, als eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> MIME-Einheit in einer neuen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> MIME-Nachricht dem Clientsystem übermitteln. Zusätzlich muss diese neue <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> MIME-Nachricht eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit mit dem Fehlertext [Tab_Fehlertext_Download] enthalten. Die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">orig-date</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">sender</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">reply-to</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">to</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cc</span> Header-Elemente der neuen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> Nachricht werden aus der empfangenen Nachricht übernommen. Das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">subject</span> Header-Element der neuen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> Nachricht erhält den Wert „<span style="font-style: italic;">Die E-Mail-Daten konnten nicht abgerufen werden</span>“.</span></span><br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_553"></p>
  <p id="polarion_740">Bei einer solchen Fehlernachricht gibt es folgende Optionen:</p>
  <ul id="polarion_743"> 
   <li>Wenn die empfangene Nachricht vom Server gelöscht wurde, hat der Nutzer die Möglichkeit, durch das Senden an die eigene E-Mail-Adresse und das anschließende Abholen die Verarbeitung zu wiederholen.</li> 
   <li>Wenn die empfangene Nachricht nicht vom Server gelöscht wurde, wird beim nächsten Abholen die Verarbeitung wiederholt.</li> 
  </ul>
  <p id="polarion_760">Tabelle "Tab_Fehlertext_Download Fehlertext beim Download von E-Mail-Daten"&nbsp;enthält den Fehlertext, der in die Nachricht eingeführt wird, wenn der Download von E-Mail-Daten nicht durchgeführt werden konnte.</p>
  <p id="polarion_773"></p>
  <p id="polarion_858"></p>
  <p id="polarion_859" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">2</span> Tab_Fehlertext_Download Fehlertext beim Download von E-Mail-Daten </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=860" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 358px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Bedingung</span><br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 389.2px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Fehlertext</span><br> </th> 
    </tr> 
    <tr> 
     <td style="width: 358px;height: 99.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">E-Mail-Daten konnten nicht heruntergeladen werden.<br> </td> 
     <td style="width: 389.2px;height: 99.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die E-Mail-Daten dieser Nachricht konnten nicht heruntergeladen werden. Bitte leiten Sie diese Nachricht nach einer angemessenen Zeit an Ihre eigene E-Mail-Adresse (&lt;Email Adresse&gt;) weiter. Beim nächsten Abholen wird der Download wiederholt.</span><br> </td> 
    </tr> 
    <tr> 
     <td style="width: 358px;height: 99.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">E-Mail-Daten konnten nicht entschlüsselt werden.</td> 
     <td style="width: 389.2px;height: 99.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Die E-Mail-Daten dieser Nachricht konnten nicht entschlüsselt werden, bitte kontaktieren Sie den Absender der Nachricht.</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_861"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134024">
   <p><b>A_22412-01</b></p>
   <p>Das Clientmodul MUSS bei Aufruf der Operation read_Attachment bei der Rückgabe des HTTP-Fehlercodes 429, das Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung</span> mit dem Wert gemäß Tabelle „Tab_Fehlercodes_KOMLE-Clientmodule“ <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">4013</span> in die empfangene KOM-LE-Nachricht befüllen.<br> <br> Ebenfalls MUSS das KOM-LE-Clientmodul die empfangene, dem KOM-LE-S/MIME-Profil entsprechende Nachricht, als eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> MIME-Einheit in einer neuen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> MIME-Nachricht dem Clientsystem übermitteln. Zusätzlich muss diese neue <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> MIME-Nachricht eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit mit dem Fehlertext gemäß der Tabelle "Tab_Fehlercodes_KOMLE-Clientmodule" enthalten. Die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">orig-date</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">sender</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">reply-to</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">to</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cc</span> Header-Elemente der neuen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> Nachricht werden aus der empfangenen Nachricht übernommen. Das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">subject</span> Header-Element der neuen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> Nachricht erhält den Wert „Die E-Mail-Daten konnten nicht abgerufen werden“.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_595"> Bei einer solchen Fehlernachricht gibt es folgende Optionen:<br> </p>
  <ul id="polarion_596"> 
   <li>&nbsp;Wenn die empfangene Nachricht vom Server gelöscht wurde, hat der Nutzer die Möglichkeit, durch das Senden an die eigene E-Mail-Adresse und das anschließende Abholen die Verarbeitung zu wiederholen.</li> 
   <li>Wenn die empfangene Nachricht nicht vom Server gelöscht wurde, wird beim nächsten Abholen die Verarbeitung wiederholt.</li> 
  </ul>
  <p id="polarion_597">Tabelle "Tab_Fehlercodes_KOMLE-Clientmodule" enthält den Fehlertext, der in die Nachricht eingefügt wird, wenn der Abruf von E-Mail-Daten zu häufig ausgeführt wurde.</p>
  <p id="polarion_598"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134020">
   <p><b>A_19371-04</b></p>
   <p><span style="color: #000000;">Das KOM-LE-Clientmodul MUSS die heruntergeladenen E-Mail-Daten mit dem symmetrischen Schlüssel entschlüsseln.<br> </span><br> Wenn beim Entschlüsseln der E-Mail-Daten ein Fehler auftritt,&nbsp;MUSS das KOM-LE-Clientmodul den Mail-Body der entschlüsselten originalen Nachricht durch den folgenden Inhalt "<span style="font-style: italic;">Abgerufene E-Mail-Daten konnten nicht entschlüsselt werden</span>" als <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit ersetzen. Zusätzlich MUSS das Clientmodul das Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung</span> mit dem Wert "4007" gemäß Tabelle „Tab_Fehlercodes_KOMLE-Clientmodule“ befüllen.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134021">
   <p><b>A_19372-03</b></p>
   <p><span style="font-weight: normal;">Das KOM-LE-Clientmodul MUSS den Hash-Wert der entschlüsselten E-Mail-Daten entsprechen</span>d [A_19644] b<span style="font-weight: normal;">ilden und mit dem Hash-Wert aus der abgerufenene KIM-Attachment-Datenstruktur vergleichen. Bei einer Nichtübereinstimmung MUSS das KOM-LE-Clientmodul den Mail-Body der entschlüsselten originalen Nachricht durch den folgenden Inhalt&nbsp;als <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit ersetzen und an den Empfänger weiterleiten:<br> "<span style="font-style: italic;">Beim Empfang dieser KIM-Nachricht wurde eine Sicherheitsverletzung erkannt. Dies kann eine technisches Ursache haben oder auf eine missbräuchliche Nutzung des KIM-Dienstes hinweisen. Zu Ihrem Schutz wurde der Inhalt dieser Nachricht durch diesen Text ausgetauscht. Bitte antworten Sie nicht auf diese Nachricht. Sie können diese Nachricht löschen. [+ optionaler Freitext der Anbieter]</span>".<br> </span> <span style="font-weight: normal;text-decoration: line-through;"><br> </span> <span style="font-weight: normal;">Zusätzlich MUSS das Clientmodul&nbsp;das Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Fehlermeldung</span> mit dem Wert 4012 gemäß Tabelle „Tab_Fehlercodes_KOMLE-Clientmodule“ befüllen.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134022">
   <p><b>A_19374-03</b></p>
   <p>Das KOM-LE-Clientmodul MUSS die vom KAS abgerufenen und entschlüsselten E-Mail-Daten, als originale Nachricht (Client-Mail) wiederherstellen und ergänzt um den Vermerk der erfolgreichen Verarbeitung (Entschlüsselung und Integritätsprüfung) an das Clientsystem übermitteln.<br> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16672">3.3 Senden von Nachrichten</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16673">3.3.1 Übersicht</h4>
  <p id="polarion_75">Beim Senden von KOM-LE-Nachrichten sorgt das Clientmodul dafür, dass die gesendeten KOM-LE-Nachrichten digital signiert und verschlüsselt dem&nbsp;MailTransfer Agent des KOM-LE-Fachdienstes (weiter im Text als MTA bezeichnet), bei dem der Sender registriert ist, übermittelt werden. Bei Client-Mails größer 15 MiB wird die Client-Mail symmetrisch verschlüsselt und auf dem KAS des Fachdienstes abgespeichert.</p>
  <p id="polarion_536">Abbildung 5 stellt die Interaktionen zwischen den am Senden von KOM-LE-Nachrichten beteiligten Komponenten dar. Aus der Sicht des Clientsystems agiert das Clientmodul als ein MTA und aus der Sicht des MTAs des Fachdienstes agiert das Clientmodul als MUA. Für Funktionen wie Datentransport, kryptographische Operationen und Kommunikation mit dem Verzeichnisdienst verwendet das Clientmodul entsprechende Dienste der TI-Plattform.</p>
  <p id="polarion_76" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image6.emf" style="width: 582px;max-width: 750px;height: 226px;"> </p>
  <p id="polarion_61" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">5</span>: Abb_Send_Msg Senden von Nachrichten </p>
  <p id="polarion_78">Beim Senden von Nachrichten findet die Kommunikation zwischen dem Clientsystem, dem Clientmodul und dem MTA über SMTP statt. Das Clientmodul fungiert als SMTP Proxy, der das Clientsystem mit dem MTA verbindet, die Integrität und Vertraulichkeit der vom Clientsystem gesendeten Nachricht schützt und die Nachricht an den MTA übermittelt.</p>
  <p id="polarion_79">Sobald die Nachricht komplett dem MTA übertragen wurde und der MTA das Ankommen der Nachricht bestätigt, übergibt das Clientmodul die Verantwortung für die Nachricht an den MTA. Die Übermittlung von Nachrichten zwischen MTAs ist nicht Bestandteil dieser Spezifikation.</p>
  <p id="polarion_80">Es liegt in der Verantwortung des Clientmoduls sicher zu stellen, dass die Nachricht erfolgreich dem MTA übertragen wird. Falls die Übermittlung einer Nachricht an den MTA fehlschlägt (z.B. bei Verbindungsaufbau mit dem MTA, Authentifizierung gegenüber dem MTA, Verschlüsselung oder Signieren der Nachricht), benachrichtigt das Clientmodul das Clientsystem unter Verwendung entsprechenden SMTP-Antwortcodes über den Fehler.</p>
  <p id="polarion_81"> <span style="text-decoration: underline;">Beispiel</span>: Verwendet das Clientsystem beim Senden von Nachrichten falsche Anmeldungsdaten, erhält es vom Clientmodul „535 5.7.8 Der Nutzer konnte nicht authentifiziert werden“ als Antwort auf sein AUTH-Kommando. </p>
  <p id="polarion_82">Das Verhalten des Clientmoduls beim Senden von Nachrichten wird mit Hilfe der in Abbildung 6 dargestellten Zustandsmuster beschrieben. Die im Dokument dargestellten Zustände haben nur illustrativen und keinen normativen Charakter. Die Umsetzung kann sich unterscheiden, solange das Ergebnis das Gleiche ist. Die den Zuständen zugeordnete Anforderungen sind normativ, können aber außerhalb des Kontexts dieser Zustände umgesetzt werden.</p>
  <p id="polarion_83" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image7.emf" style="width: 582px;max-width: 750px;height: 270px;"> </p>
  <p id="polarion_66" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">6</span>: Abb_State_CM_Send Zustände Clientmodul beim Senden von Nachrichten </p>
  <p id="polarion_85"></p>
  <p id="polarion_57">Das Clientmodul lauscht auf einem TCP Port und wartet bis ein Clientsystem mit ihm eine Verbindung aufbaut. Sobald dies passiert, geht das Clientmodul in den CONNECT-Zustand über und betrachtet die SMTP-Verbindung als geöffnet. Die Verbindung zwischen dem Clientsystem und dem Clientmodul muss mit TLS geschützt werden.</p>
  <p id="polarion_86">Im CONNECT-Zustand führt das Clientmodul einen SMTP-Dialog mit dem Clientsystem, in dem ihm die Anmeldedaten des Nutzers sowie die Adresse und die Portnummer des MTAs mitgeteilt werden. Sobald die Anmeldedaten und die Adresse des MTAs übermittelt sind, baut das Clientmodul eine über TLS geschützte SMTP-Verbindung mit dem MTA auf, authentifiziert sich und geht in den PROXY-Zustand über.</p>
  <p id="polarion_87">Im PROXY-Zustand leitet das Clientmodul SMTP-Kommandos und SMTP-Antwortcodes zwischen dem Clientsystem und dem MTA weiter, bis das Clientsystem mit dem DATA-Kommando die Übertragung einer Nachricht initiiert. Sobald das Clientsystem anfängt, Inhalte einer Nachricht zu übertragen, geht das Clientmodul in den PROCESS-Zustand über.</p>
  <p id="polarion_88">In PROCESS-Zustand wird die Nachricht entsprechend dem KOM-LE-S/MIME-Profile [gemSMIME_KOMLE] geschützt und anschließend an den MTA übermittelt. Sobald die Nachricht erfolgreich an den MTA übertragen wurde oder im Fehlerfall, geht das Clientmodul in den PROXY-Zustand zurück.</p>
  <p id="polarion_89">Nachdem die Verbindungen zwischen dem Clientsystem, dem Clientmodul und dem MTA aufgebaut wurden, übermittelt das Clientmodul die SMTP-Meldungen zwischen dem Clientsystem und dem MTA so lange die beiden Verbindungen bestehen.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16674">3.3.2 CONNECT-Zustand</h4>
  <p id="polarion_90">Sobald die TCP-Verbindung zwischen dem Clientsystem und dem Clientmodul aufgebaut ist, geht das Clientmodul in den CONNECT-Zustand über.</p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16675">3.3.2.1 Initialisierung</h5>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16676">
   <p><b>KOM-LE-A_2007</b></p>
   <p><p style="margin-left: 0px;"><span>Nachdem</span><span> die SMTP-Verbindung zwischen dem Clientsystem und dem Clientmodul aufgebaut ist, MUSS das Clientmodul dem Clientsystem die SMTP-Begrüßung senden. Um zu signalisieren, dass Extended SMTP unterstützt wird, muss die Begrüßung „ESMTP“ enthalten. </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_92"> Beispiel einer solchen Begrüßung: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">220 KOM-LE-Clientmodul E</span>SMTP </p>
  <p id="polarion_93">Das Clientmodul führt einen SMTP-Dialog mit dem Clientsystem bis zum Punkt, an dem das Clientsystem ihm die Adresse und die Portnummer des MTAs als einen Teil des während des Authentifizierungsverfahrens übertragenen Benutzernamens mitteilt (siehe Kapitel 3.2.2.2).</p>
  <p id="polarion_94">Tabelle Tab_SMTP_Ant_Init beschreibt Antworten, die das Clientmodul dem Clientsystem im CONNECT-Zustand sendet.</p>
  <p id="polarion_77" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">3</span>: Tab_SMTP_Ant_Init Antworten Clientmodul im CONNECT-Zustand </p>
  <table id="polarion_96" style="width: 100%;margin-left: 0px;margin-right: auto;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #E0E0E0;text-align: left;vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">SMTP-Kommando</span><br> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">(Clientsystem -&gt; Clientmodul)</span><br> </th> 
     <th style="background-color: #E0E0E0;text-align: left;vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">SMTP-Antwortcode</span><br> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">(Clientmodul -&gt; Clientsystem)</span><br> </th> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">HELO</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">“250 OK” Antwortcode</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">EHLO</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">“250 OK” Antwortcode mit folgenden EHLO Kennworten:</span><br> <span style="font-size: 10pt;line-height: 1.5;">SIZE &lt;size&gt;</span><br> <span style="font-size: 10pt;line-height: 1.5;">AUTH LOGIN PLAIN</span><br> <span style="font-size: 10pt;line-height: 1.5;">8BITMIME</span><br> <span style="font-size: 10pt;line-height: 1.5;">EN<span style="text-decoration: line-through;">C</span>HANCEDSTATUSCODES</span><br> <span style="font-size: 10pt;line-height: 1.5;">DSN</span><br> <span style="font-size: 10pt;line-height: 1.5;">und &lt;size&gt; gleich oder großer als 35882577</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">AUTH</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">Anmeldungsdaten erhalten und Verbindungsaufbau mit dem MTA beginnen (siehe Kapitel 3.2.2.2)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">RSET, NOOP</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">„250 OK“ Antwortcode</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">MAIL, RCPT, DATA</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">„530 5.7.0“ Antwortcode (Authentication required)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">QUIT</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">„221 OK“ Antwortcode senden und die Verbindung mit dem Clientsystem schließen</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 135pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">Andere Meldungen</span><br> </td> 
     <td style="vertical-align: top;width: 252pt;border: 1px solid #000000;border-top: 1px solid #000000;border-bottom: 1px solid #000000;border-right: 1px solid #000000;border-left: 1px solid #000000;"><span style="font-size: 10pt;line-height: 1.5;">„502&nbsp;&nbsp;5.5.1“ Antwortcode (Invalid command)</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_121"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16677">
   <p><b>KOM-LE-A_2008</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS, nachdem die SMTP</span><span>-</span><span>Verbindung zwischen dem Clientsystem und dem Clientmodul aufgebaut</span><span> wird und bis zum Punkt an dem das Clientsystem die Bestätigung des Erfolgs oder Misserfolgs seiner Authentifizierung erwartet, einen SMTP-Dialog entsprechend der Tabelle Tab_SMTP_Ant_Init mit dem Clientsystem führen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16678">3.3.2.2 Verbindungsaufbau mit MTA</h5>
  <p id="polarion_98">Das Clientmodul kann die Verbindung mit dem MTA nur dann aufbauen, wenn ihm das Clientsystem die Adresse des MTAs und die Portnummer des SMTP-Dienstes übermittelt. Das Clientmodul erwartet, dass ihm der Domain Name oder die IP-Adresse und die Portnummer während des Authentifizierungsverfahrens als Teil des Benutzernamens mitgeteilt werden.</p>
  <p id="polarion_99">Das Clientmodul führt das Authentifizierungsverfahren mit dem Clientsystem bis zu dem Punkt, an dem es mit dem entsprechenden Antwortcode die Authentifizierung akzeptieren oder ablehnen muss. Das Clientmodul allein kann das Clientsystem nicht authentifizieren. Die Authentizität der Zugangsdaten kann nur vom MTA überprüft werden. Dazu authentifiziert sich das Clientmodul im Auftrag vom Clientsystem gegenüber dem MTA.</p>
  <p id="polarion_100">Die MTA-Adresse und die Portnummer des SMTP-Dienstes sind als Teil des SMTP-Benutzernamens vom Clientsystem zu übergeben. Sie sind vom eigentlichen Benutzernamen durch das Zeichen ’#’ getrennt und als adresse:port String formatiert.</p>
  <p id="polarion_101">Um mit der SM-B über den Konnektor kommunizieren zu können, werden dem KOM-LE-Clientmodul ebenfalls als Teil des SMTP-Benutzernamens, die Parameter</p>
  <ul id="polarion_102"> 
   <li>MandantId,</li> 
   <li>ClientSystemId und</li> 
   <li>WorkplaceId</li> 
   <li>KonnektorId (optional)</li> 
  </ul>
  <p id="polarion_103">übergeben (siehe Kapitel 3.5 und [gemSpec_Kon] für Details zu MandantId, ClientSystemId und WorkplaceId). Der optionale Parameter KonnektorID, als Bestandteil des Aufrufkontext für SM-B, ermöglicht die Unterstützung von Multikonnektor-Umgebungen.&nbsp;Die Parameter entsprechen denen des aufrufenden Clients und werden voneinander durch das Zeichen ’#’ getrennt.</p>
  <p id="polarion_104">Der Aufbau des SMTP-Benutzernamens entspricht somit dem folgenden Muster&nbsp;und hat der den Parametern vorangestellten Nummer in der Reihenfolge zu entsprechen:</p>
  <p id="polarion_747"> [0] Benutzername<br> [1] &lt;Domain Adresse des SMTP-Servers&gt;:&lt;Port&gt;<br> [2] MandantId<br> [3] ClientsystemId<br> [4] WorkplaceId<br> — &lt;optional&gt; —<br> [5] KonnektorId<br> [...] </p>
  <p id="polarion_105" style="text-align: center;"> <br> <img src="attachments/18-screenshot-20210317-133403.png" style="width: 754px;height: 148px;"> </p>
  <p id="polarion_84" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">7</span>: Abb_MTA_Nutzername Format des SMTP- Benutzernamens </p>
  <p id="polarion_107"></p>
  <p id="polarion_71"> <span style="text-decoration: underline;">Beispiel</span>: </p>
  <p id="polarion_108">Bei folgenden Informationen</p>
  <ul id="polarion_109"> 
   <li>Benutzername des Clients = „erik.mustermann@hrst_domain.kim.telematik“,</li> 
   <li>Domain Adresse des MTAs = „hrst_domain.kim.telematik“ und Portnummer = 465,</li> 
   <li>MandantId = 1,</li> 
   <li>ClientsystemId = KOM_LE,</li> 
   <li>WorkplaceId = 7</li> 
   <li>KonnektorId = Konn_1</li> 
  </ul>
  <p id="polarion_110">erwartet das Clientmodul, dass das Clientsystem ihm folgenden SMTP-Benutzernamen als String überträgt:</p>
  <p id="polarion_111" style="text-align: center;"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:465#1#KOM_LE#7#Konn_1</span> </p>
  <p id="polarion_112"></p>
  <p id="polarion_787">Das KOM-LE-Clientmodul bricht die Kommunikation mit dem entsprechende SMTP-Antwortcode ab (siehe Tabelle Tab_SMTP_Verbindung), wenn der erhaltene SMTP-Benutzername nicht alle erforderlichen Parameter enthält. Beinhaltet der SMTP-Benutzername zusätzliche optionale durch ‚#’ abgegrenzte Parameter (z. B. #KonnektorId), dann müssen diese Parameter vom Clientmodul ausgewertet werden und der Sendevorgang wird fortgesetzt.</p>
  <p id="polarion_113">Für SMTP-Authentifizierung existieren sowohl Mechanismen für die Übertragung von Nutzername und Passwort im Klartext (PLAIN und LOGIN) als auch Challenge-Response-Mechanismen. Die auf Challenge-Response (DIGEST-MD5, CRAM-MD5, NTLM) basierenden Mechanismen machen das Extrahieren des Passworts aus der Challenge-basierten Response für das Clientmodul unmöglich. Deshalb werden für die SMTP-Authentifizierung nur die PLAIN oder LOGIN-Mechanismen verwendet.</p>
  <p id="polarion_114">Sobald das Clientmodul die Anmeldedaten des Nutzers erhält, extrahiert es die Adresse des MTAs und die Portnummer des SMTP-Dienstes aus dem Nutzernamen und baut damit&nbsp;&nbsp;die Verbindung zum MTA auf. Die Verbindung wird über TLS geschützt. Details zum Aufbau der TLS-Verbindung werden in Kapitel 4.1.3 beschrieben.</p>
  <p id="polarion_115">Tabelle Tab_SMTP_Verbindung enthält SMTP-Antwortcodes, die das Clientmodul dem Clientsystem bei einem Verbindungsaufbau mit dem MTA übermittelt.</p>
  <p id="polarion_116"></p>
  <p id="polarion_95" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">4</span>: Tab_SMTP_Verbindung SMTP-Antwortcodes für MTA-Verbindungsaufbau </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=1" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 427px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Bedingung</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 304px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">SMTP-Antwortcode</span><br> <span style="font-size: 10pt;line-height: 1.5;">(Clientmodul -&gt; Clientsystem)</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 427px;height: 37px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Das Clientmodul hat sich erfolgreich gegenüber dem MTA mit den vom Clientsystem erhaltenen Anmeldungsdaten authentifiziert.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 304px;height: 37px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">235 2.7.0 (Authentication successful)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 427px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Das Clientsystem verwendet für die SMTP-Authentifizierung einen anderen Mechanismus als PLAIN oder LOGIN.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 304px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">504 5.7.4 (Security features not supported)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 427px;height: 60px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die vom Clientsystem erhaltene SMTP-Authentifizierungsidentität ist nicht vollständig&nbsp;oder&nbsp; falsch formatiert (MTA-Adresse, MandantId, ClientSystemId, WorkplaceID&nbsp;oder Platzhalter fehlt – siehe Abbildung 6 "Abb_MTA_Nutzername Format des SMTP- Benutzernamens")</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 304px;height: 60px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">501 5.5.4 (Invalid command arguments)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 427px;height: 60px;border: 1px solid #CCCCCC;padding: 5px;">Bei Übergabe der Parameter für den Aufrufkontext für SM-B (MandantID, ClientSystemID oder WorkplaceID) antwortet der Konnektor mit einem SOAP Fault (Code: 4004 - 4006)</td> 
     <td style="text-align: left;vertical-align: top;width: 304px;height: 60px;border: 1px solid #CCCCCC;padding: 5px;">501 (Syntax error in parameters or arguments)</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 427px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Verbindung zwischen dem Clientmodul und dem MTA kann nicht aufgebaut werden.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 304px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">454 4.7.0 (Temporary authentication failure)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 427px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Authentifizierung gegenüber dem MTA schlägt fehl.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 304px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">535 5.7.8 (Authentication credentials invalid)</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_119"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-118331">
   <p><b>KOM-LE-A_2015-01</b></p>
   <p>Das Clientmodul MUSS das Clientsystem über das Ergebnis des Verbindungsaufbaus mit dem MTA mit den in Tabelle Tab_SMTP_Verbindung beschriebenen SMTP-Antwortcodes informieren. <b>&lt;=</b></p>
  </div>
  <p id="polarion_72">Die Verbindungen zwischen dem Clientsystem und dem Clientmodul sowie zwischen dem Clientmodul und dem MTA bleiben solange offen, bis eine von beiden geschlossen oder abgebrochen wird. Sobald eine der beiden Verbindungen geschlossen oder abgebrochen wird, übermittelt das Clientmodul die ausstehenden SMTP-Meldungen und schließt die andere Verbindung. Die SMTP-Sitzung wird damit für den MTA, das Clientsystem und das Clientmodul beendet.</p>
  <p id="polarion_120"> <span style="text-decoration: underline;">Beispiel</span>: Nachdem das Clientmodul das QUIT-Kommando vom Clientsystem erhalten und dem MTA übermittelt hat, bestätigt der MTA das Ankommen des Kommandos mit dem „221“ Antwortcode und schließt die Verbindung mit dem Clientmodul. Das Clientmodul übermittelt den „221“ Antwortcode dem Clientsystem und schließt die Verbindung mit dem Clientsystem.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16679">
   <p><b>KOM-LE-A_2009</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für </span><span>die</span><span> SMTP</span><span>-</span><span>Authentifizierung des Clientsystems </span><span>ausschließlich </span><span>die Serverteile der SASL</span><span>-</span><span>Mechanismen PLAIN und LOGIN unterstützen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16680">
   <p><b>KOM-LE-A_2010</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS den Benutzernamen, die MTA-Adresse, die zugehörige Port</span><span>nummer und den Kartena</span><span>ufrufkontext aus </span><span>dem </span><span>vom Clientsystem erhaltenen </span><span>SMTP-</span><span>Benutzernamen entsprechend Abbildung Abb_MTA_Nutzer_Name extrahieren.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117008">
   <p><b>A_21457</b></p>
   <p>Das Clientmodul MUSS, wenn der Parameter KonnektorId im erhaltenen SMTP-Benutzernamen erhalten ist, diesen extrahieren und auswerten, um während der SMTP-Verbindung, mit einem definierten Konnektor, Nachrichten weiterzuleiten.<span style="background-color: #FFFF99;"></span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_792">Der Parameter KonnektorId ist eine Referenz auf eine URI oder eine IP-Adresse eines Konnektors, um in einer Umgebung mit mehreren Konnektoren einen bestimmten Konnektor ansprechen zu können. Diese kann beispielweise in einer Konfigurations-Datei im Clientmodul hinterlegt sein.</p>
  <p id="polarion_820"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125263">
   <p><b>A_21519-02</b></p>
   <p>Das Clientmodul&nbsp;MUSS die übergebene SMTP-Benutzername-Zeichenkette auf Vollständigkeit überprüfen. Werden optionale Bestandteile des SMTP-Benutzernamens nicht genutzt, MUSS sichergestellt werden, dass später folgende optionale Bestandteile in ihrer vorgegebenen Position platziert werden. Als Platzhalter ist in so einem Fall "*" zu verwenden.&nbsp;Wenn die SMTP-Benutzername-Zeichenkette nicht vollständig ist, MUSS das Clientmodul den SMTP Fehlercode gemäß Tabelle "Tab_SMTP_Verbindung SMTP-Antwortcodes für MTA-Verbindungsaufbau" an das Clientsystem senden und den Vorgang abbrechen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_824"> <span style="font-weight: bold;">Beispiel einer vollständigen SMTP-Benutzername-Zeichenkette:</span> </p>
  <ul id="polarion_836"> 
   <li><span style="font-weight: normal;background-color: #FFFF99;"> </span><span style="font-weight: normal;">ohne optionale Bestandteile:</span></li> 
  </ul>
  <p id="polarion_795"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:465#1#KOM_LE#7</span> </p>
  <ul id="polarion_838"> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">KonnektorId </span>als optionaler Bestandteil<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">:</span></li> 
  </ul>
  <p id="polarion_833"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:465#1#KOM_LE#7#Konn_1</span> </p>
  <p id="polarion_834"> <br> Erfolgt die Einbindung von KIM in ein bestehendes Mail-System, kann ein übergebener Delimiter ":" zwischen dem Serveranteil und dem Port (z. B. <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">hrst_domain.kim.telematik:465</span>) des SMTP-Benutzernamens zu Fehlern bei der Interpretation im Bestandsystem führen. Es werden daher weitere Delimiter im Benutzernamen unterstützt, sofern die Funktionalität gemäß der Bestandsanforderungen zu den Benutzernamen, in semantischer Abgrenzung, uneingeschränkt erhalten bleiben. Es gilt, dass die Bestandteile des SMTP-Benutzernames in ihrem semantischen Bezug gemäß [RFC1123, RFC2822] einhalten müssen. </p>
  <p id="polarion_799"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16681">
   <p><b>KOM-LE-A_2011</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS</span><span> die MTA-</span><span>Adresse und die Portnummer</span><span>, die </span><span>aus</span><span> dem</span><span> vom Clientsystem erhaltenen </span><span>SMTP-</span><span>Benutzernamen</span><span> extrahiert wurden (siehe </span><span>Abbildung Abb_MTA_Nutzer_Name</span><span>), für den Verbindungsaufbau mit dem MTA verwenden</span><span>.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16682">
   <p><b>KOM-LE-A_2012</b></p>
   <p><p style="margin-left: 0px;"><span>Das</span><span> Clientmodul MUSS</span><span> den Benutzernamen, der </span><span>aus</span><span> dem</span><span> vom Clientsystem erhaltenen </span><span>SMTP-</span><span>Benutzernamen</span><span> extrahiert wurde (siehe </span><span>Abbildung Abb_MTA_Nutzer_Name</span><span>) sowie das vom Clientsystem erhaltene Passwort</span><span> </span><span>für die Authentisierung gegenüber den MTA verwenden.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16683">
   <p><b>KOM-LE-A_2013</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für </span><span>die</span><span> SMTP</span><span>-</span><span>Authentifizierung mit dem MTA </span><span>die </span><span>Clien</span><span>tt</span><span>eil</span><span>e</span><span> </span><span>der</span><span> der SASL</span><span>-</span><span>Mechanismen PLAIN und LOGIN unterstützen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16684">
   <p><b>KOM-LE-A_2014</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul KANN für </span><span>die</span><span> Authentifizierung </span><span>gegenüber</span><span> dem MTA andere Authentifizierungsmechanismen als PLAIN oder LOGIN benutzen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16686">
   <p><b>KOM-LE-A_2016</b></p>
   <p>Das Clientmodul MUSS die SMTP-Verbindung mit dem Clientsystem aufrechterhalten. Das Schließen der Verbindung ist nur bei folgenden Ausnahmen zulässig:<br> 
    <ul> 
     <li>Nachdem die Verbindung zwischen dem Clientmodul und dem MTA geschlossen oder abgebrochen wurde. In diesem Fall MUSS das Clientmodul die Verbindung mit dem Clientsystem schließen. Falls es vom MTA erhaltene und vom Clientsystem noch nicht übertragene SMTP-Antwortcodes gibt, MUSS das Clientmodul diese Antwortcodes an das Clientsystem weiterleiten und danach die Verbindung mit dem Clientsystem schließen.<br> </li> 
     <li>Wenn der MTA innerhalb eines konfigurierbaren Timeouts nicht auf ein SMTP-Kommando reagiert. In diesem Fall MUSS das Clientmodul den Antwortcode „421“ an das Clientsystem senden und anschließend die Verbindung schließen.<br> </li> 
     <li>Wenn die Verbindung zwischen dem Clientmodul und dem MTA noch nicht aufgebaut wurde und das Clientsystem das QUIT-Kommando übermittelt. In diesem Fall MUSS das Clientmodul mit „221 OK“ Antwortcode antworten und die Verbindung mit dem Clientsystem schließen.</li> 
    </ul> <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16687">
   <p><b>KOM-LE-A_2017</b></p>
   <p>Das Clientmodul MUSS die SMTP-Verbindung mit dem MTA aufrechterhalten. Das Schließen der Verbindung ist nur zulässig:<br> 
    <ul> 
     <li>Nachdem die Verbindung zwischen dem Clientmodul und dem Clientsystem geschlossen oder abgebrochen wird. In diesem Fall MUSS das Clientmodul die Verbindung mit dem MTA schließen. Falls es vom Clientsystem erhaltene und dem MTA noch nicht übertragene SMTP-Meldungen gibt, MUSS das Clientmodul diese Meldungen dem MTA übertragen, und nur danach die Verbindung mit dem MTA schließen.<br> </li> 
     <li>Wenn das Clientmodul innerhalb eines konfigurierbaren Timeouts keine neuen SMTP-Kommandos sendet. In diesem Fall MUSS das Clientmodul die Verbindung mit dem MTA schließen.</li> 
    </ul> <br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_130"> Nachdem sich das Clientsystem gegenüber dem MTA erfolgreich authentifiziert hat, geht das Clientmodul in den PROXY-Zustand über. Anderenfalls bleibt das Clientmodul im CONNECT-Zustand.<br> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16688">3.3.3 PROXY-Zustand</h4>
  <p id="polarion_131">Im PROXY-Zustand vermittelt das Clientmodul SMTP-Meldungen und Antwortcodes zwischen dem Clientsystem und dem MTA. Das Clientmodul bleibt in diesem Zustand bis das Clientmodul das DATA-Kommando bekommt und der MTA das Erhalten von diesem Kommando mit dem Antwortcode „354“ bestätigt. Das Clientmodul leitet den Antwortcode „354“ an das Clientsystem weiter und geht in den PROCESS-Zustand über.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16689">
   <p><b>KOM-LE-A_2018</b></p>
   <p><p style="margin-left: 0px;"><span>Nach erfolgreicher Beendigung des Authentifizierungsverfahrens mit dem MTA MUSS</span><span> </span><span>d</span><span>as</span><span> Clientmodul </span><span>alle</span><span> vom Clientsystem erhaltenen SMTP-Meldungen,</span><span> </span><span>mit Ausnahme des RCPT-Kommandos und der Inhalte von E-Mail-Nachrichten </span><span>(inklusive dem DATA-Kommando)</span><span> sowie alle vom MTA erhaltenen Antwortcodes ohne Veränderung dem MTA bzw. dem Clientsystem unverzüglich übermitteln.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16690">
   <p><b>KOM-LE-A_2176</b></p>
   <p>Das Clientmodul MUSS, wenn es vom Clientsystem ein RCPT TO:&lt;recipient-address&gt; Kommando erhält, prüfen, ob für den im Kommando aufgeführten Empfänger mindestens ein gültiges ENC-Zertifikat existiert. Da die Nachricht nur an Empfänger, die ein gültiges ENC-Zertifikat besitzen weitergeleitet werden darf, MUSS das Clientmodul im Negativfall das Kommando verwerfen&nbsp;und dem Clientsystem den Antwortcode „550“ senden . Im Positivfall MUSS das Clientmodul das Kommando an den MTA weiterleiten. <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16691">3.3.4 PROCESS-Zustand</h4>
  <p id="polarion_134">Im PROZESS-Zustand nimmt das Clientmodul die Inhalte der vom Clientsystem gesendeten Nachricht entgegen. Mit Hilfe von Diensten der TI-Plattform schützt es die Vertraulichkeit und Integrität der Nachricht entsprechend dem KOM-LE-S/MIME-Profil [gemSMIME_KOMLE]. Anschließend leitet das Clientmodul die geschützte Nachricht an den MTA, bei dem der Nutzer registriert ist, weiter. Im Erfolgsfall wird das Clientsystem über das Versenden der Nachricht informiert. Im Fehlerfall wird das Clientsystem mit dem entsprechenden Antwortcode über den Fehler benachrichtigt. Im folgenden Text wird eine entsprechend dem KOM-LE-S/MIME-Profil geschützte Nachricht auch als KOM-LE-S/MIME-Nachricht bezeichnet.</p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16692">3.3.4.1 Empfang und Weiterleitung einer Nachricht</h5>
  <p id="polarion_135">Nachdem die Bereitschaft zum Empfangen der Nachricht dem Clientsystem mit dem Antwortcode „354“ bestätigt wurde, erwartet das Clientmodul, dass das Clientsystem mit der Übertragung der Nachricht fortfährt. Die Inhalte der Nachricht werden im Clientmodul zwischengespeichert und sobald das Clientsystem durch die „&lt;CRLF&gt;.&lt;CRLF&gt;“ Zeichensequenz das Ende der Nachricht markiert, werden die Inhalte der Nachricht im Clientmodul durch digitale Signatur und die Verschlüsselung geschützt. Die Details werden im Kapitel 3.3.4.1.1 beschrieben.</p>
  <p id="polarion_136"> KOM-LE bietet die Möglichkeit Nachrichten, die beim Abholen nicht entschlüsselt wurden (z.B. auf Grund eines fehlenden HBA mit dem entsprechenden privaten Schlüssel), nachträglich zu entschlüsseln. Um die nachträgliche Entschlüsselung einer verschlüsselten KOM-LE-Nachricht durchführen zu können, schickt der Empfänger die verschlüsselte Nachricht als ein <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> Anhang in einer neuen Nachricht an seine eigene E-Mail-Adresse. Beim nächsten Abholvorgang kann diese Nachricht, sofern die erforderliche Karte vorhanden ist, durch das Clientmodul entschlüsselt werden. Werden solche Nachrichten im Clientmodul erkannt, werden sie weder signiert noch verschlüsselt. Stattdessen wird die verschlüsselte KOM-LE-Nachricht aus dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> Anhang extrahiert und die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span> Header-Elemente werden durch das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span> Header-Element (E-Mail-Adresse des Absenders) der angekommenen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart</span> MIME-Nachricht ersetzt. Anschließend wird die Nachricht dem MTA übermittelt. Die Details werden im Kapitel 3.3.4.1.2 beschrieben. </p>
  <p id="polarion_137">Die Benachrichtigung des Clientsystems über den Erfolg des Sendens einer Nachricht findet nur dann statt, wenn der MTA die Übernahme der Verantwortung für die Nachricht mit positiven Erledigungsstatus über den „250“ Antwortcode bestätigt. Ab diesem Moment gilt die Nachricht für das Clientsystem als versendet und der MTA hat sich zu ihrer Lieferung oder Benachrichtigung des Senders über einen Fehlerfall verpflichtet.</p>
  <p id="polarion_138">Nachdem das Clientsystem über das erfolgreiche Senden der Nachricht oder über einen Fehlerfall mit entsprechendem Antwortcode benachrichtigt wurde, löscht das Clientmodul die zwischengespeicherten Inhalte der Nachricht und geht zurück in den PROXY-Zustand.</p>
  <p id="polarion_866"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16693">
   <p><b>KOM-LE-A_2019</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS die vom Clientsystem erhaltene KOM-LE</span><span>-</span><span>Nachricht entsprechend dem</span><span> KOM-LE-S/MIME-Profil </span><span>[gemSMIME_KOMLE]</span><span> signieren und verschlüsseln und anschließend dem MTA übermitteln.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <h6 id="polarion_wiki macro name=module-workitem;params=id=ML-16694">3.3.4.1.1 Bearbeitung einer ungeschützten Nachricht</h6>
  <p id="polarion_140">Um die Vertraulichkeit und die Integrität einer Client-Mail&nbsp;zu schützen wird diese entsprechend dem KOM-LE-S/MIME-Profil signiert und verschlüsselt. Für das Signieren und die Verschlüsselung nutzt das Clientmodul die Dienste der TI-Plattform. Die folgende Abbildung stellt den prinzipiellen Ablauf und die Aktivitäten des Clientmoduls beim Erzeugen einer dem KOM-LE-S/MIME-Profil entsprechenden KOM-LE-Nachricht dar. Hierbei wird von einer Client-Mail Größe kleiner oder gleich 15 MiB ausgegangen.</p>
  <p id="polarion_141" style="text-align: center;"> <br> <img src="attachments/image9.jpeg" style="width: 582px;height: 403px;"> </p>
  <p id="polarion_106" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">8</span>: Abb_Sig_Verschl Signieren und Verschlüsseln entsprechend S/MIME Profil </p>
  <p id="polarion_143"></p>
  <p id="polarion_73">Für das digitale Signieren einer Nachricht verwendet das Clientmodul den privaten PrK.HCI.OSIG-Schlüssel der SM-B. Der Zugriff auf die entsprechende Karte und die Erstellung der Signatur erfolgt über die Aufrufe der entsprechenden Operationen der Außenschnittstelle des Konnektors. Eine detaillierte Beschreibung erfolgt im Kapitel 3.8.1.</p>
  <p id="polarion_144">Wenn das Signieren fehlschlägt, wird das Senden der Nachricht abgebrochen indem dem MTA das RSET-Kommando übermittelt wird und das Clientsystem mit dem Antwortcode „451“ inklusive der entsprechenden Fehlermeldung über den Fehlerfall informiert wird.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16695">
   <p><b>KOM-LE-A_2177</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für das Signieren und Verschlüsseln der Nachrichten die Operationen SignDocument und EncryptDocument der Außenschnittstelle des Konnektors verwenden. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-120812">
   <p><b>KOM-LE-A_2299-01</b></p>
   <p>Zur Signatur und Verschlüsselung von KOM-LE Nachrichten MUSS das folgende Vorgehen umgesetzt werden:<br> 
    <ol> 
     <li>Zur CMS(CAdES)-Signatur durch den Konnektor übergibt das KOM-LE-CM beim Aufruf der SignDocument-Operation am Konnektor das zu signierende Dokument als MimeType="text/plain; charset=utf-8 Dokument. Als Antwort gibt der Konnektors einen binären CMS-Container zurück. Zum Transport sind die binären Objekte in den SOAP-Nachrichten jeweils base64-kodiert.<br> </li> 
     <li>Der binäre CMS-Container mit der signierten Nachricht wird als „application/pkcs7-mime“ MIME-Einheit vom smime-type „signed-data“ mit dem Content-Transfer-Encoding „binary“ (nicht "base64") verpackt.<br> </li> 
     <li>Zur CMS-Verschlüsselung durch den Konnektor übergibt das KOM-LE-CM beim Aufruf der EncryptDocument-Operation am Konnektor die in Schritt zwei erzeugte Nachricht als binär-Dokument. Als Antwort gibt der Konnektors einen binären CMS-Kontainer zurück. Zum Transport sind die binären Objekte in den SOAP-Nachrichten jeweils base64-kodiert.<br> </li> 
     <li>Der aus der Verschlüsselung resultierende CMS-Container wird in eine „application/pkcs7-mime“ MIME-Einheit vom smime-type „authenticated-enveloped-data“ mit dem Content-Transfer-Encoding „base64“ verpackt.<br> </li> 
    </ol> <br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_753"> Ein Beispiel einer diesem Profil konformen Nachricht&nbsp;für den Aufbau des&nbsp;binären CMS-Container ist in [gemSMIME_KOMLE] enthalten. Insbesondere wird auf die Aufnahme des „Content Headers“ hingewiesen.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16697">
   <p><b>KOM-LE-A_2190</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das</span> <span>Clientmodul</span> <span>MUSS</span> <span>beim</span> <span></span><span>Aufruf</span> <span>der Operation</span> <span>SignDocument</span> <span>des</span> <span>Konnektors</span> <span>das recipient-emails</span> <span>Attribut</span> <span></span><span>als</span> <span></span><span>Aufrufparameter</span> <span>in der ASN.1-Form</span><span><br></span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">Attribute :</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">:= SEQUENCE {</span><span><br></span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">attrType</span> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">OBJECT IDENTIFIER,</span><span><br></span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">attrValues</span> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">SET OF</span> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">AttributeValue</span> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;font-size: 10pt;">}</span><span><br></span><span>übergeben</span><span>.</span> <span>Das ASN.1-Atribut MUSS DER-</span><span>kodiert</span> <span>und base64</span> <span>verpackt</span> <span></span><span>im</span> <span>Request-Element</span><span><br>&lt;SIG</span><span>:SignDocument</span><span>&gt;/&lt;SIG:SignRequest&gt;/&lt;SIG:OptionalInputs&gt;/&lt;dss:Properties&gt;/&lt;dss:SignedProperties&gt;/&lt;dss:Property&gt;/&lt;dss:Value&gt;/&lt;CMSAttribute&gt;</span><span><br></span><span>übergeben</span> <span></span><span>werden</span><span>.</span><span><br>​​</span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_148">Folgend ein Beispiel für den SOAP-Request beim Signieren:</p>
  <p id="polarion_149"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> </p>
  <p id="polarion_150"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;SIG:SignDocument xmlns:CERTCMN="http://ws.gematik.de/conn/CertificateServiceCommon/v2.0" xmlns:CONN="http://ws.gematik.de/conn/ConnectorCommon/v5.0" xmlns:CCTX="http://ws.gematik.de/conn/ConnectorContext/v2.0" xmlns:SIG="http://ws.gematik.de/conn/SignatureService/v7.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dss="urn:oasis:names:tc:dss:1.0:core:schema"&gt;</span> </p>
  <p id="polarion_151"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:CardHandle&gt;zDgq6V5EsA&lt;/CONN:CardHandle&gt;</span> </p>
  <p id="polarion_32"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp; &lt;SIG:Crypt&gt;RSA&lt;/SIG:Crypt&gt;</span> </p>
  <p id="polarion_152"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CCTX:Context&gt;</span> </p>
  <p id="polarion_153"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:MandantId&gt;Praxis Dr. Mustermann&lt;/CONN:MandantId&gt;</span> </p>
  <p id="polarion_154"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:ClientSystemId&gt;Mediakom-PVS-3000&lt;/CONN:ClientSystemId&gt;</span> </p>
  <p id="polarion_155"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:WorkplaceId&gt;Arztzimmer2&lt;/CONN:WorkplaceId&gt;</span> </p>
  <p id="polarion_156"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CCTX:Context&gt;</span> </p>
  <p id="polarion_157"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;SIG:TvMode&gt;NONE&lt;/SIG:TvMode&gt;</span> </p>
  <p id="polarion_158"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;SIG:SignRequest RequestID="SignRequestNo_001"&gt;</span> </p>
  <p id="polarion_159"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;SIG:OptionalInputs&gt;</span> </p>
  <p id="polarion_161"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:SignatureType&gt;urn:ietf:rfc:5652&lt;/dss:SignatureType&gt;</span> </p>
  <p id="polarion_162"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Properties&gt;</span> </p>
  <p id="polarion_163"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:SignedProperties&gt;</span> </p>
  <p id="polarion_164"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Property&gt;</span> </p>
  <p id="polarion_165"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Identifier&gt;RecipientEmailsAttribute&lt;/dss:Identifier&gt;</span> </p>
  <p id="polarion_166"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Value&gt;</span> </p>
  <p id="polarion_167"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;CMSAttribute&gt;QnNVakJzUjA5RWJHaGpaMGRUUVV4TlVqQnNSMDlFYkdoalowZFRRVXhOUVVGQlVRVU</span> </p>
  <p id="polarion_15"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">ZCVVVOQlJVMXRRMXAwZFUxR1VYaEVVemhp&lt;/CMSAttribute&gt;</span> </p>
  <p id="polarion_168"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/dss:Value&gt;</span> </p>
  <p id="polarion_169"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/dss:Property&gt;</span> </p>
  <p id="polarion_170"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/dss:SignedProperties&gt;</span> </p>
  <p id="polarion_171"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/dss:Properties&gt;</span> </p>
  <p id="polarion_172"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;SIG:IncludeEContent&gt;true&lt;/SIG:IncludeEContent&gt;</span> </p>
  <p id="polarion_173"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/SIG:OptionalInputs&gt;</span> </p>
  <p id="polarion_174"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;SIG:Document ShortText="none"&gt;</span> </p>
  <p id="polarion_175"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;dss:Base64Data&gt;TUlNRS1WZXJzaW9uOiAxLjANCkNvbnRlbnQtdHlwZTogdGV4dC9wbGFpbjsgY2hh</span> </p>
  <p id="polarion_16"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">cnNldD1pc28tODg1OS0xNQ0KQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogOGJpdA0KRnJvbTogPGhh</span> </p>
  <p id="polarion_17"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">bnMubXVzdGVyYXJ6dEBwcmF4aXNBLmRlPg0KVG86IDxldmEubXVzdGVyYXJ6dEBwcmF4aXNCLmRlPg0K</span> </p>
  <p id="polarion_18"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">U3ViamVjdDog3GJlcndlaXN1bmcgSHIuIE0uIFBhdGllbnRCDQpEYXRlOiBNb24sIDExIE5vdiAyMDEz</span> </p>
  <p id="polarion_19"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">IDE0OjM0OjI3ICswMTAwDQoNClNlaHIgZ2VlaHJ0ZSBGcmF1IEtvbGxlZ2luIERyLiBNdXN0ZXJhcnp0</span> </p>
  <p id="polarion_20"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">LA0KDQpoaWVybWl0IPxiZXJ3ZWlzZSBpY2ggSWhuZW4gSHIuIE0uIFBhdGllbnRCIGF1ZiBHcnVuZCAu</span> </p>
  <p id="polarion_21"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Li4uDQoNCk1pdCBmcmV1bmRsaWNoZW4gR3L832VuLA0KDQpEci4gSGFucyBNdXN0ZXJhcnp0&lt;/dss:Ba</span> </p>
  <p id="polarion_68"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">se64Data&gt;</span> </p>
  <p id="polarion_176"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/SIG:Document&gt;</span> </p>
  <p id="polarion_177"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;SIG:IncludeRevocationInfo&gt;false&lt;/SIG:IncludeRevocationInfo&gt;</span> </p>
  <p id="polarion_178"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/SIG:SignRequest&gt;</span> </p>
  <p id="polarion_179"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;/SIG:SignDocument&gt;</span> </p>
  <p id="polarion_29"> Da der Versand einer Nachricht an mehrere Empfänger erfolgen kann und das Clientmodul nicht erkennt, ob alle Empfänger ECC beherrschen, muss das Signieren einer Nachricht immer mit dem RSA-Schlüssel der SM-B erfolgen.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16698">
   <p><b>KOM-LE-A_2020</b></p>
   <p>Das Clientmodul MUSS für das Signieren einer KOM-LE-Nachricht den privaten Schlüssel PrK.HCI.OSIG.R2048 der SM-B der medizinischen Institution verwenden.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16699">
   <p><b>KOM-LE-A_2021</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS </span><span>dem MTA das Kommando RSET senden und </span><span>das Clientsystem mit </span><span>dem </span><span>Antwortcode </span><span>„</span><span>451</span><span>“</span><span> benachrichtigen</span><span>,</span><span> wenn das Clientmodul die vom Clientsystem erhaltene Nachricht nicht digital </span><span>s</span><span>ignieren kann.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_182"> Die Verschlüsselung erfolgt sowohl für den Sender als auch für alle Empfänger. Die erforderlichen Verschlüsselungszertifikate C.HCI.ENC für Institutionen und C.HP.ENC für Leistungserbringer werden im Verzeichnisdienst zur Verfügung gestellt. Für die Suche nach den passenden Einträgen im Verzeichnisdienst wird die KOM-LE-E-Mail-Adresse als Suchschlüssel verwendet. Wenn der Sender bzw. ein Empfänger mehrere Verschlüsslungszertifikate hat (z.B. wenn dem Empfänger ein neuer HBA&nbsp;&nbsp;ausgegeben wurde und der alte noch gültig ist), wird die Nachricht mit allen vorhandenen Verschlüsselungszertifikaten verschlüsselt.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16700">
   <p><b>KOM-LE-A_2191</b></p>
   <p>Das Clientmodul MUSS beim Aufruf der Operation EncryptDocument des Konnektors das recipient-emails Attribut als Aufrufparameter in der ASN.1-Form<br> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;Attribute ::= SEQUENCE {</span><br> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;attrType</span> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">OBJECT IDENTIFIER,</span><br> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;attrValues</span> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">SET OF</span> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">AttributeValue</span> <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">}</span><br> übergeben. Das ASN.1-Atribut MUSS DER-kodiert und base64 verpackt im Request-Element<br> &lt;CRYPT:EncryptDocument&gt;/&lt;CRYPT:OptionalInputs&gt;/&lt;CRYPT:UnprotectedProperties&gt;/&lt;dss:Property&gt;/&lt;dss:Value&gt;/&lt;CMSAttribulte&gt;<br> übergeben werden.<br> <br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_184">Folgend ein Beispiel für den SOAP-Request beim Verschlüsseln:</p>
  <p id="polarion_185" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span> </p>
  <p id="polarion_186" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;CRYPT:EncryptDocument xmlns:CONN="http://ws.gematik.de/conn/ConnectorCommon/v5.0" xmlns:CCTX="http://ws.gematik.de/conn/ConnectorContext/v2.0" xmlns:CRYPT="http://ws.gematik.de/conn/EncryptionService/v6.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dss="urn:oasis:names:tc:dss:1.0:core:schema"&gt;</span> </p>
  <p id="polarion_187" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CCTX:Context&gt;</span> </p>
  <p id="polarion_188" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:MandantId&gt;Praxis Dr. Mustermann&lt;/CONN:MandantId&gt;</span> </p>
  <p id="polarion_189" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:ClientSystemId&gt;Mediakom-PVS-3000&lt;/CONN:ClientSystemId&gt;</span> </p>
  <p id="polarion_190" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:WorkplaceId&gt;Arztzimmer2&lt;/CONN:WorkplaceId&gt;</span> </p>
  <p id="polarion_191" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CCTX:Context&gt;</span> </p>
  <p id="polarion_192" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CRYPT:RecipientKeys&gt;</span> </p>
  <p id="polarion_193" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CRYPT:CertificateOnCard&gt;</span> </p>
  <p id="polarion_194" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:CardHandle&gt;zDgq6V5EsA&lt;/CONN:CardHandle&gt;</span> </p>
  <p id="polarion_195" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CRYPT:Crypt&gt; ECC &lt;/CRYPT:KeyReference&gt;</span> </p>
  <p id="polarion_196" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CRYPT:CertificateOnCard&gt; &lt;CRYPT:Certificate&gt;UjBsR09EbGhjZ0dTQUxNQUFBUUNBRU1tQ1p0dU1GUXhEUzhi&lt;/CRYPT:Certificate&gt;</span> </p>
  <p id="polarion_197" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CRYPT:RecipientKeys&gt;</span> </p>
  <p id="polarion_198" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CONN:Document&gt;</span> </p>
  <p id="polarion_199" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;dss:Base64Data&gt;QnNVakJzUjA5RWJHaGpaMGRUUVV4TlVqQnNSMDlFYkdoalowZFRRVXhOUV</span> </p>
  <p id="polarion_69" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">VGQlVRVUZCVVVOQlJVMXRRMXAwZFUxR1VYaEVVemhp&lt;/dss:Base64Data&gt;</span> </p>
  <p id="polarion_200" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CONN:Document&gt;</span> </p>
  <p id="polarion_201" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CRYPT:OptionalInputs&gt;</span> </p>
  <p id="polarion_202" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CRYPT:EncryptionType&gt;urn:ietf:rfc:5652&lt;/CRYPT:EncryptionType&gt;</span> </p>
  <p id="polarion_203" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;CRYPT:UnprotectedProperties&gt;</span> </p>
  <p id="polarion_204" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Property&gt;</span> </p>
  <p id="polarion_205" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Identifier&gt;RecipientEmailsAttribute&lt;/dss:Identifier&gt;</span> </p>
  <p id="polarion_206" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;dss:Value&gt;</span> </p>
  <p id="polarion_207" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;CMSAttribute&gt;QnNVakJzUjA5RWJHaGpaMGRUUVV4TlVqQnNSMDlFYkdoalowZFRRVXhOUVVG</span> </p>
  <p id="polarion_70" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">QlVRVUZCVVVOQlJVMXRRMXAwZFUxR1VYaEVVemhp&lt;/CMSAttribute&gt;</span> </p>
  <p id="polarion_208" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/dss:Value&gt;</span> </p>
  <p id="polarion_209" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/dss:Property&gt;</span> </p>
  <p id="polarion_210" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CRYPT:UnprotectedProperties&gt;</span> </p>
  <p id="polarion_211" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&nbsp;&nbsp;&lt;/CRYPT:OptionalInputs&gt;</span> </p>
  <p id="polarion_212" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;/CRYPT:EncryptDocument&gt;</span> </p>
  <p id="polarion_30"> Zum Verschlüsseln der Nachricht bezieht das Clientmodul die erforderlichen Zertifikate aus dem Verzeichnisdienst der TI. Vor der Verwendung der Zertifikate für die Verschlüsselung muss das Clientmodul prüfen, ob der verwendete Konnektor die ECC-Kryptographie unterstützt. Ist dies nicht der Fall, dürfen im Verzeichnisdienst gefundene ECC-Zertifikate nicht für die Verschlüsselung benutzt werden. Unterstützt der Konnektor ECC, sind sowohl die RSA- als auch die ECC-Zertifikate für die Verschlüsselung zu verwenden. Durch diese Herangehensweise wird sichergestellt, dass auch Empfänger, die noch kein ECC beherrschen, die Nachricht entschlüsseln können. Dieses Prinzip gilt solange, bis alle TI-Beteiligten ECC beherrschen und somit die RSA-Zertifikate gesperrt sind.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-93849">
   <p><b>A_17464</b></p>
   <p>Das Clientmodul MUSS über eine Abfrage des Dienstverzeichnisdienstes des Konnektors prüfen, ob der verwendete Konnektor ECC-Kryptographie unterstützt. Ein Konnektor unterstützt ECC, wenn die Konnektordienstversionen des Signaturdienstes mindestens 7.4.1 und des Verschlüsselungsdienstes mindestens 6.1.1&nbsp;sind. <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16701">
   <p><b>KOM-LE-A_2022</b></p>
   <p>Das Clientmodul MUSS vom Clientsystem erhaltene E-Mail-Nachrichten sowohl für jeden in den RCPT-Kommandos angegeben Empfänger als auch für den Sender aus dem <span style="font-size: 11pt;font-family: 'Courier New', Courier, monospace;line-height: 1.5;">from</span> bzw. <span style="font-size: 11pt;font-family: 'Courier New', Courier, monospace;line-height: 1.5;">sender</span> Header-Element der Nachricht mit allen dem Sender bzw. Empfängern zugeordneten Verschlüsselungszertifikaten (C.HCI.ENC für eine Institution oder C.HP.ENC für einen Leistungserbringer) verschlüsseln. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-93857">
   <p><b>A_17472</b></p>
   <p>Verwendet das Clientmodul einen Konnektor, der die ECC-Kryptographie nicht unterstützt, DARF das Clientmodul ECC-Verschlüsselungszertifikate NICHT für die Verschlüsselung der Nachricht verwenden.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16702">
   <p><b>KOM-LE-A_2178</b></p>
   <p><p style="margin-left: 0px;"><span>Existieren für einen Empfänger mehrere Verschlüsselungszertifikate mit unterschiedlichen Telematik-IDs DARF das Clientmodul die Nachricht NICHT an diesen Empfänger versenden. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125683">
   <p><b>KOM-LE-A_2192-01</b></p>
   <p>Existieren für einen Empfänger mehrere Verschlüsselungszertifikate mit unterschiedlichen Telematik-IDs MUSS das Clientmodul den Absender der Nachricht mit einer Fehlernachricht<span style="text-decoration: line-through;"></span> informieren. Die Fehlernachricht ist weder zu signieren&nbsp;noch zu verschlüsseln&nbsp;und entspricht der Delivery Status Notification gemäß [RFC3461-3464].<span style="background-color: #FFFF99;"><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16704">
   <p><b>KOM-LE-A_2023</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS in der Lage sein</span><span>,</span><span> die Verschlüsselungszertifikate aus de</span><span>m</span><span> Verzeic</span><span>hnisdienst</span><span> </span><span>der TI mit Hilfe der E-Mail-Adresse zu ermitteln</span><span>. </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_217"> Nachdem die Nachricht erfolgreich signiert wurde und die entsprechenden Verschlüsselungszertifikate zur Verfügung stehen, führt das Clientmodul die Verschlüsselung der Nachricht für alle Empfänger bzw. Sender durch. Die Empfänger werden über die E-Mail-Adressen aus den RCPT-Kommandos identifiziert. Die Sender werden über die E-Mail-Adressen im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">sender</span> Header-Element identifiziert. Wenn der Header der Nachricht kein <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">sender</span> Element enthält, werden die E-Mail-Adressen des Senders aus dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span> Header-Element übernommen. </p>
  <p id="polarion_218">Beim Verschlüsselungsvorgang sind die folgenden Szenarien möglich:</p>
  <ul id="polarion_219"> 
   <li>Die Nachricht kann für alle E-Mail-Adressen (sowohl Sender als auch Empfänger) verschlüsselt werden.</li> 
   <li>Es gibt E-Mail-Adressen, für die aufgrund der fehlenden oder nicht gültigen Zertifikate die Nachricht nicht verschlüsselt werden kann. In diesem Fall wird die Nachricht mit den verfügbaren Zertifikaten verschlüsselt und an den MTA übermittelt. Die E-Mail-Adressen für die die Verschlüsselung nicht durchgeführt werden konnte werden aus dem Header entfernt. Der Absender der Nachricht wird über eine im Clientmodul generierte und an den MTA übermittelte E-Mail über den Fehlerfall informiert. Die Nachricht mit der Fehlermeldung wird weder signiert noch verschlüsselt.</li> 
   <li>Wenn die Verschlüsselung für keinen der Empfänger durchgeführt werden kann, wird das Senden der Nachricht abgebrochen. Dabei wird dem MTA das RSET-Kommando gesendet und das Clientsystem wird mit dem Antwortcode „451“ und der entsprechenden Fehlermeldung über den Fehlerfall informiert.</li> 
  </ul>
  <p id="polarion_220"> Die Verschlüsselung erfolgt über die Aufrufe der entsprechenden Operationen der Außenschnittstelle des Konnektors. Eine detaillierte Beschreibung erfolgt in Kapitel 3.5.3.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125685">
   <p><b>KOM-LE-A_2024-01</b></p>
   <p>Kann eine Nachricht auf Grund von fehlenden oder ungültigen Zertifikaten nicht für alle Empfänger verschlüsselt werden, MUSS das Clientmodul den Absender mit einer E-Mail über den Fehlerfall informieren. Aus dem Inhalt der Fehlernachricht müssen alle Empfänger, für die nicht verschlüsselt werden konnte, hervorgehen. Die Fehlernachricht ist weder zu signieren noch zu verschlüsseln und entspricht der Delivery Status Notification gemäß [RFC3461-3464]. Die Originalnachricht darf an die Empfänger, für die nicht verschlüsselt werden konnte, nicht versendet werden. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16706">
   <p><b>KOM-LE-A_2025</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS das Clientsystem mit </span><span>dem </span><span>Antwortcode </span><span>„</span><span>451</span><span>“</span><span> benachrichtigen und den Senden-Vorgang </span><span>zum</span><span> MTA mit </span><span>dem RSET-</span><span>Kommando abbrechen, wenn das Clientmodul die vom Clientsystem erhaltene Nachricht für keinen Empfänger verschlüsseln kann</span><span>.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_223"> Das KOM-LE-S/MIME-Profil fordert, dass jede entsprechend dem Profil verschlüsselte Nachricht das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attribut enthält. In diesem Attribut werden&nbsp;&nbsp;Zusammenhänge zwischen den für die Verschlüsselung verwendeten Zertifikaten und den E-Mail-Adressen der Empfänger bzw. des Senders angegeben. Das Clientmodul befüllt dieses Attribut nur mit den E-Mail-Adressen für die die Nachricht erfolgreich verschlüsselt werden konnte. </p>
  <p id="polarion_224"> Um die Anzahl von Anfragen an den Verzeichnisdienst und die Bearbeitungszeiten zu reduzieren werden die für die Verschlüsselung verwendeten Zertifikate für eine konfigurierbare Zeitdauer im Clientmodul gecached.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16707">
   <p><b>KOM-LE-A_2026</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS das </span><span>manipulationssichere </span><span>Cachen von Verschlüsselungszertifikaten </span><span>für eine konfigurierbare Zeitdauer </span><span>unterstützen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_226">Die folgenden Schritte stellen den Schutzvorgang für eine Nachricht im Clientmodul dar. Die Schritte haben einen beschreibenden und nicht normativen Charakter. Die Umsetzung kann sich unterscheiden, solange die Anforderungen des Dokuments erfüllt sind.</p>
  <ol id="polarion_227"> 
   <li>Der Cache und anschließend falls erforderlich der Verzeichnisdienst werden für Verschlüsselungszertifikate der Empfänger und Sender durchgesucht. Die entsprechenden E-Mail-Adressen dienen als die Suchschlüssel.</li> 
   <li>Der Signaturdienst der TI-Plattform wird mit der zu sendenden Nachricht und der Referenz auf den Signaturschlüssel als Aufrufparameter aufgerufen.</li> 
   <li>Der Verschlüsselungsdienst der TI-Plattform wird mit der signierten Nachricht und den gefundenen Verschlüsselungszertifikaten als Aufrufparameter aufgerufen.</li> 
   <li>Die TI-Plattform prüft den Sperrstatus der übergebenen Verschlüsselungszertifikate und führt die Verschlüsselung durch, wenn alle Zertifikate gültig sind. Sollte die Prüfung eines oder mehrere Zertifikate als nicht gültig ausweisen, bricht die TI-Plattform den Verschlüsselungsvorgang ab. Falls sich unter den ungültigen Zertifikaten die aus dem Cache geholten Zertifikate befinden, wird der Verzeichnisdienst nach Ersatzzertifikaten durchsucht.</li> 
  </ol>
  <ol id="polarion_117"> 
   <li>Falls Ersatzzertifikate gefunden werden, wird der Verschlüsselungsvorgang wiederholt.</li> 
   <li>Werden keine Ersatzzertifikate gefunden, werden diesen Zertifikaten entsprechende Empfänger aus dem Header der Nachricht entfernt und über den Fehlerfall mit Hilfe einer im Clientmodul generierten E-Mail informiert. Die ursprüngliche Nachricht wird an diese Empfänger nicht gesendet, weil sie nicht in der Lage sind, diese Nachricht zu entschlüsseln.</li> 
  </ol>
  <p id="polarion_754">Abbildung 9 stellt die oben beschriebenen Schritte als Aktivitätsdiagramm dar.</p>
  <p id="polarion_228" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image10.emf" style="width: 582px;max-width: 750px;height: 813px;"> </p>
  <p id="polarion_142" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">9</span>: Abb_Verschl_Msg Verschlüsselung einer Nachricht </p>
  <p id="polarion_230"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134044">
   <p><b>A_23174</b></p>
   <p>Das Clientmodul MUSS sicherstellen, dass nur die vom Clientsystem an das Clientmodul übergebenen E-Mail-Adressen die zuvor im SMTP-Kommando <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">RCPT TO</span> gemäß [KOM-LE-A_2176] geprüft wurden, im Mail Header <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">to</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cc</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">bcc</span> in der KOM-LE-Nachricht verbleiben.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16708">
   <p><b>KOM-LE-A_2027</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das Clientmodul MUSS für die E-Mail-Adressen</span><span>,</span> <span>für die die Nachricht erfolgreich verschlüsselt werden konnte</span><span>,</span> <span>einen Wert in das</span> <span>recipient</span><span>-emails Attribut entsprechend dem KOM-LE-S/MIME-Profil einfügen.</span><span><br>​​</span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16709">
   <p><b>KOM-LE-A_2028</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS die Empfänger bzw. Sender</span><span> </span><span>für die die Verschlüsselung der Nachricht nicht durchgeführt werden konnte, aus </span><span>to</span><span>, </span><span>cc</span><span> </span><span>bzw. </span><span>from</span><span>,</span><span> sender</span><span> Header-Elementen der Nachricht entfernen, um sicher</span><span>zu</span><span>stellen, dass die ursprüngliche Nachricht nicht an solche Empfänger gesendet wird.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_233"> Nachdem die Verschlüsselung durchgeführt wurde, verpackt das Clientmodul das vom Konnektor verschlüsselte CMS-Objekt in eine äußere Nachricht entsprechend KOM-LE-S/MIME-Profil und überträgt die geschützte Nachricht an den MTA.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16710">
   <p><b>KOM-LE-A_2193</b></p>
   <p>Das Clientmodul MUSS das signierte und verschlüsselte CMS-Objekt in eine äußere Nachricht entsprechend den Anforderungen KOM-LE-A_2097, KOM-LE-A_2098, KOM-LE-A_2099, KOM-LE-A_2100, KOM-LE-A_2101, KOM-LE-A_2102 des KOM-LE S/MIME Profils verpacken. <br> <b>&lt;=</b></p>
  </div>
  <h6 id="polarion_wiki macro name=module-workitem;params=id=ML-16711">3.3.4.1.2 Bearbeitung einer geschützten KOM-LE-Nachricht</h6>
  <p id="polarion_235"> Wenn während eines Abholvorgangs eine KOM-LE-Nachricht nicht im Clientmodul entschlüsselt werden konnte, wird sie dem Clientsystem als eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> Einheit mit einem Fehlertext geliefert (siehe das Beispiel im Kapitel 3.3.4.1.2). Um die Nachricht im Anhang nachträglich zu entschlüsseln und ihre Signatur prüfen zu können, muss der Nutzer die erhaltene Nachricht an seine eigene E-Mail-Adresse senden. Beim nächsten Abholvorgang wird diese Nachricht dann nochmalig im Clientmodul aufbereitet.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16712">
   <p><b>KOM-LE-A_2029</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das Clientmodul MUSS die vom Clientsystem empfangene Nachricht, deren Body eine</span> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/rfc822</span> <span>MIME Einheit mit einer dem KOM-LE-Profil entsprechenden Nachricht (KOM-LE-S/MIME-Nachricht) enthält, in den folgenden Schritten aufbereiten:</span></p>
    <ol>
     <li><p><span>Die in</span> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/rfc822</span> <span>Einheit enthaltene KOM-LE-S/MIME-Nachricht wird aus der erhaltenen Nachricht extrahiert und dem MTA übergeben.</span></p></li>
     <li><p><span>Die vom Clientsystem erhaltene Nachricht wird verworfen.</span></p></li>
    </ol><p><br></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_237"></p>
  <p id="polarion_238">Beispiel für die oben beschriebene Transformation:</p>
  <p id="polarion_239"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">MIME-Version: 1.0</span> </p>
  <p id="polarion_240"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: multipart/mixed; boundary="unique-boundary-1"</span> </p>
  <p id="polarion_241"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Subject: WG: Signed and encrypted in attachment</span> </p>
  <p id="polarion_242"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Date: Fri, 10 Feb 2012 14:29:21 +0100</span> </p>
  <p id="polarion_243"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: musterfrau@komle.de</span> </p>
  <p id="polarion_244"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">To: musterfrau@komle.de</span> </p>
  <p id="polarion_245"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KIM-Dienstkennung: KIM-Mail;Default;V1.0<br> X-KIM-Sendersystem: Beispiel-PVS;V2.81</span> </p>
  <p id="polarion_246"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">This is a multi-part message in MIME format.</span> </p>
  <p id="polarion_247"></p>
  <p id="polarion_248"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_249"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: text/plain;&nbsp;&nbsp;&nbsp;&nbsp;charset="iso-8859-1"</span> </p>
  <p id="polarion_250"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: quoted-printable</span> </p>
  <p id="polarion_251"></p>
  <p id="polarion_252"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Der f=FCr die Entschl=FCsselung der Nachricht ben=F6tigte Schl=FCssel =</span> </p>
  <p id="polarion_253"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">wurde nicht gefunden. =DCberpr=FCfen Sie ob die entsprechende Karte =</span> </p>
  <p id="polarion_254"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">gesteckt ist und leiten Sie diese Nachricht an Ihre eigene Email Adresse =</span> </p>
  <p id="polarion_255"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">(musterfrau@komle.de) weiter. Beim n=E4chsten Abholen der Nachricht =</span> </p>
  <p id="polarion_256"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">wird der Entschl=FCsselungsvorgang wiederholt.</span> </p>
  <p id="polarion_257"></p>
  <p id="polarion_258"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_259"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: message/rfc822&nbsp;&nbsp;&nbsp;&nbsp;</span> </p>
  <p id="polarion_260"></p>
  <p id="polarion_261"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KOM-LE-Version: 1.0</span> </p>
  <p id="polarion_262"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">MIME-Version: 1.0</span> </p>
  <p id="polarion_263"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: application/pkcs7-mime; smime-type=enveloped-data;name="smime.p7m";</span> </p>
  <p id="polarion_264"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: base64</span> </p>
  <p id="polarion_265"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Disposition: attachment;&nbsp;&nbsp;&nbsp;&nbsp;filename="smime.p7m"</span> </p>
  <p id="polarion_266"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Subject: KOM-LE Nachricht</span> </p>
  <p id="polarion_267"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Date: Fri, 9 Feb 2012 12:07:17 +0100</span> </p>
  <p id="polarion_268"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: mustermann@komle.de</span> </p>
  <p id="polarion_269"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">To: musterfrau@komle.de</span> </p>
  <p id="polarion_270"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Cc: mustermann2@komle.de</span> </p>
  <p id="polarion_271"></p>
  <p id="polarion_272"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;verschlüsselter Inhalt&gt;</span> </p>
  <p id="polarion_273"></p>
  <p id="polarion_274"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_275">Im Clientmodul wird diese Nachricht entsprechend der Anforderung [KOM-LE-A_2029] aufbereitet:</p>
  <p id="polarion_276"></p>
  <p id="polarion_277"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KOM-LE-Version: 1.0</span> </p>
  <p id="polarion_278"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">MIME-Version: 1.0</span> </p>
  <p id="polarion_279"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: application/pkcs7-mime;</span> </p>
  <p id="polarion_280"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">smime-type=enveloped-data; name="smime.p7m"</span> </p>
  <p id="polarion_281"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: base64</span> </p>
  <p id="polarion_282"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Disposition: attachment;&nbsp;&nbsp;&nbsp;&nbsp;filename="smime.p7m"</span> </p>
  <p id="polarion_283"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Subject: KOM-LE Nachricht</span> </p>
  <p id="polarion_284"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Date: Fri, 9 Feb 2012 12:07:17 +0100</span> </p>
  <p id="polarion_285"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: mustermann@komle.de</span> </p>
  <p id="polarion_286"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">To:</span> <a href="mailto:mustermann@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a> </p>
  <p id="polarion_287"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Cc: mustermann2@komle.de</span> </p>
  <p id="polarion_288"></p>
  <p id="polarion_290"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&lt;Verschlüsselter Inhalt&gt;</span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16713">3.3.5 Beispiele</h4>
  <p id="polarion_291">Das Clientsystem (C) verbindet sich mit dem Clientmodul (M) und sendet dem MTA-Server (S) eine Nachricht (im Beispiel werden auch die Zustände des Clientmoduls dargestellt):</p>
  <p id="polarion_292"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C: &nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientsystem öffnet eine mit TLS geschützte Verbindung mit dem Clientmodul&gt;</span> </p>
  <p id="polarion_293"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;CONNECT Zustand&gt;</span> </p>
  <p id="polarion_294"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 220 KOM-LE Clientmodul ESMTP</span> </p>
  <p id="polarion_295"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: EHLO [192.168.1.5]</span> </p>
  <p id="polarion_296"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 – SIZE 35882577</span> </p>
  <p id="polarion_297"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 - AUTH LOGIN PLAIN</span> </p>
  <p id="polarion_298"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 – 8BITMIME</span> </p>
  <p id="polarion_299"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 EN<span style="text-decoration: line-through;">C</span>HANCEDSTATUSCODES</span> </p>
  <p id="polarion_300"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: AUTH LOGIN</span> </p>
  <p id="polarion_301"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 334 VXNlcm5hbWU6</span> </p>
  <p id="polarion_302"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: bXVzdGVybWFubkBrb21sZS5kZSNtYWlsLmtvbWxlLmRlOjU4NyMxI0tPTS1MRSM3==</span> </p>
  <p id="polarion_303"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 334 UGFzc3dvcmQ6</span> </p>
  <p id="polarion_304"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: lkajsdfvlj</span> </p>
  <p id="polarion_305"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul öffnet eine mit TLS geschützte Verbindung mit dem MTA&gt;</span> </p>
  <p id="polarion_306"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 220 SMTP Server ESMTP</span> </p>
  <p id="polarion_307" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: EHLO [192.168.1.5]</span> </p>
  <p id="polarion_308"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 – SIZE 35882577</span> </p>
  <p id="polarion_309"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 - AUTH LOGIN PLAIN</span> </p>
  <p id="polarion_310"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 – 8BITMIME</span> </p>
  <p id="polarion_311"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 EN<span style="text-decoration: line-through;">C</span>HANCEDSTATUSCODES</span> </p>
  <p id="polarion_312"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: AUTH LOGIN</span> </p>
  <p id="polarion_313"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 334 VXNlcm5hbWU6</span> </p>
  <p id="polarion_314"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: bXVzdGVybWFubkBrb21sZS5kZQ==</span> </p>
  <p id="polarion_315"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 334 UGFzc3dvcmQ6</span> </p>
  <p id="polarion_316"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: lkajsdfvlj</span> </p>
  <p id="polarion_317"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 235 2.7.0 Authentication successful</span> </p>
  <p id="polarion_318"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M: &nbsp;&nbsp;&nbsp;&nbsp;&lt;PROXY Zustand&gt;</span> </p>
  <p id="polarion_319"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 235 2.7.0 Authentication successful</span> </p>
  <p id="polarion_320"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: MAIL FROM:&lt;mustermann@komle.de&gt;</span> </p>
  <p id="polarion_321"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: MAIL FROM:&lt;</span><a href="mailto:mustermann@komle.de" target="_blank" class="descriptionLink">mustermann@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_322"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 OK</span> </p>
  <p id="polarion_323"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 OK</span> </p>
  <p id="polarion_324"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: RCPT TO:&lt;</span><a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_325"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: RCPT TO:&lt;</span><a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_326"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 OK</span> </p>
  <p id="polarion_327"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 OK</span> </p>
  <p id="polarion_328"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: DATA</span> </p>
  <p id="polarion_329"></p>
  <p id="polarion_331"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;</span> </p>
  <p id="polarion_332"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;PROCESS Zustand&gt;</span> </p>
  <p id="polarion_333"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: From: "Max Mustermann" &lt;mustermann@komle.de&gt;</span> </p>
  <p id="polarion_334"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: To: "Erika Musterfrau" &lt;</span><a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_335"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: Subject: Biopsie Ergebnisse für Frau S. Muster</span> </p>
  <p id="polarion_336"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: Date: Mon, 30 Jan 2012 13:14:12 +0100</span> </p>
  <p id="polarion_337"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M:</span> </p>
  <p id="polarion_338"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: &lt;Inhalt der KOM-LE Nachricht&gt;</span> </p>
  <p id="polarion_339"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: .</span> </p>
  <p id="polarion_340"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;Die Nachricht wird im Clientmodul aufbereitet&gt;</span> </p>
  <p id="polarion_341"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: DATA</span> </p>
  <p id="polarion_342"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;</span> </p>
  <p id="polarion_343"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: X-KOM-LE-Version: 1.0</span> </p>
  <p id="polarion_344"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: MIME-Version: 1.0</span> </p>
  <p id="polarion_345"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: From: "Max Mustermann" &lt;mustermann@komle.de&gt;</span> </p>
  <p id="polarion_346"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: To: "Erika Musterfrau" &lt;musterfrau@komle.de&gt;</span> </p>
  <p id="polarion_347"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: Subject: KOM-LE Nachricht</span> </p>
  <p id="polarion_348"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: Date: Mon, 30 Jan 2012 13:14:12 +0100</span> </p>
  <p id="polarion_349"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: Content-Type: application/pkcs7-mime; mime-type=enveloped-data;name=smime.p7m</span> </p>
  <p id="polarion_350"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: Content-Transfer-Encoding: base64</span> </p>
  <p id="polarion_351"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: Content-Disposition: attachment; filename=smime.p7m</span> </p>
  <p id="polarion_352"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S:</span> </p>
  <p id="polarion_353"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: &lt;verschlüsselter Inhalt der KOM-LE Nachricht&gt;</span> </p>
  <p id="polarion_354"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: .</span> </p>
  <p id="polarion_355"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;PROXY Zustand&gt;</span> </p>
  <p id="polarion_356"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 Ok</span> </p>
  <p id="polarion_357"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 Ok</span> </p>
  <p id="polarion_358"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: QUIT</span> </p>
  <p id="polarion_359"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: QUIT</span> </p>
  <p id="polarion_360"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 221 Bye</span> </p>
  <p id="polarion_361"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S:&nbsp;&nbsp;&nbsp;&nbsp;&lt;der MTA schließt die Verbindung mit dem Clientmodul&gt;</span> </p>
  <p id="polarion_362"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 221 Bye</span> </p>
  <p id="polarion_363"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul schließt die Verbindung mit dem Clientsystem&gt;</span> </p>
  <p id="polarion_364">Das Senden einer Nachricht wird abgebrochen, weil die Anmeldedaten keine MTA-Adresse erhalten:</p>
  <p id="polarion_365"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C: &nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientsystem öffnet eine mit TLS geschützte Verbindung mit dem Clientmodul&gt;</span> </p>
  <p id="polarion_366"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M: &nbsp;&nbsp;&nbsp;&nbsp;&lt;CONNECT Zustand&gt;</span> </p>
  <p id="polarion_367"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 220 KOM-LE Clientmodul ESMTP</span> </p>
  <p id="polarion_368"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: EHLO [192.168.1.5]</span> </p>
  <p id="polarion_369"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 – SIZE 35882577</span> </p>
  <p id="polarion_370"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 - AUTH LOGIN PLAIN</span> </p>
  <p id="polarion_371"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 – 8BITMIME</span> </p>
  <p id="polarion_372"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 ENHANCEDSTATUSCODES</span> </p>
  <p id="polarion_373"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: AUTH LOGIN</span> </p>
  <p id="polarion_374"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 334 VXNlcm5hbWU6</span> </p>
  <p id="polarion_375"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: bXVzdGVybWFubkBrb21sZS5kZQ==</span> </p>
  <p id="polarion_376"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 334 UGFzc3dvcmQ6</span> </p>
  <p id="polarion_377"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: lkajsdfvlj</span> </p>
  <p id="polarion_378"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 501 5.5.4 Benutzername muss die Adresse und die Portnummer des SMTP Servers</span> </p>
  <p id="polarion_379"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Enthalten</span> </p>
  <p id="polarion_380"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul schließt die Verbindung mit dem Clientsystem&gt;</span> </p>
  <p id="polarion_381">Das Senden einer Nachricht wird abgebrochen, weil Verschlüsselungszertifikate weder für mustermann@komle.de noch für musterfrau@komle.de gefunden werden konnten:</p>
  <p id="polarion_382"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">...</span> </p>
  <p id="polarion_384"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: DATA</span> </p>
  <p id="polarion_385"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 354 Start mail input; end with &lt;CRLF&gt;.&lt;CRLF&gt;</span> </p>
  <p id="polarion_386"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;PROCESS Zustand&gt;</span> </p>
  <p id="polarion_387"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: From: "Max Mustermann" &lt;mustermann@komle.de&gt;</span> </p>
  <p id="polarion_388"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: To: "Erika Musterfrau" &lt;musterfrau@komle.de&gt;</span> </p>
  <p id="polarion_389"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: Subject: Biopsie Ergebnisse für Frau S. Muster</span> </p>
  <p id="polarion_390"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: Date: Mon, 30 Jan 2012 13:14:12 +0100</span> </p>
  <p id="polarion_391"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M:</span> </p>
  <p id="polarion_392"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: &lt;Inhalt der KOM-LE Nachricht&gt;</span> </p>
  <p id="polarion_393"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: .</span> </p>
  <p id="polarion_394"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;Das Clientmodul konnte die Verschlüsselungszertifikate nicht finden&gt;</span> </p>
  <p id="polarion_395"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 451 Die Nachricht konnte nicht verschlüsselt werden, weil</span> </p>
  <p id="polarion_396" style="margin-left: 40px;"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Verschlüsselungszertifikate für mustermann@komle.de,</span> <a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">nicht zugänglich sind</span> </p>
  <p id="polarion_397"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: RSET</span> </p>
  <p id="polarion_398"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 2.0.0 Flushed</span> </p>
  <p id="polarion_399"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: QUIT</span> </p>
  <p id="polarion_400"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: QUIT</span> </p>
  <p id="polarion_401"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 221 Bye</span> </p>
  <p id="polarion_402"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S:&nbsp;&nbsp;&nbsp;&nbsp;&lt;der MTA schließt die Verbindung mit dem Clientmodul&gt;</span> </p>
  <p id="polarion_403"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 221 Bye</span> </p>
  <p id="polarion_404"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul schließt die Verbindung mit dem Clientsystem&gt;</span> </p>
  <p id="polarion_405">Das Senden einer Nachricht wird abgebrochen, weil die Verbindung zwischen dem Clientmodul und dem Clientsystem abgebrochen wird:</p>
  <p id="polarion_406"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">...</span> </p>
  <p id="polarion_407"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 235 2.7.0 Authentifizierung erfolgreich</span> </p>
  <p id="polarion_408"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: MAIL FROM:&lt;</span><a href="mailto:mustermann@komle.de" target="_blank" class="descriptionLink">mustermann@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_409"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: MAIL FROM:&lt;</span><a href="mailto:mustermann@komle.de" target="_blank" class="descriptionLink">mustermann@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_410"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 250 OK</span> </p>
  <p id="polarion_411"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 250 OK</span> </p>
  <p id="polarion_412"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: RCPT TO:&lt;</span><a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_413"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C: &nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientsystem bricht die Verbindung mit dem Clientmodul ab&gt;</span> </p>
  <p id="polarion_414"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: RCPT TO:&lt;</span><a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">&gt;</span> </p>
  <p id="polarion_415"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M: &nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul schließt die Verbindung mit dem MTA&gt;</span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16714">3.4 Empfangen von Nachrichten</h3>
  <p id="polarion_416">In diesem Kapitel werden Anforderungen an das Clientmodul formuliert, die für den Anwendungsfall „KOM-LE_AF_2 Nachricht empfangen“ [gemSysL_KOMLE] spezifisch sind.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16715">3.4.1 Übersicht</h4>
  <p id="polarion_417">Beim Empfangen von KOM-LE-Nachrichten sorgt das Clientmodul dafür, dass für abgeholte Nachrichten vor der Weiterleitung an das Clientsystem der Vertraulichkeitsschutz aufgehoben und die Integrität geprüft werden. Abbildung 10 stellt die Interaktionen zwischen den am Abholen von KOM-LE-Nachrichten beteiligten Komponenten dar. Aus Sicht des Clientsystems agiert das Clientmodul als POP3-Server, und aus Sicht des POP3-Servers des Fachdienstes (weiter im Text auch als POP3-Server bezeichnet) agiert das Clientmodul als E-Mail-Client. Für Funktionen wie Datentransport, kryptographische Operationen, Kommunikation mit dem Verzeichnisdienst verwendet das Clientmodul entsprechende Dienste der TI-Plattform.</p>
  <p id="polarion_418" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image11.png" style="width: 582px;height: 226px;"> </p>
  <p id="polarion_229" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">10</span>: Abb_Empfangen_Msg Empfangen von Nachrichten </p>
  <p id="polarion_420"></p>
  <p id="polarion_97">Beim Abholen von Nachrichten findet die Kommunikation zwischen dem Clientsystem, dem Clientmodul und dem POP3-Server über POP3 statt. Das Clientmodul fungiert als POP3-Proxy, der das Clientsystem mit dem POP3-Server verbindet, die Entschlüsselung und Signaturprüfung für die abgeholten KOM-LE-Nachrichten durchführt und die entschlüsselten Nachrichten an das Clientsystem liefert. Bei einer fehlgeschlagenen Integritätsprüfung wird der Empfänger der KOM-LE-Nachricht mit einer Fehlernachricht informiert. Die Weiterleitung der Client-Mail an das Clientsystem des Empfängers wird in diesem Fall durch das Clientmodul unterbunden.</p>
  <p id="polarion_421">Dieses Dokument spezifiziert nicht alle Schritte und Einzelheiten der POP3-Kommunikation zwischen dem Clientsystem, dem Clientmodul und dem POP3-Server. Es setzt voraus, dass POP3 und dessen Erweiterungen dem Leser bekannt sind.</p>
  <p id="polarion_422">Das Clientmodul benachrichtigt den Nutzer über Fehler, die während der Nachrichtenübertragung zwischen dem POP3-Server und dem Clientmodul oder bei der Bearbeitung der Nachrichten im Clientmodul auftreten. In den meisten Fällen wird das Clientsystem durch POP3-Meldungen über Fehler informiert. Das Clientsystem entscheidet anschließend über das weitere Vorgehen (weitermachen oder abbrechen und den Nutzer über den Fehler informieren).</p>
  <p id="polarion_423"> <span style="text-decoration: underline;">Beispiel</span>: Verwendet das Clientsystem beim Empfangen von Nachrichten falsche Anmeldungsdaten, bekommt es vom Clientmodul „-ERR Der Nutzer konnte nicht authentifiziert werden“ als Antwort auf sein PASS-Kommando. </p>
  <p id="polarion_424">Fehler, die bei der Entschlüsselung oder Integritätsprüfung einer Nachricht auftreten, werden anders behandelt:</p>
  <ul id="polarion_425"> 
   <li>Kann die Nachricht nicht entschlüsselt werden (z.B. weil der entsprechende HBA nicht zu Verfügung steht), wird durch das Clientmodul eine Fehlernachricht generiert, die die verschlüsselte Nachricht als Anhang enthält. Um die Nachricht nachträglich zu entschlüsseln und ihre Signatur zu prüfen, kann der Nutzer die Nachricht an seine eigene E-Mail-Adresse senden, Maßnahmen treffen damit beim nächsten Abholen der entsprechende Schlüssel gefunden wird und den Abholvorgang wiederholen.</li> 
   <li>Wenn die Integritätsprüfung der entschlüsselten KOM-LE-Nachricht fehlschlägt (z. B. weil die Integrität der Nachricht verletzt wurde) wird die entschlüsselte Nachricht verworfen und eine Fehlernachricht an den Empfänger der KOM-LE-Nachricht gesendet.</li> 
  </ul>
  <p id="polarion_426">Das Verhalten des Clientmoduls beim Abholen von Nachrichten kann mit Hilfe der in Abbildung 11 dargestellten Zustandsmuster beschrieben werden und haben illustrativen und nicht normativen Charakter. Die Umsetzung kann sich unterscheiden, solange das Ergebnis das gleiche ist. Die den Zuständen zugeordnete Anforderungen sind normativ, können aber außerhalb des Kontexts dieser Zustände umgesetzt werden.</p>
  <p id="polarion_427" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image12.emf" style="width: 582px;max-width: 750px;height: 260px;"> </p>
  <p id="polarion_232" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">11</span>: Abb_Status_CM_Empfang Zustände Clientmodul beim Nachrichtenempfang </p>
  <p id="polarion_429"></p>
  <p id="polarion_133">Das Clientmodul lauscht auf einem TCP-Port und wartet bis ein Clientsystem mit ihm eine Verbindung aufbaut. Sobald dies passiert, geht das Clientmodul in den CONNECT-Zustand über und betrachtet die POP3-Verbindung als geöffnet. Die POP3-Verbindung zwischen dem Clientmodul und dem Clientsystem muss mit TLS erfolgen.</p>
  <p id="polarion_430">Im CONNECT-Zustand führt das Clientmodul einen POP3-Dialog mit dem Clientsystem, in dem ihm die Anmeldedaten des Nutzers sowie die Adresse und die Portnummer des POP3-Servers mitgeteilt werden. Sobald die Anmeldedaten und die Adresse des POP3-Servers übermittelt sind, baut das Clientmodul eine über TLS geschützte POP3-Verbindung mit dem POP3-Server auf, authentifiziert sich und geht in den PROXY-Zustand über.</p>
  <p id="polarion_431">Im PROXY-Zustand leitet das Clientmodul POP3-Meldungen und POP3-Antwortcodes zwischen dem Clientsystem und dem POP3-Server hin und her, bis das Clientsystem mit dem RETR-Kommando das Abholen einer Nachricht initiiert. Sobald der POP3-Server beginnt, Inhalte einer Nachricht zu übertragen, geht das Clientmodul in den PROCESS-Zustand über.</p>
  <p id="polarion_432">Im PROCESS-Zustand wird die Nachricht entschlüsselt, ihre Signatur geprüft und die aufbereitete Nachricht dem Clientsystem übermittelt. Sobald die Nachricht erfolgreich an das Clientsystem übermittelt wurde oder im Fehlerfall, geht das Clientmodul in den PROXY-Zustand zurück.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16716">3.4.2 CONNECT-Zustand</h4>
  <p id="polarion_433">Sobald die TCP-Verbindung zwischen dem Clientsystem und dem Clientmodul aufgebaut wurde, geht das Clientmodul in den CONNECT-Zustand über.</p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16717">3.4.2.1 Initialisierung</h5>
  <p id="polarion_434">Nachdem die POP3-Verbindung zwischen dem Clientsystem und dem Clientmodul aufgebaut wurde, sendet das Clientmodul dem Clientsystem die POP3-Begrüßung.</p>
  <p id="polarion_435"> Beispiel einer solchen Begrüßung: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">+OK KOM-LE Clientmodul POP3</span> </p>
  <p id="polarion_436">Das Clientmodul führt einen POP3-Dialog mit dem Clientsystem bis ihm das Clientsystem die Adresse und die Portnummer des POP3-Servers als einen Teil des während des Authentifizierungsverfahrens übertragenen Benutzernamens mitteilt.</p>
  <p id="polarion_437">Tabelle Tab_POP3_Ant_Init beschreibt die Antworten, die das Clientmodul dem Clientsystem im CONNECT-Zustand sendet.</p>
  <p id="polarion_438"></p>
  <p id="polarion_234" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">5</span>: Tab_POP3_Ant_Init Antworten Clientmodul im CONNECT-Zustand </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=3" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 254.8px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Clientsystem -&gt; Clientmodul</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 492.4px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Clientmodul -&gt; Clientsystem</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 254.8px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">CAPA</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 492.4px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">“+OK” Antwortcode mit folgenden CAPA Kennworten:</span><br> <span style="font-size: 10pt;line-height: 1.5;">TOP</span><br> <span style="font-size: 10pt;line-height: 1.5;">USER</span><br> <span style="font-size: 10pt;line-height: 1.5;">SASL PLAIN</span><br> <span style="font-size: 10pt;line-height: 1.5;">UIDL</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 254.8px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">USER, AUTH</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 492.4px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Anmeldungsdaten erhalten und Verbindungsaufbau mit dem POP3-Server fortsetzen (siehe Kapitel 3.3.2.2)</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 254.8px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">QUIT</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 492.4px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">„+ OK“ Antwortcode senden und die Verbindung mit dem Clientsystem schließen</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 254.8px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Andere Meldungen</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 492.4px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">„-ERR“ Antwortcode</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_139"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16718">
   <p><b>KOM-LE-A_2030</b></p>
   <p><p style="margin-left: 0px;"><span>Das Cli</span><span>entmodul MUSS, nachdem die POP3-</span><span>Verbindung zwischen dem Clientsystem </span><span>und dem Clientmodul aufgebaut wu</span><span>rd</span><span>e</span><span> und bis zu</span><span> de</span><span>m Punkt an dem das Clientsystem die Bestätigung</span><span> des Erfolgs oder Misserfolgs seiner Authentifizierung erwartet, einen POP3-</span><span>Dialog entsprechend Tabelle Tab_POP3</span><span>_Ant_Init mit dem Clientsystem führen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16719">3.4.2.2 Verbindungsaufbau mit dem POP3-Server</h5>
  <p id="polarion_442">Das Clientmodul kann die Verbindung mit dem POP3-Server nur dann aufbauen, wenn ihm das Clientsystem die Adresse des POP3-Servers und die Portnummer des POP3-Dienstes übermittelt. Das Clientmodul erwartet, dass der Domain Name oder die IP-Adresse und die Portnummer während des Authentifizierungsverfahrens als Teil des Benutzernamens übergeben werden.</p>
  <p id="polarion_443">Das Clientmodul führt das Authentifizierungsverfahren mit dem Clientsystem bis zu dem Punkt, an dem es mit dem entsprechenden Antwortcode die Authentifizierung akzeptieren oder ablehnen muss. Das Clientmodul allein kann das Clientsystem nicht authentifizieren. Die Authentizität der Zugangsdaten kann nur vom POP3-Server überprüft werden. Dazu authentisiert sich das Clientmodul im Auftrag vom Clientsystem gegenüber dem POP3-Server.</p>
  <p id="polarion_444">Die Server Adresse und die Portnummer des POP3-Dienstes sind als Teil des POP3-Benutzernamens vom Clientsystem zu übergeben. Sie sind vom eigentlichen Benutzernamen durch das Zeichen ’#’ getrennt und als adresse:port String formatiert.</p>
  <p id="polarion_445">Um mit SM-B/HBA über den Konnektor kommunizieren zu können, werden dem KOM-LE-Clientmodul ebenfalls als Teil des POP3-Benutzernamens, die</p>
  <ul id="polarion_446"> 
   <li>MandantId</li> 
   <li>ClientSystemId</li> 
   <li>WorkplaceId</li> 
   <li>UserId (optional – ist für einen Zugriff auf HBA erforderlich)</li> 
   <li>KonnektorId (optional).</li> 
  </ul>
  <p id="polarion_447">übergeben (siehe Kapitel 3.5 und [gemSpec_Kon] für Details zu MandantId, ClientSystemId, WorkplaceId und UserId). Der optionale Parameter KonnektorId, als Bestandteil des Aufrufkontext für SM-B, ermöglicht die Unterstützung von Multikonnektor-Umgebungen.&nbsp;Die Parameter entsprechen denen des aufrufenden Clients und werden voneinander durch das Zeichen ’#’ getrennt. Der Parameter UserId wird nur für den Zugriff auf einen HBA benötigt und kann entfallen wenn kein HBA erforderlich ist (z.B. wenn die Entschlüsselung der empfangenen Nachrichten ausschließlich mit SM-B durchgeführt wird).&nbsp;Der optionale Parameter KonnektorId kann ebenfalls entfallen, wenn das Clientmodul nicht mit mehreren Konnektoren kommunizieren muss.</p>
  <p id="polarion_448">Die Reihenfolge der Parameter entspricht dem folgenden Muster und hat der den Parametern vorangestellten Nummer in der Reihenfolge zu entsprechen:</p>
  <p id="polarion_794"> [0] Benutzername<br> [1] &lt;Domain Adresse des POP3-Servers&gt;:&lt;Port&gt;<br> [2] MandantId<br> [3] ClientsystemId<br> [4] WorkplaceId<br> — &lt;optional&gt; —<br> [5] UserId<br> [6] KonnektorId<br> [...] </p>
  <p id="polarion_449" style="text-align: center;" data-keep-next="true"> <br> <img src="attachments/19-screenshot-20210317-135513.png" style="width: 754px;height: 124px;"> </p>
  <p id="polarion_236" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">12</span>: Abb_POP3_Nutzer_Name Format des POP3- Benutzernamens </p>
  <p id="polarion_451"></p>
  <p id="polarion_145"> <span style="text-decoration: underline;">Beispiel</span>: </p>
  <p id="polarion_452">Bei folgenden Informationen</p>
  <ul id="polarion_453"> 
   <li>Benutzername des Clients = „erik.mustermann@hrst_domain.kim.telematik“,</li> 
   <li>Domain Adresse des POP3-Servers = „hrst_domain.kim.telematik“ und Portnummer = 995,</li> 
   <li>MandantId = 1,</li> 
   <li>ClientsystemId = KOM_LE,</li> 
   <li>WorkplaceId = 7,</li> 
   <li>UserId = 13</li> 
   <li>KonnektorId = Konn_1</li> 
  </ul>
  <p id="polarion_454">erwartet das Clientmodul, dass das Clientsystem ihm den folgenden POP3-Benutzernamen als String überträgt:</p>
  <p id="polarion_455" style="text-align: center;"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:995#1#KOM_LE#7#13#Konn_1</span> </p>
  <p id="polarion_456"></p>
  <p id="polarion_793">Enthält der POP3-Benutzername nicht alle erforderlichen Parameter, bricht das KOM-LE-Clientmodul den Empfangsvorgang mit dem -ERR Antwortcode ab. Wenn der erhaltene POP3-Benutzername zusätzliche optionale durch das Zeichen ‚#’ abgegrenzte Parameter enthält (z.B. #UserId#KonnektorId), dann müssen diese Parameter vom Clientmodul ausgewertet werden und der Empfangsvorgang wird fortgesetzt.</p>
  <p id="polarion_457">Es gibt mehrere Benutzername/Password-basierte POP3-Authentifizierungsmechanismen:</p>
  <ul id="polarion_458"> 
   <li>Mechanismen, wo die Übertragung von Benutzername und Passwort im Klartext erfolgt (USER/PASS und PLAIN)</li> 
   <li>Challenge-Response-Mechanismen, wo der Benutzername im Klartext und das Passwort in Form eines auf vom Server erhaltenen Challenge-basierten Responses übertragen wird (DIGEST-MD5, CRAM-MD5, NTLM).</li> 
  </ul>
  <p id="polarion_459">Die auf Challenge-Response basierten Mechanismen machen das Extrahieren des Passworts aus der Challenge-basierten Response für das Clientmodul unpraktikabel. Deshalb werden für die Clientsystem-Clientmodul-Authentifizierung die PLAIN oder USER/PASS-Mechanismen verwendet.</p>
  <p id="polarion_460">Sobald das Clientmodul die Anmeldedaten des Nutzers erhält, extrahiert es die Adresse des POP3-Servers und die Portnummer des POP3-Dienstes aus dem Nutzernamen und baut damit die Verbindung zum POP3-Server auf. Die Verbindung wird über TLS geschützt. Details zum Aufbau der TLS-Verbindung werden in Kapitel 4.1.3 beschrieben.</p>
  <p id="polarion_461">Tabelle Tab_POP3_Verbindung enthält POP3-Antwortcodes, die das Clientmodul dem Clientsystem bei einem Verbindungsaufbau mit dem POP3-Server übermittelt.</p>
  <p id="polarion_146"></p>
  <p id="polarion_289" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">6</span>: Tab_POP3_Verbindung Antwortcodes für POP3-Server-Verbindungsaufbau </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=4" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 571.6px;height: 59.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Bedingung</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 175.6px;height: 59.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">POP3 Antwortcode</span><br> <span style="font-size: 10pt;line-height: 1.5;">(Clientmodul -&gt; Clientsystem)</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 571.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Das Clientsystem hat sich erfolgreich gegenüber dem POP3-Server mit den vom Clientsystem erhaltenen Anmeldungsdaten authentifiziert.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 175.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">+OK</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 571.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Das Clientsystem verwendet für die POP3-Authentifizierung einen anderen Mechanismus als USER/PASS oder PLAIN.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 175.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">-ERR</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 571.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die vom Clientsystem erhaltene POP3-Authentifizierungsidentität ist nicht vollständig oder&nbsp; falsch formatiert (POP3 Server Adresse, MandantId, ClientSystemId, WorkplaceID oder Platzhalter fehlt – siehe Abbildung "Abb_POP3_Nutzer_Name Format des POP3- Benutzernamens").</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 175.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">-ERR</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 571.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;">Bei Übergabe der Parameter für den Aufrufkontext für SM-B (MandantID, ClientSystemID oder WorkplaceID) antwortet der Konnektor mit einem SOAP Fault (Code: 4004 - 4006)</td> 
     <td style="text-align: left;vertical-align: top;width: 175.6px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;">-ERR</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 571.6px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Verbindung zwischen dem Clientmodul und dem POP3-Server kann nicht aufgebaut werden.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 175.6px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">-ERR</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 571.6px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Authentifizierung gegenüber dem MTA schlägt fehl.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 175.6px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">-ERR</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_464"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-118332">
   <p><b>KOM-LE-A_2037-01</b></p>
   <p>Das Clientmodul MUSS das Clientsystem über das Ergebnis des Verbindungsaufbaus mit dem POP3-Server mit den in der Tabelle Tab_POP3_Verbindung beschriebenen POP3-Antwortcodes informieren. <b>&lt;=</b></p>
  </div>
  <p id="polarion_4"> <br> Die Verbindungen zwischen dem Clientsystem und dem Clientmodul sowie zwischen dem Clientmodul und dem POP3-Server bleiben solange offen, bis eine der beiden geschlossen oder abgebrochen wird. Sobald eine der beiden Verbindungen geschlossen oder abgebrochen wird, übermittelt das Clientmodul die ausstehenden POP3-Meldungen und schließt die andere Verbindung. Die POP3-Sitzung wird damit für den POP3-Server, das Clientsystem und das Clientmodul beendet. </p>
  <p id="polarion_465"> <span style="text-decoration: underline;">Beispiel</span>: </p>
  <p id="polarion_466">Nachdem das Clientmodul das QUIT-Kommando vom Clientsystem erhält und dem POP3-Server übermittelt, bestätigt der POP3-Server das Ankommen des Kommandos mit dem Antwortcode „+OK“ und schließt die Verbindung mit dem Clientmodul. Das Clientmodul übermittelt den Antwortcode „+OK“ an das Clientsystem und schließt die Verbindung mit dem Clientsystem.</p>
  <p id="polarion_147"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16720">
   <p><b>KOM-LE-A_2031</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für </span><span>die</span><span> </span><span>POP3-</span><span>Authentifizierung des Clientsystems die Serverteile </span><span>der</span><span> USER/PASS und SASL</span><span>-</span><span>PLAIN</span><span>-</span><span>Mechanismen unterstützen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16721">
   <p><b>KOM-LE-A_2032</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUS</span><span>S die Zugangsdaten für den POP3-Server und den Kartena</span><span>ufrufcontext aus dem vom Clientsystem erhaltenen POP3-Benutzernamen entsprechend Abbildung </span><span>Abb_POP3_Nutzer_Name</span><span> extrahieren.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117611">
   <p><b>A_21517</b></p>
   <p>Das Clientmodul MUSS, wenn der Parameter KonnektorId im erhaltenen POP3-Benutzernamen erhalten ist, diesen extrahieren und auswerten, um während der POP3-Verbindung, mit einem definierten Konnektor, Nachrichten weiterzuleiten.<span style="background-color: #99FF99;"></span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_800">Der Parameter KonnektorId ist eine Referenz auf eine URI oder eine IP-Adresse eines Konnektors, um in einer Umgebung mit mehreren Konnektoren einen bestimmten Konnektor ansprechen zu können. Diese kann beispielweise in einer Konfigurations-Datei im Clientmodul hinterlegt sein.</p>
  <p id="polarion_821"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125262">
   <p><b>A_21518-02</b></p>
   <p>Das Clientmodul&nbsp;MUSS die übergebene POP3-Benutzername-Zeichenkette auf Vollständigkeit überprüfen. Werden optionale Bestandteile des POP3-Benutzernamens nicht genutzt, MUSS sichergestellt werden das später folgende optionale Bestandteile in ihrer vorgegebenen Position platziert werden. Als Platzhalter ist in so einem Fall "*" zu verwenden.&nbsp;Wenn die POP3-Benutzername-Zeichenkette nicht vollständig ist, MUSS das Clientmodul den POP3 Fehlercode gemäß Tabelle "Tab_POP3_Verbindung Antwortcodes für POP3-Server-Verbindungsaufbau" an das Clientsystem senden und den Vorgang abbrechen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_835"> <span style="font-weight: bold;">Beispiel einer vollständigen POP3-Benutzername-Zeichenkette:</span> </p>
  <ul id="polarion_850"> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> </span>ohne optionale Bestandteile:</li> 
  </ul>
  <p id="polarion_851"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:995#1#KOM_LE#7<span style="text-decoration: line-through;"><br> </span></span> </p>
  <ul id="polarion_853"> 
   <li> nur<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> UserId </span>als optionaler Bestandteil<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">:</span></li> 
  </ul>
  <p id="polarion_837"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:995#1#KOM_LE#7#13</span> </p>
  <ul id="polarion_855"> 
   <li> keine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">UserId </span>jedoch die<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> KonnektorId:</span></li> 
  </ul>
  <p id="polarion_839"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:995#1#KOM_LE#7#*#Konn_1</span> </p>
  <ul id="polarion_856"> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">UserId </span>und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">KonnektorId </span>als optionale Bestandteile<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">:</span></li> 
  </ul>
  <p id="polarion_841"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">erik.mustermann@hrst_domain.kim.telematik#hrst_domain.kim.telematik:995#1#KOM_LE#7#13#Konn_1<br> </span> </p>
  <p id="polarion_842"> <span style="background-color: #FFFF99;"><br> </span> Erfolgt die Einbindung von KIM in ein bestehendes Mail-System, kann ein übergebener Delimiter ":" zwischen dem Serveranteil und dem Port (z. B. <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">hrst_domain.kim.telematik:995</span>) des POP3-Benutzernamens zu Fehlern bei der Interpretation im Bestandsystem führen. Es werden daher weitere Delimiter im Benutzernamen unterstützt, sofern die Funktionalität gemäß der Bestandsanforderungen zu den Benutzernamen, in semantischer Abgrenzung, uneingeschränkt erhalten bleiben. Es gilt, dass die Bestandteile des POP3-Benutzernames in ihrem semantischen Bezug gemäß [RFC1123, RFC2822] einhalten müssen.<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;background-color: #FFFF99;"> </span> </p>
  <p id="polarion_843"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-112533">
   <p><b>KOM-LE-A_2033-01</b></p>
   <p>Das Clientmodul MUSS die POP3-Adresse und die Portnummer, die aus dem vom Clientsystem erhaltenen POP3-Benutzernamen extrahiert wurden (siehe Abbildung Abb_POP3_Nutzer_Name), für den Verbindungsaufbau mit dem POP3-Server verwenden. <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16723">
   <p><b>KOM-LE-A_2034</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS den Benutzernamen, der aus dem vom Clientsystem erhaltenen POP3-Benutzernamen extrahiert wurde</span><span> (siehe </span><span>Abbildung Abb_POP3_Nutzer_Name</span><span>)</span><span> sowie das vom Clientsystem erhaltene Passwort für die Authentifizierung gegenüber den POP3-Server verwenden.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16724">
   <p><b>KOM-LE-A_2035</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für das Authentif</span><span>izierungsverfahren mit dem POP3-</span><span>Server den Clientteil </span><span>der</span><span> USER/PASS und SASL</span><span>-</span><span>PLAIN</span><span>-</span><span>Mechanismen für POP3</span><span>-</span><span>Authentifizierung unterstützen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16725">
   <p><b>KOM-LE-A_2036</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul KANN für das Authentif</span><span>izierungsverfahren mit dem POP3-Server </span><span>andere als USER/PASS oder SASL</span><span>-</span><span>PLAIN</span><span>-</span><span>Authentifizierungsmechanismen benutzen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16727">
   <p><b>KOM-LE-A_2038</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das Clientmodul MUSS die POP3-Verbindung mit dem Clientsystem aufrechterhalten. Das Schließen der Verbindung ist nur bei folgenden Ausnahmen zulässig:</span></p>
    <ul>
     <li><p><span>Nachdem die Verbindung zwischen dem Clientmodul und dem POP3-Server geschlossen wird. In diesem Fall MUSS das Clientmodul die Verbindung mit dem POP3-Server schließen. Falls es vom POP3-Server erhaltene und dem Clientsystem noch nicht übertragene POP3-Meldungen gibt, MUSS das Clientmodul diese Meldungen dem Clientsystem übertragen, und nur danach die Verbindung mit dem Clientsystem schließen.</span></p></li>
     <li><p><span>Wenn der POP3-Server innerhalb eines konfigurierbaren Timeouts nicht auf ein POP3-Kommando reagiert. In diesem Fall MUSS das Clientmodul den Antwortcode „- ERR</span> <span>timeout</span><span>“ an das Clientsystem senden und anschließend die Verbindung schließen.</span></p></li>
     <li><p><span>Wenn die Verbindung zwischen dem Clientmodul und dem POP3-Server noch nicht aufgebaut wurde und das Clientsystem das QUIT-Kommando übermittelt. In diesem Fall MUSS das Clientmodul mit „+OK“ Antwortcode antworten und die Verbindung mit dem Clientsystem schließen.</span></p></li>
    </ul><p><br></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16728">
   <p><b>KOM-LE-A_2039</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das Clientmodul MUSS die POP3-Verbindung mit dem POP3-Server aufrechterhalten. Das Schließen der Verbindung ist nur zulässig:</span></p>
    <ul>
     <li><p><span>Nachdem die Verbindung zwischen dem Clientmodul und dem Clientsystem</span> <span>geschlossen wird. In diesem Fall MUSS das Clientmodul die Verbindung mit dem POP3-Server schließen. Falls es vom Clientsystem erhaltene und dem POP3-Server noch nicht übertragene POP3-Kommandos gibt, MUSS das Clientmodul diese Kommandos dem POP3-Server übertragen und nur danach die Verbindung mit dem POP3-Server schließen.</span></p></li>
     <li><p><span>Wenn das Clientmodul innerhalb eines konfigurierbaren Timeouts keine neuen PoP3-Kommandos sendet. In diesem Fall MUSS das Clientmodul die Verbindung mit dem MTA schließen.</span></p></li>
    </ul><p><br></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_476">Nachdem das Clientsystem sich gegenüber dem POP3-Server erfolgreich authentifiziert hat, geht das Clientmodul in den PROXY-Zustand über. Anderenfalls bleibt das Clientmodul im CONNECT-Zustand.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16729">3.4.3 PROXY-Zustand</h4>
  <p id="polarion_477">Im PROXY-Zustand vermittelt das Clientmodul POP3-Meldungen und Antwortcodes zwischen dem Clientsystem und dem POP3-Server. Das Clientmodul bleibt in diesem Zustand bis das Clientsystem das RETR-Kommando sendet und der POP3-Server das Erhalten dieses Kommandos mit dem Antwortcode „+OK“ bestätigt. Das Clientmodul leitet den Antwortcode „+OK“ an das Clientsystem weiter und geht in den PROCESS-Zustand über.</p>
  <p id="polarion_478"> In diesem Zustand kann das Clientmodul vom Clientsystem das TOP-Kommando erhalten, das &lt;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">MsgID&gt;</span> und &lt;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">N&gt;</span> als Parameter hat. Es fordert den POP3-Server zur Übertragung des Headers und von &lt;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">N&gt;</span> Nachrichtenzeilen der durch &lt;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">MsgID&gt;</span> identifizierten Nachricht auf. Um sicherzustellen, dass das Clientmodul keine Teile einer verschlüsselten S/MIME-Nachricht bekommt, wird der Parameter &lt;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">N&gt;</span> vom Clientmodul immer auf 0 gesetzt. </p>
  <p id="polarion_479"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16730">
   <p><b>KOM-LE-A_2040</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS, nachdem das Authentifizierungsverfahren mit dem Clientsystem erfolgreich beendet ist, alle vom Clientsystem erhaltene</span><span>n</span><span> POP3</span><span>-Kommandos</span><span>, mit Ausnahme </span><span>des TOP-</span><span>Kommando</span><span>s, bzw. alle vom POP3-</span><span>Server erhaltene</span><span>n POP3-</span><span>Meldungen, mit Au</span><span>snahme von Inhalten vom E-M</span><span>ail-Nachrichten, ohne jegliche Veränderungen dem </span><span>POP3-</span><span>Server bzw. dem Clientsystem übermitteln. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16731">
   <p><b>KOM-LE-A_2041</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS, wenn </span><span>es</span><span> vom Clientsystem </span><span>ein</span><span> </span><span>TOP &lt;MsgID&gt; &lt;N&gt;</span><span> Kommando </span><span>mit </span><span>eine</span><span>m</span><span> von Null</span><span> abweichenden Parameter </span><span>&lt;N&gt; </span><span>erhält, den Wert des Parameters </span><span>&lt;N&gt; </span><span>auf Null setzen, bevor das Kommando dem POP3-Server übermittelt wird.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_483">Hinweis für Implementierung</p>
  <p id="polarion_484">Wegen eines Thunderbird-Bugs:</p>
  <p id="polarion_485"> Das getrennte Laden von Header und Body ist in Thunderbird nicht korrekt implementiert. Möglicher Bugfix im CM: Bei TOP 0 den Msg Header ändern: MIME Element(MIME-Version: 1.0) aus Header entfernen, dann klappt das nachladen.<br> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16732">3.4.4 PROCESS-Zustand</h4>
  <p id="polarion_486">Im PROZESS-Zustand nimmt das Clientmodul die Inhalte der vom POP3-Server abgerufenen KOM-LE-Nachricht entgegen, entschlüsselt die Nachricht, prüft deren Integrität und leitet die aufbereitete Client-Mail dem Clientsystem weiter. Im Erfolgsfall wird in die aufbereitete Client-Mail ein Vermerk hinzugefügt und das Clientsystem über das erfolgreiche Abholen der Nachricht informiert. Im Fehlerfall wird das Clientsystem mit dem entsprechenden Antwortcode und Fehlernachricht über den Fehler informiert.</p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16733">3.4.4.1 Empfang und Weiterleitung einer Nachricht</h5>
  <p id="polarion_487">Nachdem der POP3-Server das Erhalten des RETR-Kommandos mit dem Antwortcode „+OK“ bestätigt, erwartet das Clientmodul, dass der POP3-Server mit der Übertragung der Nachricht beginnt. Die Inhalte der Nachricht werden im Clientmodul zwischengespeichert. Wenn die Nachricht eine entsprechend dem KOM-LE-S/MIME-Profil geschützte Nachricht ist, bereitet das Clientmodul die erhaltene Nachricht auf und übermittelt sie anschließend dem Clientsystem. Wenn es keine KOM-LE-S/MIME-Nachricht ist, wird sie ohne jegliche Änderungen dem Clientsystem übermittelt.</p>
  <p id="polarion_488">Nachdem die Nachricht dem Clientsystem übermittelt wurde, löscht das Clientmodul die zwischengespeicherten Nachrichtinhalte und geht in den PROXY-Zustand zurück.</p>
  <p id="polarion_547"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-115849">
   <p><b>A_21236</b></p>
   <p>Das Clientmodul MUSS, nach dem Empfang der E-Mail vom Fachdienst, das im Header der äußeren Nachricht enthaltene Header-Element <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Return-Path,</span> vor der Weiterleitung an den E-Mail-Client des Empfängers, in den Header der entschlüsselten Mail an den Empfänger übernehmen.<span id="polarion-comment:250"></span> <b>&lt;=</b></p>
  </div>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-16734">3.4.4.2 Aufbereitung einer Nachricht</h5>
  <p id="polarion_489"> Das Clientmodul soll zwischen den KOM-LE S/MIME und anderen Nachrichten unterscheiden. Wenn die angekommene Nachricht eine KOM-LE-S/MIME-Nachricht ist, entschlüsselt das Clientmodul ihre Inhalte und führt die Prüfung ihrer Signatur durch. Die KOM-LE-S/MIME-Nachrichten sind anhand des <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KOM-LE-Version</span> Header-Elements erkennbar. Wenn die ankommende Nachricht keine KOM-LE-S/MIME-Nachricht ist (z.B. nicht signierte und nicht verschlüsselte Fehlernachrichten), soll sie ohne weitere Veränderungen dem Clientsystem übermittelt werden. </p>
  <p id="polarion_490"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-116870">
   <p><b>A_21390</b></p>
   <p>Zur Unterscheidung einer KOM-LE-S/MIME-Nachricht von einer anderen Nachricht MUSS das Clientmodul prüfen, ob das Header-Element <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KOM-LE-Version</span> in der äußeren Nachricht vorhanden ist. Wenn das Header-Element nicht gesetzt&nbsp;ist, MUSS das Clientmodul die Nachricht ohne weitere Veränderungen an das Clientsystem übermitteln. Wenn das Header-Element gesetzt ist, MUSS das Clientmodul die Nachricht wie eine KOM-LE-S/MIME-Nachricht behandeln.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125201">
   <p><b>A_21391-02</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Das Clientmodul MUSS prüfen, ob das Header-Element X-KOM-LE-Version in der äußeren Nachricht eine vom Clientmodul unterstützte Version enthält. Wenn das nicht der Fall ist, MUSS das Clientmodul den Nutzer mit einer E-Mail über den Fehlerfall informieren. Die Fehlernachricht entspricht einer multipart/mixed MIME-Nachricht. Die Originalnachricht MUSS als message/rfc822 MIME-Einheit in die Fehlernachricht eingepackt werden. Zusätzlich muss diese neue multipart/mixed MIME-Nachricht eine text/plain MIME-Einheit mit dem Fehlertext, "Das verwendete Clientmodul unterstützt die in der empfangenen Nachricht angegebene KIM-Version <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">&lt;KIMVersion&gt;</span> nicht." enthalten. Die orig-date, from, sender, reply-to, to und cc Header-Elemente der neuen multipart/mixed Nachricht werden aus der empfangenen Nachricht übernommen. Das subject Header-Element der neuen multipart/mixed Nachricht erhält den Wert „Die KIM-Version der empfangenen Nachricht wird nicht unterstützt“.</span><br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_829"></p>
  <p id="polarion_832"> Bei einer Nachricht mit dem Subject „<span style="font-size: 10pt;line-height: 1.5;">Die KIM-Version der empfangenen Nachricht wird nicht unterstützt</span>“ gibt es folgende Optionen: </p>
  <ul id="polarion_840"> 
   <li>Wenn die empfangene Nachricht vom Server gelöscht wurde, hat der Nutzer die Möglichkeit durch das Senden an die eigene E-Mail-Adresse und das anschließende Abholen über ein Clientmodul mit passender Version die Aufbereitung zu wiederholen.</li> 
   <li>Wenn die empfangene Nachricht nicht vom Server gelöscht wurde, wird beim nächsten Abholen dieser Nachricht die Aufbereitung wiederholt.</li> 
  </ul>
  <p id="polarion_844">Für die Entschlüsselung und die Signaturprüfung verwendet das Clientmodul die Dienste der TI-Plattform, die dem Clientmodul über Schnittstellen des Konnektors zur Verfügung gestellt werden.</p>
  <p id="polarion_845">Für die vereinfachte Darstellung wird im Folgenden ein Beispiel einer Fehlernachricht ohne die Originalnachricht dargestellt:</p>
  <p id="polarion_822"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;background-color: #FFFF99;"> </span> </p>
  <p id="polarion_124"></p>
  <p id="polarion_556"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: "Sender" &lt;sender@maildomain.de&gt;<br> To: &lt;empfaenger@maildomain.de&gt;<br> Message-Id: &lt;II8HEDLEUEU4.EG0B98QUZNPM2@STST-TEST&gt;<br> Subject: Die KIM-Version der empfangenen Nachricht wird nicht unterstützt<br> MIME-Version: 1.0<br> Content-Type: multipart/mixed; boundary="=-hDUtypluINBWKuVpu2reTw=="<br> X-KIM-Fehlermeldung: 4008<br> <br> --=-hDUtypluINBWKuVpu2reTw==<br> Content-Type: text/plain; charset=utf-8<br> Content-Transfer-Encoding: quoted-printable<br> <br> Das verwendete Clientmodul unterstützt die in der empfangenen<br> Nachricht angegebene KIM-Version [1.5] nicht.<br> Das verwendete Clientmodul unterstützt nur Nachrichten einer KIM-<br> Version [1.0].<br> <br> Es wird empfohlen, das verwendete Clientmodul zu aktualisieren!<br> Leiten Sie diese Mail an Ihre eigene KIM-E-Mail-Adresse weiter, um die <br> Nachrichtenverarbeitung beim nächsten Abruf der Nachricht zu <br> wiederholen.</span> </p>
  <h6 id="polarion_wiki macro name=module-workitem;params=id=ML-16735">3.4.4.2.1 Entschlüsselung</h6>
  <p id="polarion_491"> Für die Entschlüsselung der ankommenden Nachricht wird der private Schlüssel PrK.HCI.ENC bzw. Prk<span style="background-color: #FFFFFF;">.</span>HP.ENC verwendet, der dem Verschlüsselungszertifikat der Institution bzw. des Leistungserbringers zugeordnet ist. Der Zugriff auf die entsprechende Karte und die Entschlüsselung erfolgen über die Aufrufe der entsprechenden Operationen der Außenschnittstelle des Konnektors. Eine detaillierte Beschreibung erfolgt im Kapitel 3.8.4. </p>
  <p id="polarion_492"> Wenn die Nachricht für mehrere Empfänger verschlüsselt wurde, liegt es in der Verantwortung des Clientmoduls sicherzustellen, dass die Nachricht mit dem Schlüssel des den Abholvorgang auslösenden Nutzers entschlüsselt wird. Der erforderliche Schlüssel kann mit Hilfe des im KOM-LE-S/MIME-Profil beschriebenen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attributs im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">EnvelopedData</span> CMS-Objekt identifiziert werden. Das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">EnvelopedData</span> CMS-Objekt enthält die verschlüsselten Inhalte und im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attribut werden die Zusammenhänge zwischen den E-Mail-Adressen der Empfänger und den verwendeten Verschlüsselungszertifikaten definiert. Das ermöglicht die Identifizierung des erforderlichen Verschlüsselungszertifikats, dessen zugehöriger privater Schlüssel für die Entschlüsselung verwendet werden soll. Dadurch kann vermieden werden, dass die Nachricht mit dem freigeschalteten Schlüssel eines Empfängers entschlüsselt wird, der nicht derjenige ist, der den Abholvorgang ausgelöst hat. Das Clientmodul geht davon aus, dass der Nutzername, der für die POP3-Authentifizierung verwendet wurde, der E-Mail-Adresse des Empfängers entspricht und benutzt ihn, um den entsprechenden <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">RecipientIdentifier</span> aus dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attribut auszulesen. Wenn es keinen <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">RecipientIdentifier</span> gibt, der dem POP3-Nutzernamen des Empfängers entspricht, wird die Entschlüsselung als fehlgeschlagen betrachtet. </p>
  <p id="polarion_493"> Wenn die Entschlüsselung fehlschlägt, wird dem Clientsystem die verschlüsselte Nachricht im Anhang einer Fehlernachricht übermittelt. Hierzu wird die angekommene KOM-LE-S/MIME-Nachricht als eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">message/rfc822</span> MIME-Einheit in eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> MIME-Nachricht verpackt, die zusätzlich eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit mit der Fehlermeldung enthält. Die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">orig-date</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">sender</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">reply-to</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">to</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cc</span> Header-Elemente der neuen Nachricht werden aus der ursprünglichen Nachricht übernommen. Der Betreff der neuen Nachricht enthält die Zeichenkette „Die Nachricht konnte nicht entschlüsselt werden“. </p>
  <p id="polarion_494"> <span style="text-decoration: underline;">Beispiel</span>: </p>
  <p id="polarion_495">Kann eine Nachricht auf Grund des fehlenden HBA mit dem erforderlichen privaten Schlüssel nicht im Clientmodul entschlüsselt werden, wird die Nachricht wie folgt dem Clientsystem übermittelt:</p>
  <p id="polarion_496"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">MIME-Version: 1.0</span> </p>
  <p id="polarion_497"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: multipart/mixed; boundary="unique-boundary-1"</span> </p>
  <p id="polarion_498"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Subject: Die Nachricht konnte nicht entschlüsselt werden</span> </p>
  <p id="polarion_499"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Date: Fri, 9 Feb 2012 12:07:17 +0100</span> </p>
  <p id="polarion_500"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: mustermann@komle.de</span> </p>
  <p id="polarion_501"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">To: musterfrau@komle.de</span> </p>
  <p id="polarion_181"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KIM-Fehlermeldung: cmgerr_4</span> </p>
  <p id="polarion_502"></p>
  <p id="polarion_503"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">This is a multi-part message in MIME format.</span> </p>
  <p id="polarion_504"></p>
  <p id="polarion_505"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_506"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: text/plain;&nbsp;&nbsp;&nbsp;&nbsp;charset="iso-8859-1"</span> </p>
  <p id="polarion_507"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: quoted-printable</span> </p>
  <p id="polarion_508"></p>
  <p id="polarion_509"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Der f=FCr die Entschl=FCsselung der Nachricht ben=F6tigte Schl=FCssel =</span> </p>
  <p id="polarion_510"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">wurde nicht gefunden. =DCberpr=FCfen Sie ob die entsprechende Karte =</span> </p>
  <p id="polarion_511"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">gesteckt ist und leiten Sie diese Nachricht an Ihre eigene Email Adresse =</span> </p>
  <p id="polarion_512"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">(musterfrau@komle.de) weiter. Beim n=E4chsten Abholen wird der =</span> </p>
  <p id="polarion_513"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Entschl=FCsselungsvorgang wiederholt.</span> </p>
  <p id="polarion_514"></p>
  <p id="polarion_515"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_516"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: message/rfc822&nbsp;&nbsp;&nbsp;&nbsp;</span> </p>
  <p id="polarion_517"></p>
  <p id="polarion_518"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KOM-LE-Version: 1.0</span> </p>
  <p id="polarion_519"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">MIME-Version: 1.0</span> </p>
  <p id="polarion_520"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: application/pkcs7-mime; name="smime.p7m"; name="smime.p7m"</span> </p>
  <p id="polarion_521"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: base64</span> </p>
  <p id="polarion_522"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Disposition: attachment;&nbsp;&nbsp;&nbsp;&nbsp;filename="smime.p7m"</span> </p>
  <p id="polarion_523"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Subject: KOM-LE Nachricht</span> </p>
  <p id="polarion_524"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Date: Fri, 9 Feb 2012 12:07:17 +0100</span> </p>
  <p id="polarion_525"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: mustermann@komle.de</span> </p>
  <p id="polarion_526"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">To:</span> <a href="mailto:musterfrau@komle.de" target="_blank" class="descriptionLink">musterfrau@komle.de</a> </p>
  <p id="polarion_527"></p>
  <p id="polarion_528"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">567GhIGfHfYT6ghyHhHUujpfyF4f8HHGTrfvhJhjH776tbB9HG4VQbnj7</span> </p>
  <p id="polarion_529"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">77n8HHGT9HG4VQpfyF467GhIGfHfYT6rfvbnj756tbBghyHhHUujhJhjH</span> </p>
  <p id="polarion_530"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">HUujhJh4VQpfyF467GhIGfHfYGTrfvbnjT6jH7756tbB9H7n8HHGghyHh</span> </p>
  <p id="polarion_531"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">...</span> </p>
  <p id="polarion_532"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">9efmAAAAAAAAAAAAAA==</span> </p>
  <p id="polarion_534"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1--</span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16736">
   <p><b>KOM-LE-A_2042</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS eine vom </span><span>POP3-</span><span>Server erhaltene </span><span>und </span><span>dem KOM-LE</span><span>-</span><span>S/MIME</span><span>-</span><span>Profil entsprechende E</span><span>-M</span><span>ail entschlüsseln. </span><span>Nachrichten, die nicht dem KOM-LE-S/MIME-Profil entsprechen, sind ohne Veränderung an das Clientsystem&nbsp;&nbsp;weiterzuleiten. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16737">
   <p><b>KOM-LE-A_2043</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS bei der Entschlüsselung das </span><span>recipient-emails</span><span> Attribut des </span><span>EnvelopedData</span><span>-</span><span>CMS</span><span>-</span><span>Objekts beachten</span><span>, um</span><span> die Nachricht mit dem Schlüssel des Nutzers, der </span><span>den</span><span> Abholvorgang ausgelöst hat, </span><span>zu entschlüsseln</span><span>.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-111185">
   <p><b>A_20628</b></p>
   <p>Das Clientmodul MUSS nach erfolgreicher Entschlüsselung des EnvelopedData-CMS-Objekts das <span style="font-size: 10pt;line-height: 1.5;">received-Header</span>-Attribut <span style="font-size: 10pt;line-height: 1.5;">in den Header der entschlüsselten Nachricht übernehmen.</span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16738">
   <p><b>KOM-LE-A_2044</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS den v</span><span>om Clientsystem erhaltenen POP3-</span><span>Username</span><span>n</span><span> (ohne den #server:port#... Teil) als die E</span><span>-Mail-</span><span>Adresse des den Abholvorgang aus</span><span>lösend</span><span>en Nutzer</span><span>s</span><span> betrachten. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16739">
   <p><b>KOM-LE-A_2045</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul DARF </span><span>für die Entschlüsselung einer Nachricht </span><span>Schlüssel NICH</span><span>T</span><span> </span><span>verwenden, wenn sie von anderen</span><span> </span><span>Nutzern stammen als von dem der den </span><span>Abholvorgang </span><span>ausgelöst hat</span><span>.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-109678">
   <p><b>KOM-LE-A_2179-01</b></p>
   <p>Das Clientmodul MUSS bei erfolgreicher Entschlüsselung der KOM-LE-Nachricht den Vermerk „Die Nachricht wurde entschlüsselt.“ an den Text der Nachricht anhängen. Es ist dabei das Format des TextParts zu beachten (<span style="font-size: 11pt;line-height: 1.5;">mediatype text/html oder text/plain) und der Vermerk diesem Format anzupassen.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_732"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16741">
   <p><b>KOM-LE-A_2046</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS eine empfangene, dem KOM-LE</span><span>-</span><span>S/MIME</span><span>-</span><span>Profil entsprechende Nachricht, die </span><span>z.B. </span><span>auf</span><span> Grund des</span><span> fehlenden Schlüssel</span><span>s</span><span> nicht entschlüsselt werden </span><span>kann</span><span>, als eine </span><span>message/rfc822</span><span> MIME</span><span>-</span><span>Einheit in einer </span><span>neuen </span><span>multipart/mixed</span><span> MIME</span><span>-</span><span>Nachricht</span><span> dem Clientsystem übermitteln. Zusätzlich muss diese neue </span><span>multipart/mixed</span><span> MIME</span><span>-</span><span>Nachricht</span><span> eine </span><span>text/plain</span><span> MIME-Einheit mit dem Fehlertext</span><span> </span><span>enthalten. Die </span><span>orig-date</span><span>, </span><span>from</span><span>, </span><span>sender</span><span>, </span><span>reply-to</span><span>, </span><span>to</span><span> und</span><span> </span><span>cc</span><span> </span><span>Header</span><span>-E</span><span>lemente</span><span> der neuen </span><span>multipart/mixed</span><span> </span><span>Nachricht werden aus </span><span>der </span><span>empfangenen</span><span> Nachricht übernommen</span><span>. </span><span>D</span><span>as</span><span> </span><span>subject</span><span> Header</span><span>-E</span><span>lement der neuen</span><span> </span><span>multipart/mixed</span><span> Nachricht </span><span>erhält</span><span> den</span><span> Wert</span><span> „Die Nachricht kon</span><span>nte nicht entschlüsselt werden“.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_541">Bei einer Nachricht mit dem Subject „Die Nachricht konnte nicht entschlüsselt werden“ gibt es folgende Optionen:</p>
  <ul id="polarion_183"> 
   <li>Wenn die empfangene Nachricht vom Server gelöscht wurde, hat der Nutzer die Möglichkeit durch das Senden an die eigene E-Mail-Adresse und das anschließende Abholen die Aufbereitung zu wiederholen.</li> 
   <li>Wenn die empfangene Nachricht nicht vom Server gelöscht wurde, wird beim nächsten Abholen dieser Nachricht die Aufbereitung wiederholt.</li> 
  </ul>
  <p id="polarion_542">Tabelle Tab_Fehlertext_Entschl enthält die Fehlertexte, die in die Nachricht eingeführt werden, wenn die Entschlüsselung nicht durchgeführt werden konnte.</p>
  <p id="polarion_180"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">#</span>: Tab_Fehlertext_Entschl Fehlertexte für Entschlüsselungsfehler </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=5" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 22px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;">ID*</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 334px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Bedingung</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 365px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Fehlertexte</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 22px;height: 33px;border: 1px solid #CCCCCC;padding: 5px;">00</td> 
     <td style="text-align: left;vertical-align: top;width: 334px;height: 33px;border: 1px solid #CCCCCC;padding: 5px;">Die KOM-LE-Nachricht wurde erfolgreich entschlüsselt.</td> 
     <td style="text-align: left;vertical-align: top;width: 365px;height: 33px;border: 1px solid #CCCCCC;padding: 5px;">Die KOM-LE-Nachricht wurde erfolgreich entschlüsselt.</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 22px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;">01</td> 
     <td style="text-align: left;vertical-align: top;width: 334px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die KOM-LE-Nachricht konnte auf Grund eines nicht verfügbaren Schlüssels nicht entschlüsselt werden.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 365px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Der für die Entschlüsselung der Nachricht benötigte Schlüssel wurde nicht gefunden. Überprüfen Sie ob die entsprechende Karte gesteckt ist und leiten Sie diese Nachricht an Ihre eigene E-Mail-Adresse (&lt;Email Adresse&gt;) weiter. Beim nächsten Abholen wird der Entschlüsselungsvorgang wiederholt.</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 22px;height: 79.6px;border: 1px solid #CCCCCC;padding: 5px;">02</td> 
     <td style="text-align: left;vertical-align: top;width: 334px;height: 79.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die KOM-LE-Nachricht konnte aufgrund des falschen Formats nicht entschlüsselt werden (z.B. enthält die Nachricht das X-KOM-LE-Version Header-Element, entspricht aber nicht dem KOM-LE-S/MIME-Profil).</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 365px;height: 79.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Nachricht wurde als eine verschlüsselte KIM-Nachricht gekennzeichnet, konnte aber auf Grund des falschen Formats nicht entschlüsselt werden. Die Verschlüsselte Nachricht befindet sich im Anhang. Bitte kontaktieren Sie den Absender der Nachricht.</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 22px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;">03</td> 
     <td style="text-align: left;vertical-align: top;width: 334px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Der Konnektor steht für die Entschlüsselung nicht zur Verfügung.</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 365px;height: 99.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Die Entschlüsselung konnte nicht erfolgen, weil der Konnektor nicht antwortet. Stellen Sie sicher, dass der Konnektor wieder zur Verfügung steht und leiten Sie diese Nachricht an Ihre eigene E-Mail-Adresse (&lt;Email Adresse&gt;) weiter. Beim nächsten Abholen wird der Entschlüsselungsvorgang wiederholt.</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_122"> <span style="font-style: italic;">*) Hinweis: Die in der Tabelle enthaltene ID des jeweiligen Prüfvermerks kann gemäß [KOM-LE-A_2047] als ID dem Fehlertext der MIME Fehlernachricht hinzugefügt werden und muss in das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-DecryptionResult</span> Header-Element aufgenommen&nbsp;werden, um damit eine spätere automatische Auswertung zu ermöglichen.</span><br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133801">
   <p><b>KOM-LE-A_2047-02</b></p>
   <p>Das Clientmodul MUSS bei fehlgeschlagener Entschlüsselung entsprechend der jeweiligen Bedingung den in Tabelle "Tab_Fehlertext_Entschl" definierten Fehlertexte in die <span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace;line-height: 1.5;">text/plain</span> MIME-Einheit der <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> MIME-Fehlernachricht aufnehmen. <span style="font-size: 10pt;line-height: 1.5;">Zusätzlich MUSS das Clientmodul ein Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-DecryptionResult</span> mit der dazugehörigen ID aus der Tabelle&nbsp;</span><span style="font-size: 10pt;color: #172B4D;line-height: 1.5;">"Tab_Fehlertext_Entschl"</span> <span style="font-size: 10pt;line-height: 1.5;">Fehlercode befüllen.</span> <span style="font-size: 10pt;line-height: 1.5;">Treten im Entschlüsselungsprozess Fehler auf, die nicht in der Tabelle "Tab_Fehlertext_Entschl" definierte sind, MUSS das Clientmodul für diese Fehler das</span> Mail-Header-Attribut <span style="font-size: 10pt;line-height: 1.5;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-DecryptionResult</span> mit einem herstellerspezifischen Fehlercode befüllen, welcher mit "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X</span>" beginnt.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_774"></p>
  <p id="polarion_775"> <span style="font-style: italic;">Hinweis: <span style="font-size: 10pt;line-height: 1.5;">Sollten mehrere negative Ergebnisse bei der Entschlüsselung einer KOM-LE Nachricht hervorgehen KANN das </span>Mail-Header-Attribut<span style="font-size: 10pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;"> X-KIM-DecryptionResult </span>mehrmals verwendet werden.</span><br> <br> Beispiel:<br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-DecryptionResult: 01<br> X-KIM-DecryptionResult: 02<br> X-KIM-DecryptionResult: X99</span> </p>
  <p id="polarion_778"></p>
  <h6 id="polarion_wiki macro name=module-workitem;params=id=ML-16743">3.4.4.2.2 Integritätsprüfung</h6>
  <p id="polarion_546"> Nachdem die angekommene Nachricht erfolgreich entschlüsselt wurde, prüft das Clientmodul ihre Integrität. Dabei werden die digitale Signatur der Nachricht, der Zertifizierungspfad für das Signaturzertifikat und die Integrität des <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attributs geprüft. Für die Signaturprüfung der Nachricht wird das im CMS-Objekt mitgelieferte C.HCI.OSIG-Institutionszertifikat benutzt. Die Prüfung der Signatur erfolgt über die Aufrufe der entsprechenden Operationen der Außenschnittstelle des Konnektors. Eine detaillierte Beschreibung erfolgt in Kapitel 3.8.2. </p>
  <p id="polarion_766"> <span style="font-size: 10pt;line-height: 1.5;">In der Tabelle "Tab_Verm_Sig_Prüf"&nbsp;werden die Prüfergebnisse mit den entsprechenden Fehlercodes sowie die Vermerke zusammengefasst. Die Prüfergebnisse entsprechen dem Gesamtergebnis für die Prüfung einer nicht qualifizierten Dokumentensignatur (nonQES) für die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">VerifyDocument </span><span style="font-family: Arial, Helvetica;">des Konnektors</span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> </span>gemäß [gemSpec_KON#TAB_KON_754] und [gemSpec_KON#TAB_KON_124].</span> </p>
  <p id="polarion_768"> Wenn die Integritätsprüfung der entschlüsselten KOM-LE-Nachricht fehlschlägt, dann wird eine Fehlernachricht gemäß [A_23165] generiert und das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-IntegrityCheckResult</span> Header-Element mit der jeweiligen ID gemäß der Tabelle "Tab_Verm_Sig_Prüf" befüllt. </p>
  <p id="polarion_780"></p>
  <p id="polarion_769" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">7</span>: Tab_Verm_Sig_Prüf Vermerke mit Ergebnissen der Signaturprüfung </p>
  <table id="polarion_wiki macro name=table;params=noPageBreak=yes|width=100%|uid=770" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">ID*</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Prüfergebnis</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Fehlercode</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Ergebnis</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Vermerk</th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">01</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: Arial, Helvetica;">true</span></td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: Arial, Helvetica;">-</span></td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die Signatur der Nachricht wurde erfolgreich geprüft.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die Signatur wurde erfolgreich geprüft.</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">02</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;font-family: Arial, Helvetica;line-height: 1.5;">4115 </span></td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die Integrität der Nachricht wurde verletzt.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">03</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">4253</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die digitale Signatur ist nicht vorhanden.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">04</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">4112</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die digitale Signatur konnte aufgrund des falschen Formats nicht geprüft werden.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">05</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">4206</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Der Zertifizierungspfad des Signaturzertifikats kann nicht validiert werden.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">06</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">[Fehlercode]</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die digitale Signatur konnte aufgrund eines nicht zuordenbaren Fehlercodes des Konnektors nicht geprüft werden. <br> </td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">- <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">07</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">true</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">4264</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die digitale Signatur ist mathematisch korrekt, der Zertifikatsstatus des Signaturzertifikats konnte aber nicht geprüft werden.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die Signatur wurde erfolgreich geprüft.&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">08</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die digitale Signatur ist mathematisch korrekt und der Zertifikatsstatus des Signaturzertifikats konnte erfolgreich geprüft werden, aber beim Vergleich der Header-Elemente from, sender, reply-to, to und cc der äußeren Nachricht mit denen der inneren Nachricht wurden Abweichungen festgestellt.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 30px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">09</td> 
     <td style="text-align: left;vertical-align: top;width: 149px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">false&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 89px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-</td> 
     <td style="text-align: left;vertical-align: top;width: 192px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">Die digitale Signatur ist mathematisch korrekt und der Zertifikatsstatus des Signaturzertifikats konnte erfolgreich geprüft werden, aber das recipient-emails-Attribut aus signerInfos enthält nicht die gleichen Werte wie das recipient-emails-Attribut aus dem enveloped-data CMS-Objekt.</td> 
     <td style="text-align: left;vertical-align: top;width: 239px;height: 12px;border: 1px solid #CCCCCC;padding: 5px;">-&nbsp;</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_771"></p>
  <p id="polarion_552"> Es folgt ein Beispiel einer entschlüsselten <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">multipart/mixed</span> Nachricht deren Signatur erfolgreich geprüft wurde. Die Nachricht enthält eine <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> Einheit im Nachrichtentext und einen Arztbrief als PDF-Anhang. </p>
  <p id="polarion_823"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Date: Fri, 9 Feb 2012 12:07:17 +0100</span> </p>
  <p id="polarion_557"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">MIME-Version: 1.0</span> </p>
  <p id="polarion_558"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">From: mustermann@komle.de</span> </p>
  <p id="polarion_559"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">To: musterfrau@komle.de</span> </p>
  <p id="polarion_560"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Subject: Arztbrief </span> </p>
  <p id="polarion_561"></p>
  <p id="polarion_761"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: multipart/mixed;</span> </p>
  <p id="polarion_562"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">X-KIM-Dienstkennung: Arztbrief;VHitG-Versand;V1.2<br> </span><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;color: #242424;line-height: 1.5;">X-KIM-CMVersion: [VendorID]_2.1.2-8<br> X-KIM-PTVersion: 1.5.0-2<br> X-KIM-KONVersion: &lt;secunet konnektor 2.0.0&gt;&lt;Konnektor PTV4Plus&gt;&lt;4.80.3&gt;&lt;2.0.0&gt;&lt;4.10.1&gt;<br> X-KIM-Sendersystem: Beispiel-PVS;V2.81</span> </p>
  <p id="polarion_383"></p>
  <p id="polarion_765"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">boundary="unique-boundary-1"</span><br> </p>
  <p id="polarion_564"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">This is a multi-part message in MIME format.</span> </p>
  <p id="polarion_565"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_566"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: text/plain;&nbsp;&nbsp;&nbsp;&nbsp;charset="iso-8859-1"</span> </p>
  <p id="polarion_567"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: 8bit</span> </p>
  <p id="polarion_568"></p>
  <p id="polarion_569"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Sehr Geehrte Frau Dr. Musterfrau,</span> </p>
  <p id="polarion_570"></p>
  <p id="polarion_571"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">hiermit sende ich Ihnen den Arztbrief f=FCr Herrn H. Muster.</span> </p>
  <p id="polarion_572"></p>
  <p id="polarion_573"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Mit Freundlichen Gr=FC=DFen</span> </p>
  <p id="polarion_574"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Dr. med. Mustermann</span> </p>
  <p id="polarion_575"></p>
  <p id="polarion_576"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Arzt f=FCr Allgemeinmedizin</span> </p>
  <p id="polarion_577"></p>
  <p id="polarion_578"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">---------------------------------------------</span> </p>
  <p id="polarion_579"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Die Nachricht wurde entschl=FCsselt</span> </p>
  <p id="polarion_580"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Die Signatur wurde erfolgreich gepr=FCft.</span> </p>
  <p id="polarion_581"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1</span> </p>
  <p id="polarion_582"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Type: application/pdf;</span> </p>
  <p id="polarion_583"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">name="Arztbrief_Muster.pdf"</span> </p>
  <p id="polarion_584"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Transfer-Encoding: base64</span> </p>
  <p id="polarion_585"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Disposition: attachment;</span> </p>
  <p id="polarion_848"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">Content-Description: eAB-PDF-signed</span> </p>
  <p id="polarion_586"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">filename="Arztbrief_Muster.pdf"</span> </p>
  <p id="polarion_587"></p>
  <p id="polarion_588"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">JVBERi0xLjQNCiXDpMO8w7bDnw0KMiAwIG9iag0KPDwgL0xlbmd0aCAzIDAgUg0KICAgL0Zp</span> </p>
  <p id="polarion_589"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">bHRlciAvRmxhdGVEZWNvZGUNCj4+DQpzdHJlYW0NCnicrVhda1sxDH0P5D/4uQ+3lvxxfaEM</span> </p>
  <p id="polarion_590"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">...</span> </p>
  <p id="polarion_591"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">OEJCQUExQzY0NDU+IF0NCj4+DQpzdGFydHhyZWYNCjIyNDU3Mg0KJSVFT0YNCg==</span> </p>
  <p id="polarion_592"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">--unique-boundary-1--</span><br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125639">
   <p><b>KOM-LE-A_2048-01</b></p>
   <p>Das Clientmodul MUSS die Integrität der KOM-LE-Nachricht prüfen. Dabei müssen die digitale Signatur selbst, der Zertifizierungspfad für das verwendete Signaturzertifikat, die Integrität des Headers der äußeren Nachricht und die Integrität des <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attributs geprüft werden.<br> Bei der Prüfung der Integrität des Headers der äußeren Nachricht sind die Header-Elemente <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">from</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">sender</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">reply-to</span>, <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">to</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cc</span> mit denen der signierten inneren Nachricht zu vergleichen. <br> Bei der Prüfung der Integrität des <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attributs sind die Werte dieses Attributs aus <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">signerInfos</span> und aus dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">enveloped-data</span> CMS-Objekt miteinander zu vergleichen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_857"> <span style="font-style: italic;">Hinweis: Für lange Header-Elemente (z. B. bei <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">reply-to</span>) muss "folding" gemäß [RFC822] unterstützt werden.</span> </p>
  <p id="polarion_860"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133906">
   <p><b>KOM-LE-A_2050-05</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Das Clientmodul MUSS nach einer Integritätsprüfung einer KOM-LE-Nachricht mit positivem Prüfergebnis (true) den in Tabelle "Tab_Verm_Sig_Prüf" definierten Vermerk an den Nachrichtentext der KOM-LE-Nachricht anfügen. Es ist dabei das Format des TextParts zu beachten (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">mediatype text/html</span> oder <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span>) und der Vermerk diesem Format anzupassen. Zusätzlich MUSS das Clientmodul ein Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-IntegrityCheckResult</span> mit der dazugehörigen ID aus der Tabelle "Tab_Verm_Sig_Prüf" befüllen.</span> <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133885">
   <p><b>A_23165</b></p>
   <p>Das Clientmodul MUSS nach einer fehlgeschlagenen Integritätsprüfung den Mail-Body der entschlüsselten originalen Nachricht mit dem folgenden Inhalt als <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">text/plain</span> MIME-Einheit ersetzen und an den Empfänger weiterleiten:<br> "<span style="font-style: italic;">Beim Empfang dieser KIM-Nachricht wurde eine Sicherheitsverletzung erkannt. Dies kann eine technisches Ursache haben oder auf eine missbräuchliche Nutzung des KIM-Dienstes hinweisen. Zu Ihrem Schutz wurde der Inhalt dieser Nachricht durch diesen Text ausgetauscht. Bitte kontaktieren Sie den Absender und/oder Ihren Administrator."<br> <br> </span><span style="font-style: normal;">Alternativ MUSS es möglich sein, über eine Konfiguration im Clientmodul, die entschlüsselte (originale) Nachricht trotz fehlgeschlagener Integritätsprüfung und Beachtung nachfolgender Anforderungen dem Empfänger weiterzuleiten. </span><br> <br> Zusätzlich MUSS das Clientmodul das Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-IntegrityCheckResult</span> mit der dazugehörigen ID aus der Tabelle "Tab_Verm_Sig_Prüf" befüllen. Kommt es bei der Integritätsprüfung zu Fehlern, die nicht in der Tabelle "Tab_Verm_Sig_Prüf" definierte sind, MUSS das Clientmodul für diese Fehler das Mail-Header-Attribut <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-IntegrityCheckResult</span> mit einem herstellerspezifischen Fehlercode befüllen, welcher mit "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X</span>" beginnt.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_481"></p>
  <p id="polarion_801"> <span style="font-style: italic;">Hinweis: </span> </p>
  <ul id="polarion_803"> 
   <li><span style="font-style: italic;">Es muss sichergestellt werden, dass das Verhalten bei fehlgeschlagener Integritätsprüfung konfigurierbar ist. Dies gewährleistet, dass z. B. keine durch die Krankenkasse beim Leistungserbringer bestätigte eAU (signalisiert durch eine DSN) verworfen wird.</span></li> 
   <li><span style="font-style: italic;">Sollten mehrere negative Ergebnisse aus der Integritätsprüfung hervorgehen KANN das Mail-Header-Attribut X-KIM-IntegrityCheckResult mehrmals verwendet werden.</span><br> <br> Beispiel:<br> <span style="font-weight: bold;font-size: 12pt;line-height: 1.5;"> </span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-IntegrityCheckResult: 08<br> X-KIM-IntegrityCheckResult: X99</span></li> 
  </ul>
  <p id="polarion_790"></p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16748">3.4.5 Beispiele</h4>
  <p id="polarion_610">Das Clientsystem (C) verbindet sich mit dem Clientmodul (M) und holt vom POP3-Server (S) eine Nachricht (im Beispiel werden auch die Zustände des Clientmoduls dargestellt):</p>
  <p id="polarion_611"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientsystem öffnet eine mit TLS geschützte Verbindung mit dem Clientmodul&gt;</span> </p>
  <p id="polarion_612"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;CONNECT Zustand&gt;</span> </p>
  <p id="polarion_613"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK KOM-LE Clientmodul POP3</span> </p>
  <p id="polarion_614"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: CAPA</span> </p>
  <p id="polarion_615"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK Capability list follows</span> </p>
  <p id="polarion_616"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: TOP</span> </p>
  <p id="polarion_617"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: USER</span> </p>
  <p id="polarion_618"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: SASL PLAIN</span> </p>
  <p id="polarion_619"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: UIDL</span> </p>
  <p id="polarion_620"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: .</span> </p>
  <p id="polarion_621"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: USER</span> <a href="mailto:mustermann@komle.de#pop.komle.de:110" target="_blank" class="descriptionLink">mustermann@komle.de#pop.komle.de:110</a><span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">#1#KOM-LE#7</span> </p>
  <p id="polarion_622"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK</span> </p>
  <p id="polarion_623"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: PASS password</span> </p>
  <p id="polarion_624"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul öffnet eine mit TLS geschützte Verbindung mit dem POP3 Server&gt;</span> </p>
  <p id="polarion_625"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK POP Server Ready</span> </p>
  <p id="polarion_626"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: CAPA</span> </p>
  <p id="polarion_627"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK Capability list follows</span> </p>
  <p id="polarion_628"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: TOP</span> </p>
  <p id="polarion_629"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: USER</span> </p>
  <p id="polarion_630"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: SASL PLAIN CRAM-MD5</span> </p>
  <p id="polarion_631"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: UIDL</span> </p>
  <p id="polarion_632"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: RESP-CODES</span> </p>
  <p id="polarion_633"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: .</span> </p>
  <p id="polarion_634"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: USER</span> <a href="mailto:mustermann@komle.de" target="_blank" class="descriptionLink">mustermann@komle.de</a> </p>
  <p id="polarion_635"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK</span> </p>
  <p id="polarion_636"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: PASS password</span> </p>
  <p id="polarion_637"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK Maildrop ready</span> </p>
  <p id="polarion_638"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;PROXY Zustand&gt;</span> </p>
  <p id="polarion_639"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK Maildrop ready</span> </p>
  <p id="polarion_640"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: STAT</span> </p>
  <p id="polarion_641"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: STAT</span> </p>
  <p id="polarion_642"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK 1 13950</span> </p>
  <p id="polarion_643"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK 1 13950</span> </p>
  <p id="polarion_644"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: LIST</span> </p>
  <p id="polarion_645"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: LIST</span> </p>
  <p id="polarion_646"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK</span> </p>
  <p id="polarion_647"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK</span> </p>
  <p id="polarion_648"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 1 13950</span> </p>
  <p id="polarion_649"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 1 13950</span> </p>
  <p id="polarion_650"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: .</span> </p>
  <p id="polarion_651"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: .</span> </p>
  <p id="polarion_652"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: UIDL</span> </p>
  <p id="polarion_653"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: UIDL</span> </p>
  <p id="polarion_654"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK</span> </p>
  <p id="polarion_655"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK</span> </p>
  <p id="polarion_656"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 1 01SDF8-1RiSd50vfv-00FGJN</span> </p>
  <p id="polarion_657"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 1 01SDF8-1RiSd50vfv-00FGJN</span> </p>
  <p id="polarion_658"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: .</span> </p>
  <p id="polarion_659"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: .</span> </p>
  <p id="polarion_660"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: RETR 1</span> </p>
  <p id="polarion_661"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: RETR 1</span> </p>
  <p id="polarion_662"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK</span> </p>
  <p id="polarion_663"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK</span> </p>
  <p id="polarion_664"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;PROCESS Zustand&gt;</span> </p>
  <p id="polarion_665"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: &lt;Inhalt der verschlüsselten KOM-LE Nachricht&gt;</span> </p>
  <p id="polarion_666"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: .</span> </p>
  <p id="polarion_667"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;die Nachricht wird im Clientmodul aufbereitet&gt;</span> </p>
  <p id="polarion_668"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: &lt;Inhalt der KOM-LE Nachricht&gt;</span> </p>
  <p id="polarion_669"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: .</span> </p>
  <p id="polarion_670"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;PROXY Zustand&gt;</span> </p>
  <p id="polarion_671"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: QUIT</span> </p>
  <p id="polarion_672"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: QUIT</span> </p>
  <p id="polarion_673"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK</span> </p>
  <p id="polarion_674"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S:&nbsp;&nbsp;&nbsp;&nbsp;&lt;der POP3 Server schließt die Verbindung mit dem Clientmodul&gt;</span> </p>
  <p id="polarion_675"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: +OK</span> </p>
  <p id="polarion_676"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;das Clientmodul schließt die Verbindung mit dem Clientsystem&gt;</span> </p>
  <p id="polarion_677">Während des Löschens einer Nachricht wird die Verbindung zwischen dem Clientmodul und dem POP3-Server abgebrochen:</p>
  <p id="polarion_678"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">...</span> </p>
  <p id="polarion_679"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: UIDL</span> </p>
  <p id="polarion_680"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: UIDL</span> </p>
  <p id="polarion_681"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: +OK</span> </p>
  <p id="polarion_682"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: +OK</span> </p>
  <p id="polarion_683"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: 1 01SDF8-1RiSd50vfv-00FGJN</span> </p>
  <p id="polarion_684"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: 1 01SDF8-1RiSd50vfv-00FGJN</span> </p>
  <p id="polarion_685"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">S-&gt;M: .</span> </p>
  <p id="polarion_686"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;C: .</span> </p>
  <p id="polarion_687"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C-&gt;M: DELE 1</span> </p>
  <p id="polarion_688"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">C:&nbsp;&nbsp;&nbsp;&nbsp;&lt;die Verbindung zwischen dem Clientmodul und dem Clientsystem wird abgebrochen&gt;</span> </p>
  <p id="polarion_689"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M-&gt;S: DELE 1</span> </p>
  <p id="polarion_690"> <span style="font-size: 9pt;font-family: 'Courier New', Courier, monospace, HanWangKanTan;line-height: 1.5;">M:&nbsp;&nbsp;&nbsp;&nbsp;&lt;die Verbindung zwischen dem Clientmodul und dem POP3 Server wird geschlossen&gt;</span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16749">3.5 Übermittlung von Kontaktdaten</h3>
  <p id="polarion_691">Ein KOM-LE-Nutzer soll die Möglichkeit haben in seinem Clientsystem die Suche nach den E-Mail-Adressen der Empfänger seiner KOM-LE-Nachrichten durchzuführen. Die TI-Plattform stellt einen Verzeichnisdienst zur Verfügung, der unter anderem Einträge mit Kontaktdaten von KOM-LE-Nutzern enthält. Der Verzeichnisdienst kann über LDAP abgefragt werden und kann somit als Adressbuch für KOM-LE benutzt werden. Eine detaillierte Beschreibung des Verzeichnisdienstes der TI-Plattform befindet sich in [gemSpec_VZD]. Um LDAP-Anfragen gegenüber dem Verzeichnisdienst durchzuführen, fungiert der Konnektor als LDAP-Proxy wie in [gemSpec_Kon] beschrieben.</p>
  <p id="polarion_692">Der Verzeichnisdienst kann direkt von Clientsystemen, die die entsprechenden LDAP-Suchanfragen generieren, angefragt werden. Das LDAP-Schema des Verzeichnisdienstes wird in [gemSpec_VZD] beschrieben.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-103943">3.6 Übermittlung von E-Mail-Kategorien</h3>
  <p id="polarion_538"> <span style="font-size: 10pt;line-height: 1.5;">Das Clientmodul soll die Kategorisierung von versendeten E-Mails ermöglichen. Zusätzlich zu den für den Versand einer gültigen E-Mail notwendigen Header-Feldern wird ein weiteres Attribut im Header eingefügt und mit der Information befüllt, welche der verwendete E-Mail-Client liefert.</span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-112744">
   <p><b>A_19488-02</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Das KOM-LE-Clientmodul MUSS die ihm im Mail-Header gemäß der Tabelle "Tab_Header_Kat Header-Feld Kategorie" bereitgestellte Information zur Kategorisierung einer zu übertragenden E-Mail weiterleiten. Die Benennung dieses zusätzlichen E-Mail-Header-Feldes erfolgt wie in Tabelle "Tab_Header_Kat festgelegt". Wenn vom Mail-Client keine Informationen übergeben werden können, wird durch das KOM-LE-Clientmodul der Default-Wert aus der&nbsp;X-KIM-Dienstkennung&nbsp;gesetzt.</span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_549"></p>
  <p id="polarion_118" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">8</span>:&nbsp;Tab_Header_Kat Header-Feld Kategorie </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=119" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 126px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;">Header-Feld</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 110.8px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;">Name</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 94px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;">Verpflichtend</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 278.8px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;">Beschreibung</th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 126px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Dienstkennung</span></td> 
     <td style="text-align: left;vertical-align: top;width: 110.8px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;">E-Mail-Kategorie</td> 
     <td style="text-align: left;vertical-align: top;width: 94px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;">optional</td> 
     <td style="text-align: left;vertical-align: top;width: 278.8px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;">Zusätzliches E-Mail-Header-Feld, enthält die auf die E-Mail bezogene Dienstkennung mit Bezug auf deren Inhalt.<br> Wenn vom Mail-Client keine Informationen übergeben werden können, wird durch das KOM-LE-Clientmodul der Default-Wert aus der&nbsp;X-KIM-Dienstkennung&nbsp;gesetzt.</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_543"> <span style="font-size: 10pt;line-height: 1.5;">Die zu verwendenden Dienstkennungen werden durch die gematik festgelegt und sind über das Fachportal der gematik im Bereich "Toolkit" abrufbar. Die dort durch die gematik auf der Seite "Dienstkennung" administrierte Übersicht liefert bei Bedarf die Default-Dienstkennung. Diese wird durch das Clientmodul vor der weiteren Verarbeitung in das Headerfeld X-KIM-Dienstkennung der ursprünglichen E-Mail eingetragen, wenn keine Dienstkennung durch den Mail-Client des Senders eingetragen wurde.<span id="polarion-comment:251"></span></span> </p>
  <p id="polarion_474" style="text-align: left;"> Das Header-Feld <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">X-KIM-Dienstkennung</span> wird im unverschlüsselten Header der E-Mail enthalten sein, um eine eventuelle Verarbeitung der E-Mail auf Seiten des Empfängers zu ermöglichen. Eine entsprechende Festlegung erfolgt in der [gemSMIME_KOMLE] im Kapitel 2.1.1.1. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-103772">3.7 Administrationsmodul</h3>
  <p id="polarion_539">Das Administrationsmodul ist Bestandteil des KOM-LE-Clientmoduls. Das Modul ermöglicht die Verwaltung des Accounts des KOM-LE-Teilnehmers. Dazu kommuniziert das Administrationsmodul über eine TLS-Verbindung mit dem Account Manager des KOM-LE-Fachdienstes. Zum Funktionsumfang des Modules gehören:</p>
  <ul id="polarion_231"> 
   <li>Registrierung des neuen KOM-LE-Teilnehmers,</li> 
   <li>Deregistrierung des KOM-LE-Teilnehmers,</li> 
   <li>Beantragen und Herunterladen der PKCS#12-Datei,</li> 
   <li>Lokalisierung des Account Managers über DNS Service Discovery,</li> 
   <li>Meldung der KIM-Version an den Account Manager,</li> 
   <li>Verwaltung von Abwesenheitsnotizen.</li> 
  </ul>
  <p id="polarion_475">Im ersten Schritt konfiguriert der KOM-LE-Teilnehmer einmalig die Domain des KOM-LE-Fachdienstes im Administrationsmodul. Dadurch ist das Administrationsmodul in der Lage, den Account Manager über DNS Service Discovery zu lokalisieren. Danach können sich neue KOM-LE-Teilnehmer über das Administrationsmodul bei ihrem KOM-LE-Fachdienst registrieren und die benötigte PKCS#12 Dateien für das Clientmodul herunterladen.</p>
  <p id="polarion_535">Die konzeptionelle Betrachtung für das Administrationsmodul sieht wie folgt aus:</p>
  <ol id="polarion_809"> 
   <li>Der Leistungserbringer schließt einen Vertrag mit einem KOM-LE-Anbieter</li> 
   <ol> 
    <li>Der KOM-LE-Anbieter übermittelt die folgenden Zugangsdaten an den Leistungserbringer (das Verfahren wird vom KOM-LE-Anbieter festgelegt):</li> 
    <ol> 
     <li>eine referenceID für die Zuordnung beim Anbieter sowie</li> 
     <li>das initiale Passwort</li> 
    </ol> 
   </ol> 
   <li>Falls für das KIM Clientmodul/Administrationsmodul die Client Authentifizierungsmethode gegenüber dem Konnektor noch nicht konfiguriert wurde, muss diese Konfiguration jetzt erfolge. Für die Authentifizierungsmethode TLS-Client-Authentifizierung des Clientsystems am verwendeten Konnektor kann dies folgendermassen erfolgen, falls noch kein TLS Client Zertifikat im KIM Clientmodul vorliegt:</li> 
   <ol> 
    <li>Über das Managementinterface des Konnektors wird das X.509-Zertifikat für das KIM Clientmodul und der&nbsp; zugehörigen privaten Schlüssel erzeugt und exportiert.</li> 
    <li>Über das KIM Administrationsmodul werden X.509-Zertifikat und der zugehörigen privaten Schlüssel importiert.</li> 
    <li>Mit dem importierten X.509-Zertifikat kann das KIM Administrationsmodul die Verbindungen zum Konnektor aufbauen, welche zur Signatur der JSON Web Token nötig sind.</li> 
   </ol> 
   <li>Der Leistungserbringer verwendet das Administrationsmodul, um sich am Account Manager seines Fachdienstes zu registrieren</li> 
   <ol> 
    <li>Es wird eine serverseitig authentisierte TLS-Verbindung zwischen dem Administrationsmodul und dem Account Manager des Fachdienstes aufgebaut.</li> 
    <li>Im Zuge des Registrierungsprozesses wird die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">register()</span> am Account Manager aufgerufen und folgende Parameter an den Account Manager übermittelt:</li> 
    <ol> 
     <li>die referenceID,</li> 
     <li>das initiale Passwort,</li> 
     <li>eine E-Mail-Adresse,<br> </li> 
     <li>das neue Passwort,</li> 
     <li>die KIM-Version.</li> 
    </ol> 
    <li><span style="color: #000000;">Der Request wird mit dem Auth-Zertifikat der verwendeten Karte (HBA oder SMC-B) signiert</span></li> 
    <li><span style="color: #000000;">Der KOM-LE-Anbieter trägt die angegebene E-Mail-Adresse sowie die KIM-Version in den Verzeichnisdienst ein<br> </span></li> 
   </ol> 
   <li><span style="color: #000000;">Optional: Automatisiertes Beantragen des kryptografischen Materials (PKCS#12-Datei) </span></li> 
   <ol> 
    <li><span style="color: #000000;">Das Administrationsmodul generiert ein Passwort gemäß [gemSpec_Krypt] zum Sichern der PKCS#12-Datei.</span></li> 
    <li><span style="color: #000000;">Anschließend ruft das Administrationsmodul die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">createCert()</span> auf, um das kryptografische Material (PKCS#12) anzufordern.</span></li> 
    <li><span style="color: #000000;">Das Administrationsmodul ü</span>bergibt die PKCS#12-Datei an das Clientmodul.</li> 
    <li>Dieses Zertifikat wird anschließend vom Clientmodul für alle E-Mail-Adressen und KIM-Fachdienste verwendet. Weiterhin wird dieses Zertifikat für die TLS-Client Authentisierung gegenüber dem Konnektor genutzt.<br> </li> 
   </ol> 
  </ol>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-103891">3.7.1 Allgemeine Anforderungen</h4>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104377">
   <p><b>A_19453</b></p>
   <p><span style="font-weight: normal;font-size: 10pt;line-height: 1.5;">Das Administrationsmodul MUSS die PKCS#12-Datei dem Clientmodul für die Weiterverarbeitung übergeben.<br> </span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_847"> <span style="font-weight: normal;font-size: 10pt;line-height: 1.5;"> </span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104378">
   <p><b>A_19454</b></p>
   <p><span style="font-weight: normal;font-size: 10pt;line-height: 1.5;"> <span style="font-family: Arial, Helvetica;">Das Administrationsmodul SOLL die Dialoggestaltung gemäß [EN ISO 9241#Teil110] sicherstellen.<br> </span></span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104379">
   <p><b>A_19455</b></p>
   <p><span style="font-weight: normal;font-size: 10pt;font-family: Arial, Helvetica;line-height: 1.5;">Das Administrationsmodul SOLL bei Verwendung von Formulardialogen die Anforderungen und Empfehlungen gemäß [DIN EN ISO 9241-143:2012-06] beachten.<br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125704">
   <p><b>A_19456-02</b></p>
   <p>Das Administrationsmodul MUSS die Auswahl der genutzten Fachdienste ermöglichen.&nbsp;<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_554">Die Domain des Anbieters kann z.B. die folgende Ausprägung haben:</p>
  <p id="polarion_608"> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">hrst.kim.telematik</span> </p>
  <p id="polarion_463"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104508">
   <p><b>A_19523</b></p>
   <p>Das Administrationsmodul MUSS die zur Kommunikation mit dem Account Manager&nbsp;des Fachdienstes notwendigen Informationen durch DNS Service Discovery nach den in [gemSpec_FD_KOMLE#Tab_KOMLE_Service Discovery] und [gemSpec_FD_KOMLE#Tab_KOMLE_FQDN] ermitteln.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117893">
   <p><b>A_19457-02</b></p>
   <p>Das Administrationsmodul&nbsp;MUSS bei der initialen Registrierung eine serverseitig gesicherte TLS-Verbindung zum Account Managers des Fachdienstes aufbauen. <br> <br> Für die Authentisierung am Account Manager MUSS das Administrationsmodul&nbsp;ein JSON-Web-Token gemäß [RFC7519] mit den Elementen aus der folgenden Tabelle erzeugen und zusammen mit dem Passwort des Nutzers an den Account Manager übergeben.<br> <br> 
    <table id="polarion_wiki macro name=table;params=noPageBreak=yes|align=center|width=38.08%" class="polarion-Document-table" style="width: 38.08%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
     <tbody> 
      <tr> 
       <th colspan="2" style="font-weight: bold;background-color: #F0F0F0;text-align: center;vertical-align: top;width: 275.333px;height: 18.6667px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">JSON Web Token<br> </th> 
      </tr> 
      <tr> 
       <td colspan="2" style="text-align: center;vertical-align: top;width: 275.333px;height: 18.6667px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Header</span></td> 
      </tr> 
      <tr> 
       <td style="text-align: center;vertical-align: top;width: 70px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">alg</span></td> 
       <td style="text-align: center;vertical-align: top;width: 194.667px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">PS256</span></td> 
      </tr> 
      <tr> 
       <td style="text-align: center;vertical-align: top;width: 70px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">typ</span></td> 
       <td style="text-align: center;vertical-align: top;width: 194.667px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">JWT</span></td> 
      </tr> 
      <tr> 
       <td style="text-align: center;vertical-align: top;width: 70px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">x5c</span></td> 
       <td style="text-align: center;vertical-align: top;width: 194.667px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">[BASE-64 kodiertes AUT-Cert]</td> 
      </tr> 
      <tr> 
       <td colspan="2" style="text-align: center;vertical-align: top;width: 275.333px;height: 18.6667px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Body </span><br> </td> 
      </tr> 
      <tr> 
       <td style="text-align: center;vertical-align: top;width: 70px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">nbf</span></td> 
       <td style="text-align: center;vertical-align: top;width: 194.667px;height: 20px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">[Gültigkeitsbeginn (Unixzeit)]</td> 
      </tr> 
     </tbody> 
    </table> <b>&lt;=</b></p>
  </div>
  <p id="polarion_807"> Der Parameter "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">alg</span>": "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">PS256</span>" ist informativ.&nbsp;Anstatt einer üblichen&nbsp;Signatur bildet er den Hash gemäß [gemSpec_Krypt#A_19644]. Dieser wird mittels der externalAuthenticate-Funktion des Konnektors mit dem AUT-Zertifikat des HBA bzw. der SMC-B signiert. Als Signature Type muss&nbsp;RSASSA-PSS verwendet werden. Diese Signatur wird anstatt des Signaturteils des Tokens angehängt. </p>
  <p id="polarion_605"> Der Account Manager ist Bestandteil des Fachdiensts und deshalb gelten für die TLS-Verbindungen (inklusive genutzter Zertifikate) zum Account Manager ebenfalls die Festlegungen von Kap. 4.1.4.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-112468">
   <p><b>A_20773</b></p>
   <p>Das Administrationsmodul&nbsp; MUSS für die Inhalte aller Operationen (Request und Response) der Schnittstelle&nbsp; I_AccountManager_Service den UTF-8-Zeichensatz unterstützen. <b>&lt;=</b></p>
  </div>
  <p id="polarion_726"> <span style="font-weight: bold;">Abweichung außerhalb der Leistungserbringerumgebung</span> </p>
  <p id="polarion_727">Für Umgebungen außerhalb der Leistungserbringerumgebung (z. B. im Rechenzentrum) können von den Anforderungen zur Dialogsteuerung abgewichen werden.</p>
  <p id="polarion_728"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-109648">
   <p><b>A_20188</b></p>
   <p>Das Administrationsmodul KANN bei Verwendung außerhalb der Leistungserbringerumgebung von der Dialogsteuerung abweichen.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-116880">
   <p><b>A_21396</b></p>
   <p><span style="background-color: #FFFFFF;">Das Administrationsmodul MUSS bei Aufruf der Operationen am Account Manager die Ergebnisse der Operationen sowie Fehlernachrichten darstellen.<br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-116859">
   <p><b>A_21380</b></p>
   <p>Das Clientmodul MUSS es dem Nutzer ermöglichen, Abwesenheitsnotizen über die Schnittstelle&nbsp;I_AccountManager_Service am Account Manager verwalten zu können.<span style="background-color: #FFFF99;"><br> </span> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-103885">3.7.2 Registrierung KOM-LE-Teilnehmer</h4>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117970">
   <p><b>A_19458-01</b></p>
   <p>Das Administrationsmodul MUSS sich bei der initialen Anmeldung mit der referenceID und dem initialen Passwort am Account Manager authentifizieren.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104383">
   <p><b>A_19459</b></p>
   <p>Das Administrationsmodul MUSS die Registrierung&nbsp;des neuen&nbsp;KOM-LE-Teilnehmers am Account Manager ermöglichen. <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104384">
   <p><b>A_19460</b></p>
   <p>Das Administrationsmodul MUSS die Registrierung&nbsp;des neuen&nbsp;KOM-LE-Teilnehmers im Dialog durchführen.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104386">
   <p><b>A_19462</b></p>
   <p>Das Administrationsmodul MUSS Fehler bei der Registrierung verständlich anzeigen und dem Anwender Handlungsoptionen anbieten.<br> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-103888">3.7.3 Deregistrierung KOM-LE-Teilnehmer</h4>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-104387">
   <p><b>A_19463</b></p>
   <p>Das Administrationsmodul MUSS die Deregistrierung&nbsp;des KOM-LE-Teilnehmers am Account Manager ermöglichen.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-134039">
   <p><b>A_19464-03</b></p>
   <p>Das Administrationsmodul MUSS die Deregistrierung&nbsp; des KOM-LE-Teilnehmers im Dialog durchführen. Im Verlauf der Deregistrierung MUSS der KOM-LE-Teilnehmer in geeigneter Form informiert werden, dass nach der&nbsp;Deregistrierung diese zunächst nur temporär für 30 Tage umgesetzt wird. Nach Ablauf dieses Zeitraumes ist kein weiterer Zugriff auf den E-Mail-Account möglich und der gelöschte Account kann nicht wiederhergestellt werden.&nbsp;Innerhalb der 30 Tage ist der Zugriff auf das E-Mail-Konto zum Abholen von Nachrichten weiterhin möglich. Das Administrationsmodul MUSS die Rücknahme der Deregistrierung innerhalb der 30 Tage ermöglichen, um die E-Mail-Adresse wieder nutzen zu können. Hierfür MUSS das Administrationsmodul die Operation&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">revokeDeregistration</span> am Account Manager aufrufen.<span style="text-decoration: line-through;"><br> </span> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-103887">3.7.4 Download PKCS#12 KOM-LE-Teilnehmer</h4>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117974">
   <p><b>A_19468-02</b></p>
   <p>Das Administrationsmodul MUSS die PKCS#12-Datei über die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">createCert()</span> am Account Manager beantragen und vom Account Manager herunterladen. Nach dem Herunterladen der PKCS#12-Datei MUSS das Administrationsmodul diese mit dem vom Administrationsmodul erzeugten symmetrischen Schlüssel entschlüsseln.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-116860">
   <p><b>A_21381</b></p>
   <p>Das Administrationsmodul MUSS einen Monat vor Ablauf des TLS-Zertifikates automatisch ein neues Zertifikat über die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">createCert()</span> beantragen und herunterladen. Die zeitliche Gültigkeit des Zertifikats muss vom Clientmodul beim TLS-Verbindungsaufbau geprüft werden.<br> <br> Wenn während der Aktualisierung ein Fehler auftritt, dann MUSS das KOM-LE-Clientmodul den Absender mit einer E-Mail über den Fehlerfall informieren. Aus dem Inhalt der Fehlernachricht MUSS hervorgehen, dass bei der Aktualisierung der PKCS#12-Datei ein Fehler aufgetreten ist. Die Fehlernachricht ist weder zu signieren noch zu verschlüsseln und entspricht <span style="font-size: 10pt;line-height: 1.5;">der Delivery Status Notification gemäß [RFC3461-3464]</span>. Zusätzlich muss der vom Account Manager gemeldeter Fehlertext wie folgt eingefügt werden: Fehlertext: <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">&lt;message&gt;</span>.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-116861">
   <p><b>A_21382</b></p>
   <p>Das Administrationsmodul MUSS bei Aufruf der Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">createCert()</span> einen symmetrischen Schlüssel gemäß den Kriterien [gemSpec_Kryp] generieren und als Parameter CertPassword übergeben.<br> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16750">3.8 Kryptographischen Schnittstellen des Konnektors</h3>
  <p id="polarion_693">Das digitale Signieren und die Verschlüsselung von Nachrichten sowie deren Entschlüsselung und die Prüfung ihrer digitalen Signaturen beinhalten den Zugriff auf die SOAP-Schnittstellen des Konnektors, die die folgenden Operationen zu Verfügung stellen:</p>
  <ul id="polarion_694"> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">SignDocument</span> - Erzeugung einer digitalen Signatur,</li> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">VerifyDocument</span> – Prüfung einer digitalen Signatur,</li> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">EncryptDocument</span> – Verschlüsselung und</li> 
   <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">DecryptDocument</span> - Entschlüsselung.</li> 
  </ul>
  <p id="polarion_695">Die Verschlüsselung und das digitale Signieren erfordern dabei den Zugriff auf eine SM-B und/oder einen HBA mit dem erforderlichen Schlüsselmaterial. Zur Erstellung einer digitalen Signatur ist der Zugriff auf den geheimen Schlüssel PrK.HCI.OSIG einer SM-B erforderlich. Für die Verschlüsselung ist der Zugriff auf den geheimen Schlüssel Prk.HCI.ENC einer SM-B oder Prk.HP.ENC eines HBA notwendig.</p>
  <p id="polarion_696"> Der Zugriff auf den entsprechenden geheimen Schlüssel erfolgt während der Durchführung der <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">SignDocument</span> und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">DecryptDocument</span> Operationen. Die Eingangsparameter der beiden Operationen beinhalten das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> Element (Aufrufkontext). Der Aufrufkontext umfasst die Angaben zu Mandanten (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">MandantId</span>), Arbeitsplatz (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">WorkplaceId</span>), Anwendung (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">ClientSystemId</span>) und Identifikation des Benutzers (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">UserId</span>). Die Angaben zur Identifikation des Benutzers (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">UserId</span>) sind optional und nur für Aufrufe, die einen Zugriff auf den HBA brauchen, erforderlich. Die Elemente des Aufrufkontexts werden dem Clientmodul als Teile des MTA- bzw. POP3-Benutzernamens übertragen (siehe Kapitel 3.2.2.2, 3.3.2.2). </p>
  <p id="polarion_697"> Zur Identifikation der Karte benötigen die Operationen zusätzlich den Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cardHandle</span>. Das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">cardHandle</span> gilt für die Dauer des Steckzyklus einer Karte und wird beim Stecken einer Karte vom Konnektor generiert. Um eine Karte über mehreren Steckzyklen zu identifizieren kann die Seriennummer der Karte (ICCSN) verwendet werden. </p>
  <p id="polarion_698"> Die über den Konnektor verfügbaren SM-Bs und HBAs, ihre Handles und ICCSNs können über die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetCards</span> Operation des Konnektors ermittelt werden. </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16751">3.8.1 Erstellung der digitalen Signatur einer Nachricht mit einer SM-B</h4>
  <p id="polarion_699">Das Signieren von ausgehenden Nachrichten erfolgt mit dem Schlüssel PrK.HCI.OSIG der SM-B, die der Institution des Senders entspricht. Ein Konnektor kann von mehreren Institutionen (Mandaten) gleichzeitig benutzt werden und dementsprechend mit mehreren SM-Bs, die den unterschiedlichen Identitäten entsprechen, ausgestattet sein. Die Ermittlung der SM-B, die für die Erstellung der Nachrichtensignatur verwendet werden soll, kann entsprechend dem in der Abbildung "Abb_Zugriff_SMB SM-B-Zugriff zur Erstellung der Nachrichtensignatur"&nbsp;dargestellten Aktivitätsdiagramm erfolgen. Die Aktivitäten und deren Reihenfolge haben illustrativen und nicht normativen Charakter. Die konkrete Umsetzung kann sich unterscheiden, solange das Ergebnis das Gleiche ist.</p>
  <p id="polarion_700" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image14.emf" style="width: 582px;max-width: 750px;height: 745px;"> </p>
  <p id="polarion_428" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">13</span>: Abb_Zugriff_SMB SM-B-Zugriff zur Erstellung der Nachrichtensignatur </p>
  <p id="polarion_702"></p>
  <p id="polarion_213">Es folgt die Beschreibung der einzelnen Aktivitäten des Diagramms:</p>
  <ol id="polarion_703"> 
   <li>Die über den Konnektor verfügbaren Karten werden über die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetCards</span> mit dem Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Sender entsprechender Aufrufkontext aus dem Benutzernamen) ermittelt.</li> 
   <li>In den anhand des Aufrufkontexts über <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetCards</span> ermittelten Karten wird nach einer verfügbaren SM-B gesucht:</li> 
  </ol>
  <ul id="polarion_704"> 
   <li>Falls eine verfügbare SM-B gefunden wurde, wird mit Aktivität 3 fortgesetzt.</li> 
   <li>Falls sich unter den verfügbaren Karten keine SM-B befindet, kann die Nachricht nicht signiert werden und das Senden wird abgebrochen.</li> 
  </ul>
  <ol id="polarion_705" class="continue"> 
   <li>Um festzustellen, ob die Eingabe der PIN für die Freischaltung der Karte notwendig ist, wird die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetPinStatus</span> Operation des Konnektors aufgerufen. Dabei werden die Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Sender entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">CardHandle</span> (Handle der ausgewählten SM-B) und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">PinTyp</span> (PIN.SMC) verwendet.</li> 
  </ol>
  <ul id="polarion_706"> 
   <li>Falls die Karte freigeschaltet ist, fährt das Clientmodul mit Aktivität 5 fort.</li> 
   <li>Falls eine PIN-Eingabe erforderlich ist, fährt das Clientmodul mit Aktivität 4 fort.</li> 
  </ul>
  <ol id="polarion_707" class="continue"> 
   <li>Für die Eingabe der PIN zur Freischaltung der ausgewählten Karte wird die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">VerifyPin</span> Operation des Konnektors verwendet. Die Operation wird mit den Parametern <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Sender entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">CardHandle</span> (Handle der ausgewählten SM-B), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">PinTyp</span> (PIN.SMC) aufgerufen. Der Sender wird zur Eingabe der PIN über das Display des Kartenterminals angefordert.</li> 
   <li>Die Signatur der KOM-LE-Nachricht erfolgt unter Verwendung der&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">SignDocument</span> Operation des Konnektors. Dabei werden die Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Sender entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">CardHandle</span> (Handle der ausgewählten SM-B), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">KeyReference</span> (C.OSIG_RSA) verwendet. Die Verwendung weiterer Parameter muss unter Berücksichtigung der Anforderungen aus [gemSMIME_KOMLE] erfolgen.</li> 
  </ol>
  <p id="polarion_214"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16752">
   <p><b>KOM-LE-A_2052</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das Clientmodul MUSS die Menge der verfügbaren Karten, die über die Operation</span> <span>GetCards</span> <span>des Konnektors anhand des Aufrufkontexts des Senders ermittelt werden, nach einer verfügbaren SM-B durchsuchen.</span></p><p><br></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16753">
   <p><b>KOM-LE-A_2057</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS das Signieren einer Nachricht abbrechen, wenn für die Erstellung der Signatur keine SM-B verfügbar/gesteckt ist.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16754">
   <p><b>KOM-LE-A_2058</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS das Signieren einer Nachricht abbrechen, wenn die Freischaltung der für die Erstellung der Signatur erforderlichen SM-B fehlschlägt.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16755">3.8.2 Prüfung der digitalen Signatur einer Nachricht</h4>
  <p id="polarion_711"> Die Prüfung der digitalen Signatur einer Nachricht erfolgt mittels der <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">VerifyDocument</span> Operation des Konnektors. Dabei werden die Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Empfänger entsprechender Aufrufkontext) und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Document</span> (signierte Daten) verwendet. </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16756">3.8.3 Verschlüsselung einer Nachricht</h4>
  <p id="polarion_712"> Die Verschlüsselung einer Nachricht erfolgt mittels der <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">EncryptDocument</span> Operation des Konnektors. Dabei werden die Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Empfänger entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Document</span> (zu verschlüsselnde Daten) und <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Certificate (</span>alle Zertifikate mit denen die Nachricht verschlüsselt werden soll) verwendet. </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16757">3.8.4 Entschlüsselung einer Nachricht mit einer SM-B bzw. einem HBA</h4>
  <p id="polarion_713"> Für die Entschlüsselung von empfangenen Nachrichten verwendet das Clientmodul den privaten Schlüssel PrK.HP.ENC eines HBA bzw. den privaten Schlüssel PrK.HCI.ENC einer SM-B. Die Zuordnung von den für die Verschlüsselung verwendeten Zertifikaten und den E-Mail-Adressen der Empfänger wird im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attribut des CMS-Objektes mit den verschlüsselten Daten abgebildet (siehe [gemSMIME_KOMLE]). Die Ermittlung des HBAs bzw. der SM-B, die für die Entschlüsselung der empfangenen Nachricht verwendet wird, kann entsprechend dem in Abbildung 14 dargestellten Aktivitätsdiagramm durchgeführt werden. Die Aktivitäten und deren Reihenfolge haben illustrativen und nicht normativen Charakter. Die konkrete Umsetzung kann sich unterscheiden, solange das Ergebnis das Gleiche ist. </p>
  <p id="polarion_715" style="text-align: center;" data-keep-next="true"> <br> <img data-keep-next="true" src="attachments/image15.emf" style="width: 582px;max-width: 750px;height: 710px;"> </p>
  <p id="polarion_439" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">14</span>: Abb_Zugriff_SMB_HBA SM-B/HBA-Zugriff zur Nachrichtentschlüsselung </p>
  <p id="polarion_717"></p>
  <p id="polarion_215">Es folgt die Beschreibung der einzelnen Aktivitäten des Diagramms:</p>
  <ol id="polarion_718"> 
   <li>Die über den Konnektor verfügbaren Karten werden über die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetCards</span> mit dem Parameter <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Empfänger entsprechender Aufrufkontext) ermittelt.</li> 
   <li>Um die Anzahl der Zugriffe auf die Schnittstellen des Konnektors zu reduzieren, verwaltet das Clientmodul einen Cache, der Zuordnungen zwischen E-Mail-Adresse, Zertifikats-ID und ICCSN von HBA/SM-B zwischenspeichert. Dabei sind die gespeicherten Zertifikats-IDs vom ASN.1-Typ <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">IssuerAndSerialNumber</span> (siehe [gemSMIME_KOMLE#2.3.3]). Der Cache wird anhand der E-Mail-Adresse des Empfängers und der zugehörigen Zertifikats-IDs aus dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attribut des CMS-Objektes durchsucht.</li> 
  </ol>
  <ul id="polarion_719"> 
   <li>Falls ein passender Eintrag im Cache gefunden wird und die ICCSN dieses Eintrages mit einer über <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetCards</span> ermittelten ICCSN übereinstimmt, fährt das Clientmodul mit Aktivität 5 fort.</li> 
   <li>Falls der Cache keine passenden Einträge enthält, fährt das Clientmodul mit Aktivität 3 fort.</li> 
  </ul>
  <ol id="polarion_720" class="continue"> 
   <li>Die IDs der Verschlüsselungszertifikate (Ermittlung über die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">ReadCardCertificate</span> des Konnektors) der über <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetCards</span> ermittelten HBAs und SM-Bs werden mit den Zertifikats-IDs aus dem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">recipient-emails</span> Attribut des CMS-Objektes, die zur E-Mail-Adresse des Empfängers gehören, verglichen. Bei der Ermittlung der Zertifikate über die Operation&nbsp;ReadCardCertificate ist sowohl das RSA-ENC-Zertifikat als auch ECC-ENC-Zertifikat der&nbsp; Karten zu berücksichtigen.</li> 
  </ol>
  <ul id="polarion_721"> 
   <li>Falls eine Karte mit passender Zertifikats-ID vorhanden ist, fährt das Clientmodul mit Aktivität 4 fort.</li> 
   <li>Falls keine passende Karte gefunden wird, wird die Entschlüsselung der Nachricht abgebrochen.</li> 
  </ul>
  <ol id="polarion_722" class="continue"> 
   <li>Die ermittelte (ICCSN – E-Mail-Adresse – Zertifikats-ID) Zuordnung wird im Cache des Clientmoduls gespeichert.</li> 
   <li>Um festzustellen ob die Eingabe der PIN zur Freischaltung der ermittelten Karte notwendig ist, wird&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">die</span> Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">GetPinStatus</span> des Konnektors mit den Parametern <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Empfänger entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">CardHandle</span> (Handle der SM-B bzw. des HBA), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">PinTyp</span> (PIN.SMC für SM-B bzw. PIN.CH für HBA) aufgerufen.</li> 
  </ol>
  <ul id="polarion_723"> 
   <li>Falls die Karte freigeschaltet ist, fährt das Clientmodul mit Aktivität 7 fort.</li> 
   <li>Falls die PIN-Eingabe erforderlich ist, fährt das Clientmodul mit Aktivität 6 fort.</li> 
  </ul>
  <ol id="polarion_724" class="continue"> 
   <li>Die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">VerifyPin</span> des Konnektors wird mit den Parametern <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Empfänger entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">CardHandle</span> (Handle der/des ausgewählten SM-B/HBA), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">PinTyp</span> (PIN.SMC für SM-B bzw. PIN.CH für HBA) aufgerufen. Der Empfänger wird zur Eingabe der PIN über das Display des Kartenterminals aufgefordert.</li> 
   <li>Die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">DecryptDocument</span> des Konnektors wird mit den Parametern <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Context</span> (dem Empfänger entsprechender Aufrufkontext), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">CardHandle</span> (Handle der SM-B bzw. des HBA), <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">KeyReference</span> (C.ENC_RSA oder C.ENC_ECC ), Document (die verschlüsselten Daten) aufgerufen.</li> 
  </ol>
  <p id="polarion_725"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16758">
   <p><b>KOM-LE-A_2059</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS die Suche nach der zur Entschlüsselung erforderlichen Karte anhand der E-Mail-Adresse des Empfängers und der zugehörigen Zertifikats-IDs aus dem </span><span style="font-family: 'Courier New', Courier, monospace;">recipient-emails</span><span> Attribut des CMS-Objektes der KOM-LE-Nachricht durchführen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16759">
   <p><b>KOM-LE-A_2060</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für die Ermittlung der zur Entschlüsselung einer Nachricht erforderlichen Karte primär seinen Cache durchsuchen. Wird die erforderliche Karte nicht über den Cache gefunden, MUSS das Clientmodul die Menge der verfügbaren Karten (wird über die Operation </span><span style="font-family: 'Courier New', Courier, monospace;">GetCards</span><span> </span><span>des Konnektors </span><span>ermittelt</span><span>) nach der Karte mit dem passenden Verschlüsselungszertifikat (unter Verwendung der Operation </span><span style="font-family: 'Courier New', Courier, monospace;">ReadCardCertificate</span><span> des Konnektors) durchsuchen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16760">
   <p><b>KOM-LE-A_2061</b></p>
   <p><p style="margin-left: 0px;"><span>Wird beim Entschlüsseln die erforderliche Karte (SM-B bzw. HBA) unter Verwendung der Operation </span><span style="font-family: 'Courier New', Courier, monospace;">ReadCardCertificate</span><span> des Konnektors ermittelt, MUSS das Clientmodul die zu dieser Karte korrespondierende Zuordnung von E-Mail-Adresse des Empfängers, Zertifikats-ID und ICCSN im Cache speichern. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16761">
   <p><b>KOM-LE-A_2062</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS die Entschlüsselung einer Nachricht abbrechen, wenn die für die Entschlüsselung erforderliche Karte (SM-B bzw. HBA) nicht verfügbar ist.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16762">
   <p><b>KOM-LE-A_2063</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS die Entschlüsselung einer Nachricht abbrechen, wenn die Freischaltung der für die Entschlüsselung erforderlichen Karte fehlschlägt.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-16763">4 Nichtfunktionale Anforderungen</h2>
  <p id="polarion_734">In diesem Kapitel werden nichtfunktionale Anforderungen an das KOM-LE-Clientmodul definiert.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16764">4.1 Transportsicherung</h3>
  <p id="polarion_735">Beim Senden bzw. Empfangen von Nachrichten baut das Clientmodul mit folgenden Systemen Verbindungen auf:</p>
  <ul id="polarion_736"> 
   <li>Clientsysteme (muss stets über TLS erfolgen),</li> 
   <li>KOM-LE-Fachdienste (muss stets über TLS erfolgen) und</li> 
   <li>Konnektor (muss stets über TLS erfolgen).</li> 
  </ul>
  <p id="polarion_737">In diesem Kapitel werden die Anforderungen an den Aufbau der TLS-Verbindungen mit diesen Systemen definiert.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16765">4.1.1 Allgemeine Festlegungen</h4>
  <p id="polarion_738">Die Vorgaben zu X.509-Identitäten für die TLS/SSL-Authentifizierung, unterstützten TLS-Versionen und TLS Cipher Suites werden aus [gemSpec_Krypt] übernommen.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125655">
   <p><b>KOM-LE-A_2064-02</b></p>
   <p>Das Clientmodul KOM-LE MUSS bei der Verwendung von X.509-Identitäten für die TLS-Authentifizierung sowie dem Aufbau von TLS-Verbindungen die Vorgaben aus [gemSpec_Krypt] beachten. Hierbei sind zusätzlich auch Cipher-Suites und Kurven aus [BSI-TR-02102-2]&nbsp; Kapitel 3.3 akzeptabel um Kompatibilität mit gängigen Clientsystemen und PVSen bzw. Mailclients, sowie gängigen Plattformen für Fachdienste sicherzustellen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_607">Der Aufbau von TLS-Verbindungen mit Clientsystemen oder die zertifikatsbasierte clientseitige Authentisierung beim Aufbau von TLS-Verbindungen mit dem Konnektor oder den Fachdiensten erfordert das Vorhandensein des entsprechenden Schlüsselmaterials.</p>
  <p id="polarion_741">Üblicherweise liegt ein Zertifikat zusammen mit dem zugehörigen geheimen Schlüssel in einem standardisierten und passwortgeschützten Format (p12) [PKCS#12] vor. Das Clientmodul kann ein Zertifikat und den zugehörigen geheimen Schlüssel auf mindestens zwei Arten nutzen:</p>
  <ol id="polarion_28"> 
   <li>Das Clientmodul importiert das Zertifikat und den Schlüssel aus der p12-Datei und verwaltet diese anschließend in einem eigenen Schlüsselspeicher. Dazu muss während des Importvorgangs das Passwort der p12-Datei eingegeben werden (Transportsicherung). Danach hat das Clientmodul Zugriff auf den für den TLS-Verbindungsaufbau benötigten privaten Schlüssel.</li> 
   <li>Das Clientmodul nutzt einen Systemschlüsselspeicher, z.B. den Zertifikatsspeicher von Windows oder den des Java JRE. Auch hier ist für den Importvorgang das Passwort des der p12-Datei einzugeben. Anschließend stehen das Zertifikat und der Schlüssel über entsprechende Systemfunktionen/Bibliotheken zur Verfügung. Idealerweise kann der Administrator des Clientmoduls im gewählten Zertifikatsspeicher browsen und das gewünschte Zertifikat für die Verwendung auswählen. Alternativ kann in der Clientmodul-Konfiguration eine eindeutige Referenz auf das Zertifikat (Name oder Index) eingegeben werden.</li> 
  </ol>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-93311">
   <p><b>A_17239</b></p>
   <p>Das Clientmodul KOM-LE MUSS&nbsp;parallel&nbsp;RSA und ECC unterstützen. Als TLS-Client MUSS das Clientmodul KOM-LE&nbsp;&nbsp;bevorzugt ECC verwenden, falls es auf einen TLS-Server, der beide Verfahren unterstützt, trifft. <br> <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16767">
   <p><b>KOM-LE-A_2065</b></p>
   <p>Das Clientmodul MUSS das für den Aufbau von TLS-Verbindungen mit dem Fachdienst, dem Konnektor und Clientsystemen benötigte Schlüsselmaterial in einem mindestens durch Passwort geschützten sicheren Schlüsselspeicher ablegen. <b>&lt;=</b></p>
  </div>
  <p id="polarion_125"> Lösungen die Zertifikat und Schlüsselmaterial in der ausgelieferten Software des Clientmoduls enthalten und Lösungen bei denen derselbe Schlüssel für mehrere Clientmodule verwendet wird, sind aus Sicherheitsgründen nicht zulässig.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-74850">
   <p><b>KOM-LE-A_2300</b></p>
   <p>Das Clientmodul DARF Schlüsselmaterial für den Aufbau von TLS-Verbindungen NICHT im Auslieferungszustand in der Software enthalten, sondern muss dieses nach Installation importieren. <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-117975">
   <p><b>KOM-LE-A_2301-02</b></p>
   <p>Das Clientmodul MUSS das vom KOM-LE-Anbieter bereitgestellte Schlüsselmaterial in Form der PKCS#12 Datei für jeden Aufbau von TLS-Verbindungen nutzen. Das Clientmodul MUSS das notwendige Schlüsselmaterial über die Schnittstelle I_AccountManager_Service vom KOM-LE-Fachdienst beziehen.<span style="background-color: #FFFF99;"><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-101478">
   <p><b>A_18783</b></p>
   <p><span style="font-size: 10pt;line-height: 1.5;">Das Clientmodul KOM-LE MUSS das Schlüsselmaterial und das Zertifikat für die TLS-Verbindungen als passwortgeschützte PKCS#12 Datei importieren können.</span> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16768">4.1.2 Transportsicherung zwischen Clientsystem und Clientmodul</h4>
  <p id="polarion_744">Die SMTP- und POP3-Verbindungen zwischen dem Clientmodul und den Clientsystemen müssen über TLS geschützt werden, sofern Clientmodul und E-Mail-Client nicht auf demselben PC laufen.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16769">
   <p><b>KOM-LE-A_2066</b></p>
   <p>Für SMTP-Verbindungen zwischen Clientsystem und Clientmodul MUSS TLS verwendet werden, wenn das Clientmodul nicht auf demselben Gerät läuft wie das Clientsystem. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16770">
   <p><b>KOM-LE-A_2067</b></p>
   <p>Für POP3-Verbindungen zwischen Clientsystem und Clientmodul MUSS TLS verwendet werden, wenn das Clientmodul nicht auf demselben Gerät läuft wie das Clientsystem. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16772">
   <p><b>KOM-LE-A_2181</b></p>
   <p><p style="margin-left: 0px;"><span>Das </span><span>Clientmodul MUSS </span><span>für den Aufbau von TLS-Verbindungen mit den Clientsystemen sowohl die Möglichkeit, die zertifikatsbasierte Clientauthentifizierung zu verwenden, als auch ohne Clientauthentifizierung zu arbeiten, unterstützen. </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_126">Die Server-Authentisierung erfolgt mit einem Zertifikat, das im gemäß KOM-LE_2065 geschützten Schlüsselspeicher gespeichert wird.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16773">4.1.3 Transportsicherung zwischen Clientmodul und Konnektor</h4>
  <p id="polarion_749">Die Kommunikation zwischen Clientmodul und Konnektor basiert auf HTTP. Der Konnektor bietet vier Varianten der HTTP(S)-Verbindung an:</p>
  <ol id="polarion_750"> 
   <li>TLS deaktiviert. Verwendung von HTTP ohne Absicherung auf Transportebene wird vom Konnektor akzeptiert.</li> 
   <li>TLS ohne Client-Authentifizierung.</li> 
   <li>TLS mit Client-Authentifizierung. Die Client-Authentisierung muss mit den Zertifikaten erfolgen, die der Administrator entweder mit seinen eigenen Mitteln selbst oder mittels des Konnektors erzeugt. In beiden Fällen müssen diese Zertifikate sowohl im Clientmodul (hier zusammen mit ihren privaten Schlüsseln), als auch im Konnektor vorhanden sein.</li> 
   <li>Kombination von TLS ohne Client-Authentifizierung und HTTP-Basic-Authentifizierung. Das Clientmodul muss Benutzername und Passwort für die HTTP-Basic-Authentifizierung statisch konfigurieren, so dass eine Übereinstimmung mit der Konfiguration am Konnektor besteht.</li> 
  </ol>
  <p id="polarion_751">Für die Basic-Authentifizierung (auch “Basic Access Authentication”, ein Standard der HTTP-Authentifizierung) soll dabei das Clientmodul die notwendigen Parameter „Benutzername“ und „Passwort“ verwalten. Das Clientmodul muss über entsprechende Konfigurationsparameter verfügen. Diese müssen mit den gleichen Werten für Benutzername und Passwort befüllt werden, wie an der Managementschnittstelle des Konnektors.</p>
  <p id="polarion_752">Die zertifikatsbasierte Client-Authentifizierung erfolgt mit einem Zertifikat, das im gemäß KOM-LE-A_2065 passwortgeschützten Schlüsselspeicher gespeichert wird.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16774">
   <p><b>KOM-LE-A_2070</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS für Verbindungen mit dem Konnektor immer TLS verwenden.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16775">
   <p><b>KOM-LE-A_2071</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS </span><span>konfigurierbar </span><span>die Verwendung von TLS mit oder ohne </span><span>zertifikatsbasierter Client-</span><span>Authentifizierung für Verbindungen mit </span><span>dem </span><span>Konnektor </span><span>ermöglichen. </span><span>Standardmäßig muss die zertifikatsbasierte Client-</span><span>Authentifizierung </span><span>aktiviert sein. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16776">
   <p><b>KOM-LE-A_2072</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS </span><span>konfigurierbar </span><span>di</span><span>e Verwendung von HTTP-Basic-</span><span>Authenti</span><span></span><span>fizierung </span><span>in einem</span><span> TLS</span><span>-Kanal</span><span> für Verbindungen mit </span><span>dem </span><span>Konnektor ermöglichen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-122801">
   <p><b>A_21223-01</b></p>
   <p>Bei der Verwendung&nbsp;des LDAP-Proxies im Konnektor MUSS das Clientmodul die Vorgaben aus [gemSpec_Kon#3.4] erfüllen.<br>Die folgenden Vorgaben sind einzuhalten:<br> 
    <ol>
     <li>Es ist immer TLS für die LDAP Verbindungen zu verwenden,</li>
     <li>für die Client-Authentifizierung bei LDAP ist nur die zertifikatsbasierte Client-Authentifizierung zu verwenden und</li>
     <li>die Verwendung von TLS mit oder ohne zertifikatsbasierter Client-Authentifizierung muss konfigurierbar sein.<span id="polarion-comment:255"></span></li>
    </ol> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16777">4.1.4 Transportsicherung zwischen Clientmodul und Fachdienst</h4>
  <p id="polarion_756">Die Verbindungen zwischen KOM-LE-Clientmodul und KOM-LE-Fachdiensten (inklusive KAS) erfolgen immer über TLS. Der TLS Handshake zwischen dem Clientmodul und dem MTA sowie POP3-Server findet unmittelbar nach dem Aufbau der entsprechenden TCP-Verbindung statt. Damit wird sichergestellt, dass die Anmeldungsdaten des Nutzers immer über die mit TLS geschützte Verbindung transportiert werden.</p>
  <p id="polarion_757"> Während des Aufbaus der TLS-Verbindung authentifizieren sich die KOM-LE-Fachdienste bzw. der Verzeichnisdienst&nbsp;&nbsp;gegenüber dem Clientmodul mit X.509 TLS-Server-Zertifikaten. Zur Überprüfung dieser Zertifikate verwendet das Clientmodul die Operation <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">VerifyCertificate</span> des Konnektors. </p>
  <p id="polarion_758">Das Clientmodul wiederum authentisiert sich gegenüber den KOM-LE-Fachdiensten mit dem vom KOM-LE-Anbieter zur Verfügung gestellten TLS-Client-Zertifikat und dem entsprechenden privaten Schlüssel&nbsp;(KOM-LE-A_2065, KOM-LE-A_2300 und KOM-LE-A_2301 sind zu beachten).</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16778">
   <p><b>KOM-LE-A_2074</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS immer TLS </span><span>mit beidseitiger Authentifizierung über X.509</span><span>-</span><span>Zertifikate aus der PKI der TI-Plattform </span><span>für die Verbindung mit den </span><span>KOM-LE-Fachdienst</span><span>en verwenden.</span><span> Das TLS-</span><span>Handshake </span><span>MUSS</span><span> unmittelbar nach dem Aufbau der TCP</span><span>-</span><span>Verbindung initiiert</span><span> werden</span><span>. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125304">
   <p><b>KOM-LE-A_2075-01</b></p>
   <p>Das Clientmodul MUSS für die Prüfung von TLS-Server-Zertifikaten der KOM-LE-Fachdienste die Operation VerifyCertificate des Konnektors benutzen. Wird durch die Operation ein Prüfergebnis "INVALID" zurückgegeben, MUSS der beabsichtigte Verbindungsaufbau abgebrochen werden.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125554">
   <p><b>A_22348</b></p>
   <p>Das Clientmodul KANN das Ergebnisse der Zertifikatsprüfung für eine definierte Zeitdauer (Tabelle 15: Tab_Konf_Param Standardkonfiguration allgemeine Parameter) temporär und manipulationssicher speichern. Für die Zuordnung sind eindeutige Identifikatoren, wie bspw. der Zertifikats-Fingerabdruck, zu verwenden. Bei erneuter Prüfung eines gleichen Zertifikats kann das vorangegangene Verifikations-Ergebnis dieses Zertifikats genutzt werden. Die Speicherdauer ist an die zeitliche Gültigkeit ("notAfter") des Zertifikats anzupassen.<span style="background-color: #FFFF99;"><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125242">
   <p><b>KOM-LE-A_2182-01</b></p>
   <p>Das Clientmodul MUSS sich mit dem vom KOM-LE-Anbieter zur Verfügung gestellten TLS-Client-Zertifikat C.CM.TLS-CS gegenüber den KOM-LE-Fachdienst-Komponenten authentifizieren.<br> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16781">4.2 Nutzung von Webservice-Schnittstellen des Konnektors</h3>
  <p id="polarion_762">Aus der Herstellerdokumentation des Konnektors ist der FQDN zu entnehmen, unter dem der Konnektor seinen Dienstverzeichnisdienst anbietet. Innerhalb des FQDN können Hostname und Domain-Name je nach Konfiguration der LE-Umgebung individuell konfiguriert sein. Der resultierende FQDN des Dienstverzeichnisdienstes muss in die Konfiguration des Clientmoduls übernommen werden.</p>
  <p id="polarion_763">Durch das Auslesen des Dienstverzeichnisdienstes erhält das Clientmodul Webservice-Endpunkte von Diensten des Konnektors. Die Dienste des Konnektors sind versioniert. Es ist möglich, dass ein Konnektor mehrere Versionen eines Dienstes gleichzeitig anbietet. Die Versionierung der Dienste hilft dem Clientmodul dabei, genau die Dienstversionen zu nutzen, die es clientseitig implementiert hat.</p>
  <p id="polarion_764">Da nicht davon ausgegangen werden kann, dass die Inhalte des Dienstverzeichnisdienstes statisch sind, sollte das Lesen des Verzeichnisses beim Programmstart und in Fehlersituationen erfolgen, um den Dienstverzeichnis-Cache zu erneuern. Die weitere Kommunikation mit den Diensten des Konnektors erfolgt dann über die im Dienstverzeichnis-Cache propagierten Dienstendpunkte.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16782">
   <p><b>KOM-LE-A_2076</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS die Endpunkte der Services, die der Konnektor anbietet, aus dem Dienstverzeichnisdienst (DVD) </span><span>ermitteln </span><span>und die Endpunktinformationen der Dienste lokal cachen.</span><span> Der DVD ist</span><span> unter einem FQDN</span><span>,</span><span> der </span><span>im Clientmodul konfiguriert ist, erreichbar.</span><span> Wenn ein Verbindungsproblem auftritt (Dienst nicht erreichbar), </span><span>MUSS</span><span> das Clientmodul einen Refresh auf die Endpunktinformationen des Dienstverzeichnisdienstes durchführen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16783">
   <p><b>KOM-LE-A_2077</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS in der Lage sein, die von ihm unterstützte Dienstversion unter mehreren vom Konnektor angebotenen Dienstschnittstellen auszuwählen. </span></p> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16784">4.3 Protokollierung/Logging</h3>
  <p id="polarion_767">Das Clientmodul soll Protokolldateien schreiben, die eine Analyse technischer Vorgänge erlauben. Diese Protokolldateien sind dafür vorgesehen, aufgetretene Fehler zu identifizieren, die Performance zu analysieren und interne Abläufe zu beobachten. Um die Anforderungen an den Datenschutz zu gewährleisten, dürfen keine medizinischen und personenbezogenen Daten protokolliert werden. Geheimes Schlüsselmaterial darf ebenfalls nicht protokolliert werden.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16785">
   <p><b>KOM-LE-A_2079</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul MUSS das Protokollieren von Abläufen, Performanceinformationen und Fehlern ermöglichen. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16786">
   <p><b>KOM-LE-A_2080</b></p>
   <p><p style="margin-left: 0px;"><span>Das Clientmodul DARF me</span><span>d</span><span>izinische </span><span>und </span><span>personenbezogene Daten</span><span> sowie geheimes Schlüsselmaterial</span><span> </span><span>und Passwörter</span><span> </span><span>NICHT protokollieren. </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_770"> Die Protokolldateien folgen einem einheitlichen Format, das vom Hersteller festgelegt wird. Es muss geeignet sein, automatische Auswertungen mit wenig Aufwand durch Dritte zu ermöglichen. Ein Vorbild ist das Weblog des Apache Webservers.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16787">
   <p><b>KOM-LE-A_2081</b></p>
   <p><p style="margin-left: 0px;"><span>Das</span><span> KOM-LE-Clientmodul</span><span> MUSS Protokoll</span><span>dateien in einem einheitlichen </span><span>Format erstellen, um eine automatisierte Auswertung zu ermöglichen</span><span>. </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_772">Der Zugriff auf Protokolldateien muss auf autorisierte Personen durch angemessene technische oder organisatorische Maßnahmen eingeschränkt werden. Die Logdateien können auf ein separates Speichermedium kopiert werden. Zudem soll der Administrator das Protokollieren für die Performanceanalyse und der internen Abläufe einzeln deaktivieren und wieder aktivieren können. Für den Produktivbetrieb soll das Protokollieren der internen Abläufe grundsätzlich deaktiviert sein. Damit die Protokolldateien nur begrenzten Speicherplatz belegen, werden sie automatisch nach einem konfigurierbaren Zeitraum gelöscht bzw. überschrieben.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16788">
   <p><b>KOM-LE-A_2082</b></p>
   <p><p style="margin-left: 0px;"><span>Das</span><span> KOM-LE-Clientmodul </span><span>MUSS den Zugriff auf Protokolldateien auf autorisierte Personen durch angemessene technische oder organisatorische Maßnahmen einschränken.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16789">
   <p><b>KOM-LE-A_2083</b></p>
   <p><p style="margin-left: 0px;"><span>Das </span><span>KOM-LE-Clientmodul MUSS autorisiertem</span><span> Personal das Anfertigen von Kopi</span><span>en der Protokolldateien auf sepa</span><span>rate</span><span>n</span><span> Speichermedien ermöglichen</span><span>. </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16790">
   <p><b>KOM-LE-A_2084</b></p>
   <p><p style="margin-left: 0px;"><span>Das </span><span>KOM-LE-Clientmodul</span><span> MUSS das Aktivieren und Deaktivieren </span><span>der Protokollierung von Performanceinformationen e</span><span>rmöglichen.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16791">
   <p><b>KOM-LE-A_2085</b></p>
   <p><p style="margin-left: 0px;"><span>Das </span><span>KOM-LE-Clientmodul</span><span> MUSS den verwendeten Speicherplatz für die Protokolldateien begrenzen, indem diese automatisch nach einem konfigurierbaren Zeitraum gelöscht oder überschrieben werden.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_777">Um mehrere Protokolleinträge zu korrelieren, soll beim Aufruf einer Operation eine Vorgangsnummer gebildet werden. Diese Vorgangsnummer wird in allen Protokolleinträgen dieses Operationsaufrufs genutzt. Die Vorgangsnummer wird vom KOM-LE-Clientmodul pseudozufällig gebildet.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16792">
   <p><b>KOM-LE-A_2086</b></p>
   <p><p style="margin-left: 0px;"><span>Das </span><span>KOM-LE-Clientmodul</span><span> </span><span>MUSS eine Vorgangsnummer bei</span><span>m</span><span> Aufruf einer Operation </span><span>pseudozufällig </span><span>bilden, um alle zugehörigen Protokolleinträge zum Operationsaufruf zu korrelieren.</span><span> </span></p> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16793">4.3.1 Ablaufprotokoll</h4>
  <p id="polarion_779"> Die Protokolleinträge im Ablaufprotokoll enthalten mindestens die in Tabelle Tab_Felder_Ablauf_Prot aufgezählten Felder.<br> </p>
  <p id="polarion_441" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">9</span>: Tab_Felder_Ablauf_Prot Felder im Ablaufprotokoll </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=6" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Feld</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beschreibung</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Vorgangsnummer</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Pseudo-zufällige Zeichenkette zur Korrelation der Protokolleinträge</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Zeitpunkt</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Zeitpunkt der Erstellung des Protokolleintrags</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beschreibung</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Details zum Ausführungsschritt</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_782">Das Ablaufprotokoll soll die Ausführungsschritte enthalten, die einen Einblick in den internen Ablauf für Administratoren, Anbieter und Tester ermöglichen und die Analyse von Fehlersituationen erleichtern.</p>
  <p id="polarion_783"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16794">
   <p><b>KOM-LE-A_2087</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das KOM-LE-Clientmodul MUSS die Protokollierung des Ablaufs mit mindestens folgenden Feldern ermöglichen:</span></p>
    <ul>
     <li><p><span>pseudozufällige Zeichenkette zur Korrelation der Protokolleinträge,</span></p></li>
     <li><p><span>Zeitpunkt der Erstellung des Protokolleintrags und</span></p></li>
     <li><p><span>Details zum Ausführungsschritt.</span></p></li>
    </ul><p><br></p> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16795">4.3.2 Performance</h4>
  <p id="polarion_785">Die Protokolleinträge im Performanceprotokoll enthalten mindestens die in Tabelle Tab_Felder_Perf_Prot aufgezählten Felder und müssen geeignet sein, um die tatsächlichen Ausführungszeiten des KOM-LE-Clientmoduls mit den Vorgaben in Kapitel 4.6.1 zu vergleichen. Für jeden Aufruf einer Schnittstelle des Clientmoduls KOM-LE werden ein oder mehrere Protokolleinträge geschrieben.</p>
  <p id="polarion_786"></p>
  <p id="polarion_450" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">10</span>: Tab_Felder_Perf_Prot Felder im Performance-Protokoll </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=7" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Feld</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beschreibung</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Vorgangsnummer</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Pseudozufällige Zeichenkette zur Korrelation der Protokolleinträge</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Name der Aktion</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Name der Aktion für Protokolleintrag</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Startzeitpunk</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Startzeitpunkt der Aktion</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Endezeitpunkt</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Endezeitpunkt der Aktion</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Dauer in ms</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Dauer in ms</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_789"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16796">
   <p><b>KOM-LE-A_2088</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das KOM-LE-Clientmodul MUSS die Protokollierung der Performance mit mindestens folgenden Feldern ermöglichen:</span></p>
    <ul>
     <li><p><span>pseudozufällige Zeichenkette zur Korrelation der Protokolleinträge,</span></p></li>
     <li><p><span>Name der Aktion für den Protokolleintrag,</span></p></li>
     <li><p><span>Startzeitpunkt der Aktion,</span></p></li>
     <li><p><span>Endezeitpunkt</span> <span>der Aktion und</span></p></li>
     <li><p><span>Dauer in</span> <span>ms.</span></p></li>
    </ul><p><br></p> <b>&lt;=</b></p>
  </div>
  <p id="polarion_791"> Jede der in Tabelle Tab_Auslöser_Prot_Entry aufgelisteten Aktionen führt zu einem Eintrag im Performanceprotokoll. Diese Durchlaufzeiten sollen separat protokolliert werden, damit die Ausführungszeit des Clientmoduls ohne Zeiten anderer Komponenten ermittelbar ist.<br> </p>
  <p id="polarion_462" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">11</span>: Tab_Auslöser_Prot_Entry Auslöser Protokolleinträge im Performanceprotokoll </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=8" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 162px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Auslöser</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 194px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Name der Aktion für Protokolleintrag</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 253.2px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beschreibung</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 162px;height: 79.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Ankommen einer SMTP bzw. POP3-Meldung</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 194px;height: 79.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">SMTP bzw. POP3-Meldung</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 253.2px;height: 79.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Wird beim Ankommen einer SMTP bzw. POP3-Meldung ausgelöst und endet mit der Weiterleitung an den Fachdienst oder der Antwort an das Clientsystem.</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 162px;height: 59.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Aufruf einer Operation des Konnektors</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 194px;height: 59.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Name der Operation</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 253.2px;height: 59.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Wird durch den Aufruf einer Operation des Konnektors ausgelöst und endet mit der Rückkehr der Aktion</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_33"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16797">
   <p><b>KOM-LE-A_2089</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das KOM-LE-Clientmodul MUSS für die folgenden Aktionen Einträge in das Performanceprotokoll schreiben:</span></p>
    <ul>
     <li><p><span>Ankommen einer SMTP bzw. POP3-Meldung und</span></p></li>
     <li><p><span>Aufruf einer Schnittstelle des Konnektors.</span></p></li>
    </ul><p><br></p> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16798">4.3.3 Fehler</h4>
  <p id="polarion_796">Tritt innerhalb einer Operation ein Fehler auf bzw. wird eine Operation nicht beendet, soll trotzdem ein Protokolleintrag erstellt werden, in dem eindeutig auswertbar ist, dass die Ausführung der Operation fehlerhaft war.</p>
  <p id="polarion_797">Die Protokolleinträge im Fehlerprotokoll enthalten mindestens die in Tabelle Tab_Felder_Fehler_Prot aufgezählten Felder.</p>
  <p id="polarion_798"></p>
  <p id="polarion_467" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">12</span>: Tab_Felder_Fehler_Prot Felder im Fehlerprotokoll </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=9" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Feld</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beschreibung</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Vorgangsnummer</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 39.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Pseudozufällige Zeichenkette zur Korrelation der Protokolleinträge</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Zeitpunkt</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Zeitpunkt der Erstellung des Protokolleintrags</span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 210px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Fehlerdetails</span><br> </td> 
     <td style="text-align: left;vertical-align: top;width: 385.2px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Weiterführende Details zur Fehlermeldung</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_216"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16799">
   <p><b>KOM-LE-A_2090</b></p>
   <p>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="HTML Tidy for Java (vers. 26 Sep 2004), see www.w3.org" name="generator"><title></title><p><span>Das KOM-LE-Clientmodul MUSS die Protokollierung von Fehlern mit mindestens folgenden Feldern ermöglichen:</span></p>
    <ul>
     <li><p><span>pseudozufällige Zeichenkette zur Korrelation der Protokolleinträge,</span></p></li>
     <li><p><span>Zeitpunkt der Erstellung des Protokolleintrags und</span></p></li>
     <li><p><span>Details zur Fehlermeldung.</span></p></li>
    </ul><p><br></p> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16800">4.4 Konfiguration</h3>
  <p id="polarion_802">Die in der Tabelle Tab_Konf_Param aufgeführten Parameter müssen über eine Managementoberfläche oder eine Konfigurationsdatei für das KOM-LE-Clientmodul konfigurierbar sein.</p>
  <p id="polarion_221"></p>
  <p id="polarion_468" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">13</span>: Tab_Konf_Param Standardkonfiguration allgemeine Parameter </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=10" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Parameter</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Beschreibung des Parameters</span><br> </th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 10pt;line-height: 1.5;">Defaultwert</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;">TLS_AUTH_KONNEKTOR<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;">Authentifizierung des Clientmoduls gegenüber dem Konnektor bei aktivierter TLS-Verbindung (zertifikatsbasiert, Basic-Authentifizierung, ohne)<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 57.2px;border: 1px solid #CCCCCC;padding: 5px;">zertifikats-basiert<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">KONNEKTOR_TIMEOUT<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Timeout für Aufrufe von&nbsp;&nbsp;Schnittstellen des Konnektors<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">1 Minute&nbsp;&nbsp;&nbsp;&nbsp;<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">SMTP_TIMEOUT_SERVER<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Timeout für Antworten vom SMTP-Server auf SMTP-Kommandos<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">5 Minuten<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">SMTP_TIMEOUT_CLIENT<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">Timeout für das Warten auf neue SMTP-Kommandos vom Clientsystem<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">5 Minuten<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">POP3_TIMEOUT_SERVER<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Timeout für Antworten vom POP3-Server auf POP3-Kommandos<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">5 Minuten<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">POP3_TIMEOUT_CLIENT<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">Timeout für das Warten auf neue POP3-Kommandos vom Clientsystem<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">5 Minuten<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">TTL_ENC_CERT<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Time to Live für gecachte Verschlüsselungs-zertifikate und Prüfergebnisse<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">12 Stunden<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">TTL_EMAIL_ICCSN<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">Time to Live für gecachte Zuordnungen von E-Mail-Adressen der Sender bzw. Empfänger zu ICCSNs von deren HBAs/SM-Bs<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">30 Tage<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">TTL_PROTS<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Time to Live für Protokolldateien.<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">30 Tage<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">PROT_PERF<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Protokolldatei für Performance<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">JA<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">KONNEKTOR_URI<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">URI des DVD des Konnektors<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">-<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 224.4px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">CM_KAS_TIMEOUT</td> 
     <td style="text-align: left;vertical-align: top;width: 394px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">Timeout bei Inaktivität der Kommunikation zwischen Clientmodul und KAS</td> 
     <td style="text-align: left;vertical-align: top;width: 118.8px;height: 23.6px;border: 1px solid #CCCCCC;padding: 5px;">30 Sekunden</td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_222"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-125234">
   <p><b>KOM-LE-A_2091-01</b></p>
   <p>Das KOM-LE-Clientmodul MUSS die in Tabelle Tab_Konf_Param aufgelisteten Parameter ausschließlich dem berechtigten Akteur über eine Managementoberfläche oder eine Konfigurationsdatei zur Konfiguration anbieten.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16802">
   <p><b>KOM-LE-A_2184</b></p>
   <p><p style="margin-left: 0px;"><span>Die Konfiguration des Clientmoduls MUSS mit den in Tabelle </span><span></span><span></span><span></span><span>Tab_Konf_Param Standardkonfiguration allgemeine Parameter</span><span></span><span> definierten Defaultwerten ausgeliefert werden. </span></p> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16803">4.5 Update-Mechanismen</h3>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16804">
   <p><b>KOM-LE-A_2225</b></p>
   <p><p style="margin-left: 0px;"><span>Der Hersteller des Clientmoduls MUSS Mechanismen für das Updaten des Clientmoduls zur Verfügung stellen. Diese Mechanismen MÜSSEN es auch ermöglichen, dass die TLS-Zertifikate und das zugehörige Schlüsselmaterial des Clientmoduls auf sichere Art und Weise erneuert werden können. </span></p> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16805">4.6 Produktleistungen</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16806">4.6.1 Performance</h4>
  <p id="polarion_810">Die durch das Clientmodul einzuhaltenden Performanceanforderungen werden in diesem Dokument nicht betrachtet sondern in [gemSpec_Perf] aufgeführt.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16807">4.6.2 Skalierbarkeit</h4>
  <p id="polarion_811">Das Clientmodul kann in Einzelpraxen, Praxisgemeinschaften, Gemeinschaftspraxen oder in medizinischen Versorgungszentren (MVZ) eingesetzt werden. Zusätzlich ist der Einsatz in Krankenhäusern und Umgebungen der Kostenträger vorgesehen. In diesen Umgebungen sind gleichzeitige Sende- und Abholvorgänge möglich. Das Clientmodul muss in der Lage sein, solche Vorgänge parallel bearbeiten zu können.</p>
  <p id="polarion_812">Im Rahmen dieser Spezifikation wird gefordert, dass ein KOM-LE-Clientmodul grundsätzlich beliebig viele parallele Sende- und Abholvorgänge unterstützt. Die Anzahl der tatsächlich unterstützten parallelen Aufrufe wird durch die eingesetzte Hardware und Beschränkungen des Herstellers begrenzt.</p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-16808">
   <p><b>KOM-LE-A_2094</b></p>
   <p>Das Clientmodul MUSS gleichzeitig für mehrere Clientsysteme nutzbar sein, wobei die Anzahl der tatsächlich unterstützten parallelen Aufrufe dem Hersteller überlassen ist. <br> <b>&lt;=</b></p>
  </div>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-16809">5 Anhang A – Verzeichnisse</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16810">5.1 Abkürzungen</h3>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=223" style="width: 100%;margin-left: auto;margin-right: auto;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Kürzel</span><br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Erläuterung</span><br> </th> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">AUTH</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Authentisierung</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">CMS</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Cryptographic Message Syntax</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">DER</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Distinguished Encoding Rules</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">DVD</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Dienstverzeichnisdienst</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">FQDN</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Fully Qualified Domain Name</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">HBA</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Heilberufsausweis</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">ICCSN</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Integrated Circuit Card Serial Number</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">ID</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Identifier</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;">KAS</td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;">KOM-LE Attachment Service</td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">KOM-LE</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Kommunikation für Leistungserbringer</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">LDAP</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Leightweight Directory Access Protocol</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">LE</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Leistungserbringer</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">MTA</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Mail Transfer Agent</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">MUA</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Mail User Agent</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">OCSP</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Online Certificate Status Protocol</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">PIN</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Personal Identification Number</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">POP3</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Post Office Protocol Version 3</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">S/MIME</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Secure/Multipurpose Internet Mail Extensions</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">SMTP</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Simple Mail Transfer Protocol</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">SSL</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Secure Socket Layer</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">TCP</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Transmission Control Protocol</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">TI</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Telematikinfrastruktur</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">TLS</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Transport Layer Security</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">URL</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Uniform Resource Locator</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 73pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">VZD</span><br> </td> 
     <td style="vertical-align: top;width: 333pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">Verzeichnisdienst</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16811">5.2 Glossar</h3>
  <p id="polarion_816">Das Glossar wird als eigenständiges Dokument (vgl. [gemGlossar]) zur Verfügung gestellt.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16812">5.3 Abbildungsverzeichnis</h3>
  <div data-sequence="Abbildung" id="polarion_wiki macro name=tof;params=uid=1"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion_26">Abbildung 1: Abb_Dok_Hierarchie Dokumentenhierarchie KOM-LE</a></li>
   <li><a href="#polarion_59">Abbildung 2: Abb_KOMLE_Komp KOM-LE-Komponenten</a></li>
   <li><a href="#polarion_60">Abbildung 3: Abb_Struk_KOMLE_Msg Struktur einer KOM-LE-Nachricht</a></li>
   <li><a href="#polarion_123">Abbildung 4: Administrationsmodul für die Kommunikation mit dem Account Manager</a></li>
   <li><a href="#polarion_61">Abbildung 5: Abb_Send_Msg Senden von Nachrichten</a></li>
   <li><a href="#polarion_66">Abbildung 6: Abb_State_CM_Send Zustände Clientmodul beim Senden von Nachrichten</a></li>
   <li><a href="#polarion_84">Abbildung 7: Abb_MTA_Nutzername Format des SMTP- Benutzernamens</a></li>
   <li><a href="#polarion_106">Abbildung 8: Abb_Sig_Verschl Signieren und Verschlüsseln entsprechend S/MIME Profil</a></li>
   <li><a href="#polarion_142">Abbildung 9: Abb_Verschl_Msg Verschlüsselung einer Nachricht</a></li>
   <li><a href="#polarion_229">Abbildung 10: Abb_Empfangen_Msg Empfangen von Nachrichten</a></li>
   <li><a href="#polarion_232">Abbildung 11: Abb_Status_CM_Empfang Zustände Clientmodul beim Nachrichtenempfang</a></li>
   <li><a href="#polarion_236">Abbildung 12: Abb_POP3_Nutzer_Name Format des POP3- Benutzernamens</a></li>
   <li><a href="#polarion_428">Abbildung 13: Abb_Zugriff_SMB SM-B-Zugriff zur Erstellung der Nachrichtensignatur</a></li>
   <li><a href="#polarion_439">Abbildung 14: Abb_Zugriff_SMB_HBA SM-B/HBA-Zugriff zur Nachrichtentschlüsselung</a></li>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16813">5.4 Tabellenverzeichnis</h3>
  <div data-sequence="Tabelle" id="polarion_wiki macro name=tof;params=uid=2"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion___1">Tabelle 1 KIM-Attachment-Datenstruktur</a></li>
   <li><a href="#polarion_859">Tabelle 2 Tab_Fehlertext_Download Fehlertext beim Download von E-Mail-Daten</a></li>
   <li><a href="#polarion_77">Tabelle 3: Tab_SMTP_Ant_Init Antworten Clientmodul im CONNECT-Zustand</a></li>
   <li><a href="#polarion_95">Tabelle 4: Tab_SMTP_Verbindung SMTP-Antwortcodes für MTA-Verbindungsaufbau</a></li>
   <li><a href="#polarion_234">Tabelle 5: Tab_POP3_Ant_Init Antworten Clientmodul im CONNECT-Zustand</a></li>
   <li><a href="#polarion_289">Tabelle 6: Tab_POP3_Verbindung Antwortcodes für POP3-Server-Verbindungsaufbau</a></li>
   <li><a href="#polarion_769">Tabelle 7: Tab_Verm_Sig_Prüf Vermerke mit Ergebnissen der Signaturprüfung</a></li>
   <li><a href="#polarion_118">Tabelle 8:&nbsp;Tab_Header_Kat Header-Feld Kategorie</a></li>
   <li><a href="#polarion_441">Tabelle 9: Tab_Felder_Ablauf_Prot Felder im Ablaufprotokoll</a></li>
   <li><a href="#polarion_450">Tabelle 10: Tab_Felder_Perf_Prot Felder im Performance-Protokoll</a></li>
   <li><a href="#polarion_462">Tabelle 11: Tab_Auslöser_Prot_Entry Auslöser Protokolleinträge im Performanceprotokoll</a></li>
   <li><a href="#polarion_467">Tabelle 12: Tab_Felder_Fehler_Prot Felder im Fehlerprotokoll</a></li>
   <li><a href="#polarion_468">Tabelle 13: Tab_Konf_Param Standardkonfiguration allgemeine Parameter</a></li>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-16814">5.5 Referenzierte Dokumente</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16815">5.5.1 Dokumente der gematik</h4>
  <p id="polarion_817">Die nachfolgende Tabelle enthält die Bezeichnung der in dem vorliegenden Dokument referenzierten Dokumente der gematik zur Telematikinfrastruktur. Der mit der vorliegenden Version korrelierende Entwicklungsstand dieser Konzepte und Spezifikationen wird pro Release in einer Dokumentenlandkarte definiert; Version und Stand der referenzierten Dokumente sind daher in der nachfolgenden Tabelle nicht aufgeführt. Deren zu diesem Dokument jeweils gültige Versionsnummer entnehmen Sie bitte der aktuellen, auf der Internetseite der gematik veröffentlichten Dokumentenlandkarte, in der die vorliegende Version aufgeführt wird.</p>
  <p id="polarion_818"></p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=224" style="width: 100%;margin-left: auto;margin-right: auto;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">[Quelle]</span><br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Herausgeber: Titel</span><br> </th> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemGlossar]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Glossar der Telematikinfrastruktur</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemLH_KOM-LE]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Lastenheft Adressierte Kommunikation Leistungserbringer</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemSpec_FD_KOMLE]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Spezifikation Fachdienst KOM-LE</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemSpec_Kon]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Spezifikation Konnektor</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemSpec_Krypt]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Verwendung kryptographischer Algorithmen in der Telematikinfrastruktur</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemSpec_PKI]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Spezifikation PKI</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemSMIME_KOMLE]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: KOM-LE S/MIME Profil 1.0</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[gemSysL_KOMLE]</span><br> </td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik: Systemspezifisches Konzept KOM-LE</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[AccountManager.yaml]<br> </span></td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">gematik:&nbsp;<a href="https://github.com/gematik/api-kim/blob/master/src/openapi/AccountManager.yaml&nbsp;" target="_top" class="descriptionLink">https://github.com/gematik/api-kim/blob/master/src/openapi/AccountManager.yaml&nbsp;</a></span></td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 167px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">[Attachment_Schema]</td> 
     <td style="vertical-align: top;width: 560px;height: 14pt;border: 1px solid #CCCCCC;padding: 4pt;">gematik: <a href="https://github.com/gematik/api-kim/blob/master/src/schema/Attachment_schema.json" target="_top" class="descriptionLink">https://github.com/gematik/api-kim/blob/master/src/schema/Attachment_schema.json</a></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_225"></p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-16816">5.5.2 Weitere Dokumente</h4>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=226" style="width: 100%;margin-left: auto;margin-right: auto;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">[Quelle]</span><br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Herausgeber (Erscheinungsdatum): Titel</span><br> </th> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;">[RFC1123]</td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;">RFC: Requirements for Internet Hosts -- Application and Support</td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC1939]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 1939: Post Office Protocol – Version 3, J. Myers, M. Rose, Mai 1996</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC2045]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 2045: Multipurpose Internet Mail Extension (MIME) Part One: Format of Internet Message Bodies, N. Freed, N. Borenstein, November 1996</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC2046]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 2046: Multipurpose Internet Mail Extension (MIME) Part Two: Media Types, N. Feed, N. Borenstein, November 1996</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC2449]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 2449: POP3 Extension Mechanism, R. Gellens, C. Newman, L. Lundblade, November 1998</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;">[RFC2822]</td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;">RFC 2822: Internet Message Format</td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC3463]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 3463: Enhanced Mail System Status Codes, G. Vaudreuil, Januar 2003</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC4616]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 4616: The PLAIN Simple Authentication and Security Layer (SASL) Mechanism, K. Zeilenga, August 2006</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC4954]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 4954: SMTP Service Extension for Authentication, R. Siemborski, A. Melnikov, März 2007</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC5321]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 5321: Simple Mail Transfer Protocol, J. Klensin, Oktober 2008</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC5322]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 14pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 5322: Internet Message Format, P. Resnick, Ed., Oktober 2008</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC5750]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 5750: Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.2 Certificate Handiling, B. Ramsdell, S. Turner, Januar 2010</span><br> </td> 
    </tr> 
    <tr> 
     <td style="vertical-align: top;width: 113pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">[RFC5751]</span><br> </td> 
     <td style="vertical-align: top;width: 448pt;height: 29pt;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 4pt;"><span style="font-size: 10pt;line-height: 1.5;">RFC 5751: Secure/Multipurpose Internet Mail Extensions (S/MIME) Version 3.2 Message Specification, B. Ramsdell, S. Turner, Januar 2010</span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_91"></p>
 </body>
</html>