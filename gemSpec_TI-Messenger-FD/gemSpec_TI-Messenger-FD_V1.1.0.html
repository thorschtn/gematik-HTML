<html>
 <head>
  <link rel="stylesheet" href="attachments/styleSheetForToc.css">
 </head>
 <body>
  <p id="polarion_1"> <br> </p>
  <p id="polarion_2"> <br> </p>
  <p id="polarion_3"> <br> </p>
  <p id="polarion_4"> <br> </p>
  <p id="polarion_5"> <br> </p>
  <p id="polarion_6"> <span style="font-weight: bold;text-decoration: underline;">Elektronische Gesundheitskarte und Telematikinfrastruktur</span> </p>
  <p id="polarion_7"> <br> </p>
  <p id="polarion_8"> <br> </p>
  <p id="polarion_9"> <br> </p>
  <p id="polarion_10"> <br> </p>
  <p id="polarion_11" style="text-align: center;"> <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">Spezifikation</span> </p>
  <p id="polarion_12" style="text-align: center;"> <span style="font-weight: bold;font-size: 28pt;line-height: 1.2;">TI-Messenger-Fachdienst</span> </p>
  <p id="polarion_13"> <br> </p>
  <p id="polarion_14"> <br> </p>
  <p id="polarion_15"> <br> </p>
  <div id="polarion_editor_html_block2" class="polarion-dle-wiki-block"> 
   <div id="polarion_editor_html_block_content" contenteditable="false"></div>
   <pre id="polarion_editor_html_block_source" class="polarion-dle-wiki-block-source" contenteditable="false">
    <table>
     <tr>
      <td>Version</td>
      <td>1.1.0</td>
     </tr>
     <tr>
      <td>Revision</td>
      <td>567567</td>
     </tr>
     <tr>
      <td>Stand</td>
      <td>29.07.2022</td>
     </tr>
     <tr>
      <td>Status</td>
      <td>in Bearbeitung</td>
     </tr>
     <tr>
      <td>Klassifizierung</td>
      <td>öffentlich</td>
     </tr>
     <tr>
      <td>Referenzierung</td>
      <td>gemSpec_TI-Messenger-FD</td>
     </tr>
    </table></pre> 
  </div>
  <p id="polarion_16"></p>
  <h1 id="polarion_wiki macro name=module-workitem;params=id=ML-118358">Dokumentinformationen</h1>
  <p id="polarion_21"></p>
  <p id="polarion_158"> <span style="font-weight: bold;">Änderungen zur Vorve</span><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">rsion</span> </p>
  <p id="polarion_22">Anpassungen des vorliegenden Dokumentes im Vergleich zur Vorversion können Sie der nachfolgenden Tabelle entnehmen.</p>
  <p id="polarion_24"></p>
  <p id="polarion_25" data-keep-next="true"> <span style="font-weight: bold;">Dokumentenhistorie</span> </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=6" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 78px;height: 38px;border: 1px solid #CCCCCC;padding: 5px;">Version </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 86.8px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Stand </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 65.2px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Kap./ Seite </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 348.4px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Grund der Änderung, besondere Hinweise </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120.4px;height: 38px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Bearbeitung </span></th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">1.0.0&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">01.10.2021</td> 
     <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Erstversion des Dokumentes&nbsp;&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">gematik</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">1.1.0&nbsp;</td> 
     <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">29.07.2022</td> 
     <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Überarbeitung folgender Features:<br> – Erreichbarkeit einzelner Organisationseinheiten mittels Funktionsaccounts<br> – Öffnung des TI-Messengers für Drittsysteme durch clientseitige Schnittstellen zur Integration z.B. ins Praxisverwaltungssystem&nbsp;<br> – schnelles Finden von Kontaktdaten durch Zugriff auf FHIR-basiertes Adressbuch&nbsp;</span></td> 
     <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;">gematik</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 78px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 86.8px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">16.08.22</td> 
     <td style="text-align: left;vertical-align: top;width: 65.2px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"></td> 
     <td style="text-align: left;vertical-align: top;width: 348.4px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Möglichkeit einer Art Zugriffskontrolle für Org-Admin</td> 
     <td style="text-align: left;vertical-align: top;width: 120.4px;height: 18.8px;border: 1px solid #CCCCCC;padding: 5px;"></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_27"></p>
  <h1 id="polarion_wiki macro name=module-workitem;params=id=ML-118359">Inhaltsverzeichnis</h1>
  <div id="polarion_wiki macro name=toc"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion_wiki macro name=module-workitem;params=id=ML-118358">Dokumentinformationen</a></li>
   <li><a href="#polarion_wiki macro name=module-workitem;params=id=ML-118359">Inhaltsverzeichnis</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118360">1 Einordnung des Dokumentes</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118361">1.1 Zielsetzung</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118362">1.2 Zielgruppe</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118363">1.3 Geltungsbereich</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118364">1.4 Abgrenzungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118365">1.5 Methodik</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118366">2 Systemüberblick</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118367">3 Systemkontext</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118369">3.1 Nachbarsysteme</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122232">3.2 Messenger-Services</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118371">4 Übergreifende Festlegungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118967">4.1 Datenschutz und Sicherheit</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-119137">4.2 Authentifizierung</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118979">4.3 DNS-Namensauflösung</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-119240">4.4 Test</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-119241">4.5 Betrieb</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-133260">4.5.1 Monitoring und Betriebssteuerung</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118372">5 Funktionsmerkmale</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122270">5.1 Funktionen der Systemkomponenten</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122271">5.1.1 Registrierungs-Dienst</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-123906">5.1.2 Messenger-Service</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122268">5.1.2.1 Messenger-Proxy</a></li>
   <li> : : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122273">5.1.2.2 Matrix-Homeserver</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-122272">5.1.3 Push-Gateway</a></li>
   <li> : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118387">6 Anhang A – Verzeichnisse</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118388">6.1 Abkürzungen</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118389">6.2 Glossar</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118390">6.3 Abbildungsverzeichnis</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118391">6.4 Tabellenverzeichnis</a></li>
   <li> : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118392">6.5 Referenzierte Dokumente</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118393">6.5.1 Dokumente der gematik</a></li>
   <li> : : : <a href="#polarion_wiki macro name=module-workitem;params=id=ML-118394">6.5.2 Weitere Dokumente</a></li>
  </div>
  <p id="polarion_38"></p>
  <div id="polarion_wiki macro name=page_break;params=uid=1" contenteditable="false" data-is-landscape="false"></div>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118360">1 Einordnung des Dokumentes</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118361">1.1 Zielsetzung</h3>
  <p id="polarion_40"> Beim vorliegenden Dokument handelt es sich um die Festlegungen zur ersten Ausbaustufe des TI-Messengers. Diese Ausbaustufe ist definiert durch die Ad-hoc-Kommunikation zwischen Organisationen des Gesundheitswesens. Dabei wird insbesondere die Ad-hoc-Kommunikation zwischen Leistungserbringern bzw. zwischen Leistungserbringerinstitutionen betrachtet. Festlegungen zur Nutzergruppe der Versicherten und Anforderungen an Krankenversicherungsorganisationen<span id="polarion-comment:372"></span>&nbsp;<span id="polarion-comment:255"></span>werden in der zweiten Ausbaustufe des TI-Messengers Berücksichtigung finden und daher im vorliegenden Dokument nicht weiter betrachtet.<span id="polarion-comment:240"></span> </p>
  <p id="polarion_61">Die vorliegende Spezifikation definiert die Anforderungen zu Herstellung, Test und Betrieb des Produkttyps TI-Messenger-Fachdienst. Der Fachdienst ermöglicht die sichere Ad-hoc-Kommunikation zwischen Teilnehmern.&nbsp;Aus den Kommunikationsbeziehungen mit dem TI-Messenger-Client und dem VZD-FHIR-Directory resultieren vom TI-Messenger-Fachdienst anzubietende Schnittstellen, die in diesem Dokument normativ beschrieben werden. Vom TI-Messenger-Fachdienst genutzte Schnittstellen liegen zumeist in anderen Verantwortungsbereichen (z. B. IDP-Dienst). Diese werden in der entsprechenden Produkttypspezifikation definiert.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118362">1.2 Zielgruppe</h3>
  <p id="polarion_44">Das Dokument richtet sich zwecks der Realisierung an Hersteller des Produkttypen Fachdienst TI-Messenger&nbsp;sowie an Anbieter, welche diesen Produkttypen betreiben [gemKPT_Betr]. Alle Hersteller und Anbieter von TI-Anwendungen, die Schnittstellen der Komponente nutzen, oder Daten mit dem Produkttypen Fachdienst TI-Messenger austauschen oder solche Daten verarbeiten,&nbsp;müssen dieses Dokument ebenso berücksichtigen.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118363">1.3 Geltungsbereich</h3>
  <p id="polarion_49">Dieses Dokument enthält normative Festlegungen zur Telematikinfrastruktur des deutschen Gesundheitswesens. Der Gültigkeitszeitraum der vorliegenden Version und deren Anwendung in Zulassungs- oder Abnahmeverfahren wird durch die gematik GmbH in gesonderten Dokumenten (z. B. gemPTV_ATV_Festlegungen, Produkttypsteckbrief, Anbietertypsteckbrief,&nbsp;u.a.) oder Webplattformen (z. B. gitHub, u.a.) festgelegt und bekanntgegeben.</p>
  <p id="polarion_104"> <span style="font-weight: bold;">Schutzrechts-/Patentrechtshinweis</span> </p>
  <p id="polarion_137"> <span style="font-style: italic;">Die nachfolgende Spezifikation ist von der gematik allein unter technischen Gesichtspunkten erstellt worden. Im Einzelfall kann nicht ausgeschlossen werden, dass die Implementierung der Spezifikation in technische Schutzrechte Dritter eingreift. Es ist allein Sache des Anbieters oder Herstellers, durch geeignete Maßnahmen dafür Sorge zu tragen, dass von ihm aufgrund der Spezifikation angebotene Produkte und/oder Leistungen nicht gegen Schutzrechte Dritter verstoßen und sich ggf. die erforderlichen Erlaubnisse/Lizenzen von den betroffenen Schutzrechtsinhabern einzuholen. Die gematik GmbH übernimmt insofern keinerlei Gewährleistungen.</span> </p>
  <p id="polarion_53"> <span style="font-style: italic;"> </span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118364">1.4 Abgrenzungen</h3>
  <p id="polarion_58"> Spezifiziert werden in dem Dokument die von dem Produkttyp bereitgestellten (angebotenen) Schnittstellen. Benutzte Schnittstellen werden hingegen in der Spezifikation desjenigen Produkttypen beschrieben, der diese Schnittstelle bereitstellt. Auf die entsprechenden Dokumente wird referenziert (siehe auch Anhang, Kapitel&nbsp;<span class="polarion-rte-link" data-type="crossReference" id="fake" data-item-id="ML-118392" data-option-id="longoutline"></span>). </p>
  <p id="polarion_59">Die vollständige Anforderungslage für den Produkttyp ergibt sich aus weiteren Konzept- und Spezifikationsdokumenten, diese sind in dem Produkttypsteckbrief des Produkttyps TI-Messenger verzeichnet.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118365">1.5 Methodik</h3>
  <p id="polarion_179">Die Spezifikation ist im Stil einer RFC-Spezifikation verfasst. Dies bedeutet:&nbsp;</p>
  <ul id="polarion_183"> 
   <li><span style="font-weight: bold;">Der gesamte Text in der Spezifikation ist sowohl für den Hersteller des Produktes TI-Messenger-Fachdienst als auch für den betreibenden Anbieter entsprechend&nbsp; [gemKPT_Betr] verbindlich zu betrachten und gilt sowohl als Zulassungskriterium beim Produkt und Anbieter.<span id="polarion-comment:227"></span></span></li> 
   <li>Die Verbindlichkeit SOLL durch die dem RFC 2119 [RFC2119] entsprechenden, in Großbuchstaben geschriebenen deutschen Schlüsselworte MUSS, DARF NICHT, SOLL, SOLL NICHT, KANN gekennzeichnet werden.&nbsp;</li> 
   <li>Da in dem Beispielsatz „Eine leere Liste DARF NICHT ein Element besitzen.“ die Phrase „DARF NICHT“ semantisch irreführend wäre (wenn nicht ein, dann vielleicht zwei?), wird in diesem Dokument stattdessen „Eine leere Liste DARF KEIN Element besitzen.“ verwendet.</li> 
   <li>Die Schlüsselworte KÖNNEN außerdem um Pronomen in Großbuchstaben ergänzt werden, wenn dies den Sprachfluss verbessert oder die Semantik verdeutlicht.</li> 
  </ul>
  <p id="polarion_211">Anwendungsfälle und Akzeptanzkriterien&nbsp;als Ausdruck normativer Festlegungen werden als Grundlage für Erlangung der Zulassung durch Tests geprüft und nachgewiesen. Sie besitzen eine eindeutige, permanente ID, welche als Referenz verwendet werden SOLL. Die Tests werden gegen eine von der gematik gestellte Referenz-Implementierung durchgeführt.&nbsp;</p>
  <p id="polarion_213"> Anwendungsfälle und Akzeptanzkriterien werden im Dokument wie folgt dargestellt:<br> <span style="font-weight: bold;">&lt;ID&gt; - &lt;Titel des Anwendungsfalles / Akzeptanzkriteriums&gt;<br> </span>Text / Beschreibung<br> [&lt;=] </p>
  <p id="polarion_214">Die einzelnen Elemente beschreiben:</p>
  <ul id="polarion_215"> 
   <li><span style="font-weight: bold;">ID</span>: einen eindeutigen Identifier. </li> 
   <ul> 
    <li>Bei einem Anwendungsfall besteht der Identifier aus der Zeichenfolge 'AF_' gefolgt von einer Zahl,&nbsp;</li> 
    <li>Der Identifier eines Akzeptanzkriterium wird von System vergeben, z.B. die Zeichenfolge <span id="polarion-comment:224"></span> 'ML_' gefolgt von einer Zahl</li> 
   </ul> 
   <li><span style="font-weight: bold;">Titel des Anwendungsfalles / Akzeptanzkriteriums</span>: Ein Titel, welcher zusammenfassend den Inhalt beschreibt</li> 
   <li><span style="font-weight: bold;">Text / Beschreibung</span>: Ausführliche Beschreibung des Inhalts. Kann neben Text Tabellen, Abbildungen und Modelle enthalten</li> 
  </ul>
  <p id="polarion_216">Dabei umfasst der Anwendungsfall bzw. das Akzeptanzkriterium sämtliche zwischen ID und Textmarke [&lt;=] angeführten Inhalte.</p>
  <p id="polarion_217">Der für die Erlangung einer Zulassung notwendige&nbsp; Nachweis der Erfüllung des Anwendungsfalls wird in den jeweiligen&nbsp; Steckbriefen festgelegt, in denen jeweils der Anwendungsfall gelistet ist. Akzeptanzkriterien werden in der Regel nicht im Steckbrief gelistet.</p>
  <p id="polarion_218"> <span style="font-weight: bold;">Hinweis auf offene Punkte</span> </p>
  <table id="polarion_wiki macro name=table;params=header=no|width=100%|uid=167" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;"> 
   <tbody> 
    <tr> 
     <td style="width: 591.6px;height: 18.8px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-style: italic;color: #3333FF;">Offener Punkt: Das Kapitel wird in einer späteren Version des Dokumentes ergänzt.</span></td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_172"></p>
  <div id="polarion_wiki macro name=page_break;params=uid=173" contenteditable="false" data-is-landscape="false"></div>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118366">2 Systemüberblick</h2>
  <p id="polarion_78"> Der TI-Messenger-Fachdienst&nbsp;ermöglicht eine sichere Kommunikation zwischen verschiedenen Akteuren im deutschen Gesundheitswesen. Dieser basiert auf dem offenen <span id="polarion-comment:210"></span>und dezentralen Kommunikationsprotokoll Matrix. Dabei stellt der Matrix Standard RESTful-APIs für die sichere Übertragung von JSON-Objekten zwischen Matrix-Clients<span id="polarion-comment:2"></span> und weiteren Diensten bereit. Die sichere Kommunikation zwischen den einzelnen Akteuren findet in verschlüsselter Form in Räumen auf den beteiligten Matrix-Homeservern statt. </p>
  <p id="polarion_227"> Der TI-Messenger-Fachdienst besteht aus dezentralen und zentralen Teilkomponenten, welche bei der Produktzulassung getestet werden und die ein TI-Messenger-Anbieter bereitstellen MUSS. Bei den dezentralen Teilkomponenten handelt es sich um die Messenger-Services. Ein Messenger-Service besteht aus einem&nbsp;Matrix-Homeserver und einem Messenger-Proxy, der dafür sorgt, dass eine Föderation der Matrix-Homeserver nur zwischen verifizierten Domains stattfindet. Messenger-Services werden für einzelne Organisationen (z. B. Leistungserbringerinstitutionen, Verbände) bereitgestellt und erlauben die Nutzung durch alle berechtigten Akteure einer Organisation. Weiterhin KÖNNEN Messenger-Services Authentifizierungsverfahren anbieten, die nicht einer Organisation zugeordnet sind. Diese unterscheiden sich technisch nicht von anderen Messenger-Services. <span id="polarion-comment:291"></span>Einzig die zugeordnete Organisation bietet ein für diese Akteure notwendiges Authentifizierungsverfahren an.<span style="background-color: #FFFFCC;"><span id="polarion-comment:172"></span></span> </p>
  <p id="polarion_228"> Die Kommunikation zwischen einem TI-Messenger-Client und einem TI-Messenger-Fachdienst erfolgt immer über den Messenger-Proxy der Messenger-Services.<span id="polarion-comment:23"></span> <span id="polarion-comment:292"></span>Am Messenger-Proxy eines Messenger-Service findet zunächst die TLS-Terminierung der Verbindungen von den TI-Messenger-Clients statt. Der Messenger-Proxy kontrolliert die Zugehörigkeit zur TI-Föderation durch den Abgleich mit einer durch seinen Registrierungs-Dienst bereitgestellten Föderationsliste.<span id="polarion-comment:39"></span> Hierbei prüft der Messenger-Proxy, ob die beteiligten Matrix-Homeserver registrierte Mitglieder der Föderation sind und ein Akteur berechtigt ist, Anfragen auf dem Matrix-Homeserver auszulösen. <span id="polarion-comment:348"></span>Ebenfalls stellt der Messenger-Proxy eine Freigabeliste für die Berechtigungsprüfung (Stufe 2) bereit. Für die Administration dieser Freigabeliste durch die Akteure bietet der Messenger-Proxy den TI-Messenger-Clients eine Schnittstelle an. </p>
  <p id="polarion_230"> Neben den dezentralen Messenger-Services besteht ein TI-Messenger-Fachdienst aus den&nbsp;zentralen Teilkomponenten Registrierungs-Dienst und Push-Gateway. Über den Registrierungs-Dienst bekommt der TI-Messenger-Anbieter die Möglichkeit Messenger-Services automatisiert Organisationen zur Verfügung zu stellen und die Matrix-Domain der von ihm bereitgestellten Messenger-Services in deren Organisationsressource in das zentrale VZD-FHIR-Directory einzutragen.&nbsp;Der Registrierungs-Dienst eines TI-Messenger-Fachdienstes bietet als weitere Funktion die Bereitstellung einer <span id="polarion-comment:307"></span>Föderationsliste für die Messenger Proxies seiner Messenger-Services an.<span id="polarion-comment:347"></span> Das Push-Gateway dient zur Übertragung von Benachrichtigungen (Notifications) an die jeweiligen TI-Messenger-Clients um den Eingang einer neuen Nachricht zu signalisieren.<span style="background-color: #99FF99;"> </span> </p>
  <p id="polarion_236"> In der folgenden Abbildung sind alle beteiligten Komponenten der TI-Messenger-Architektur in vereinfachter Form dargestellt. Der in der Abbildung blau dargestellte TI-Messenger-Fachdienst zeigt alle Komponenten die in dieser Spezifikation beschrieben werden. <span style="background-color: #99FF99;"><br> <br> </span> </p>
  <p id="polarion_73" style="text-align: center;"> <img src="attachments/82-screenshot-20220601-065533.png" style="width: 550px;height: 415px;"> </p>
  <p id="polarion_23" style="text-align: center;"> <span id="polarion-comment:3"></span> </p>
  <p id="polarion_70" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">1</span>: Systemüberblick (Vereinfachte Darstellung) </p>
  <p id="polarion_34"></p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118367">3 Systemkontext</h2>
  <p id="polarion_20"> Der folgende Abschnitt setzt den TI-Messenger-Fachdienst in den Systemkontext des TI-Messenger-Dienstes.<br> <span id="polarion-comment:6"></span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118369">3.1 Nachbarsysteme</h3>
  <p id="polarion_19"> Für den Betrieb des TI-Messenger-Fachdienstes&nbsp;werden weitere Systeme benötigt. Dazu gehören zuständige IDP-Dienste welche <span id="polarion-comment:395"></span>Authentifizierungen und Autorisierungen auf Basis von SmartCard-Identitäten durchführen, sowie das VZD-FHIR-Directory. Die in Kapitel 2 zu findende Abbildung <span style="font-style: italic;">"Systemüberblick"</span> zeigt deren Beziehung zum TI-Messenger-Fachdienst. </p>
  <p id="polarion_157"> Ein IDP-Dienst <span id="polarion-comment:217"></span>stellt allen berechtigten Akteuren ID_TOKEN, gemäß des durch die OpenID Foundation [OpenID] spezifizierten Protokolls,<span id="polarion-comment:47"></span> zur Verfügung. Diese werden vom Auth-Service des VZD-FHIR-Directory verwendet, um ein search-accesstoken oder ein owner-accesstoken für den Lese- bzw. Schreibzugriff auf das FHIR-Directory zu erhalten. </p>
  <p id="polarion_18"> Das zentrale VZD-FHIR-Directory&nbsp;bildet ein Verzeichnis aller TI-Messenger-Fachdienste, Organisationen und Leistungserbringer<span id="polarion-comment:30"></span> und bietet die Möglichkeit der&nbsp;Suche von Teilnehmern anhand konfigurierter Merkmale. <span id="polarion-comment:293"></span><span id="polarion-comment:310"></span>Der Registrierungs-Dienst des TI-Messenger-Fachdienstes trägt bei erfolgreicher Verifizierung einer Organisation die Matrix-Domain des zugehörigen Messenger-Service der Organisation im VZD-FHIR-Directory ein.<span id="polarion-comment:48"></span> Durch diesen Eintrag kann der Messenger-Service an der Föderation des TI-Messenger-Dienstes teilnehmen. Das VZD-FHIR-Directory vertraut den Matrix-Homerservern der jeweiligen Messenger-Services, wenn die Domain des Messenger-Service erfolgreich in das VZD-FHIR-Directory eingetragen wurde.<span style="text-decoration: line-through;background-color: #FFFFCC;"><span id="polarion-comment:165"></span></span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122232">3.2 Messenger-Services</h3>
  <p id="polarion_141"> <span style="background-color: #FFFFCC;"><span id="polarion-comment:199"></span></span><span id="polarion-comment:218"></span>Durch TI-Messenger-Anbieter werden Messenger-Services für Organisationen des Gesundheitswesens (z. B. Arztpraxis, Krankenhaus, Apotheke, Verband, etc.) bereitgestellt. Die Bereitstellung der Messenger-Services erfolgt über den Registrierungs-Dienst eines TI-Messenger-Fachdienstes und KANN <span style="font-style: italic;">on-premise</span> oder zentral innerhalb von Rechenzentren stattfinden. Jeder Messenger-Service MUSS einer Organisation logisch zugeordnet sein. Die Messenger-Services KÖNNEN <span id="polarion-comment:326"></span>sich lediglich durch die je Organisation verwendeten Authentifizierungsverfahren unterscheiden. Diese werden durch die jeweilige Organisation festgelegt und bereitgestellt&nbsp;und ermöglichen damit die Nachnutzung bereits innerhalb der Organisation existierender Authentifizierungsverfahren. Die jeweilige Organisation MUSS die Kontrolle über die Benutzerverwaltung haben, um zu jedem Zeitpunkt Nutzer aus dem TI-Messenger ausschließen zu können. Dabei MÜSSEN Akteure vom Messenger-Service gelöscht/gesperrt werden, wenn der Nutzer innerhalb der Nutzerverwaltung gelöscht/gesperrt wurde.<span style="background-color: #FFFFCC;"><span id="polarion-comment:190"></span><span id="polarion-comment:191"></span><span id="polarion-comment:194"></span></span> </p>
  <p id="polarion_131"> <span style="font-weight: bold;background-color: #FFFFCC;"><br> </span><span style="font-weight: bold;">Authentifizierungsverfahren</span> </p>
  <p id="polarion_39"> Messenger-Services MÜSSEN je nach Art der Organisation den Akteuren ein Authentifizierungsverfahren anbieten. Sind zum Beispiel bereits Systeme wie Active-Directory oder LDAP basierende Nutzerverzeichnisse innerhalb einer Organisation verfügbar, KÖNNEN diese verwendet werden, indem der jeweilige Matrix-Homeserver bei diesen registriert wird. Sind keine Authentifizierungsverfahren in der Organisation vorhanden KÖNNEN TI-Messenger-Anbieter entsprechende Authentifizierungsverfahren zur Verfügung stellen. Diese erlauben eine Authentifizierung von Akteure (z. B. durch Benutzername/Passwort und einen zweiten Faktor)&nbsp;und können auch von weiteren Systemen nachgenutzt werden. <span id="polarion-comment:195"></span> </p>
  <p id="polarion_35"> Die nachfolgende Abbildung verdeutlicht die Nachnutzung eines existierenden Authentifizierungsverfahrens von Akteuren innerhalb einer Organisation durch einen Messenger-Service. <br> </p>
  <p id="polarion_118" style="text-align: center;" data-keep-next="true"> <span style="text-decoration: line-through;"><img src="attachments/83-screenshot-20220601-065534.png" style="width: 600px;height: 213px;"></span> </p>
  <p id="polarion_55" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">2</span>: Beispiel - Authentifizierung von Akteuren einer Organisation </p>
  <p id="polarion_136"></p>
  <p id="polarion_174"> <span style="background-color: #FFFFCC;"><span id="polarion-comment:175"></span></span> </p>
  <p id="polarion_185"> <span style="font-weight: normal;background-color: #FFFFCC;"><span id="polarion-comment:162"></span><span id="polarion-comment:171"></span></span> </p>
  <p id="polarion_195"> <span style="text-decoration: line-through;background-color: #FFFFCC;"><span id="polarion-comment:51"></span><span id="polarion-comment:219"></span> </span> </p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118371">4 Übergreifende Festlegungen</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118967">4.1 Datenschutz und Sicherheit</h3>
  <p id="polarion_82"> Zur Sicherstellung des Datenschutzes und der Sicherheit im Rahmen des TI-Messenger-Dienstes werden im Folgenden zu beachtende Anforderungen an den TI-Messenger-Fachdienst beschrieben. Anforderungen, die durch andere Systemkomponenten sichergestellt werden, sind hier nicht weiter aufgeführt.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129461">
   <p><b>A_22807</b></p>
   <p>Der TI-Messenger-Anbieter MUSS Kunden vertraglich verpflichten, dass organisationsbasierte TI-Messenger-Accounts nicht an Dritte<span id="polarion-comment:327"></span> <span style="font-size: 10pt;line-height: 1.5;">vergeben werden und nur Accounts für Akteure der Organisation erstellt werden<span id="polarion-comment:377"></span>, mit denen ein Beschäftigungsverhältnis&nbsp;oder Dienstleistervertragsverhältnis besteht. Funktionsaccounts (in Verbindung mit einem Chatbot) sind von den Vertragsverpflichtungen ausgenommen.</span><span style="font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"><span id="polarion-comment:383"></span></span><span id="polarion-comment:328"></span><span id="polarion-comment:267"></span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-129462">
   <p><b>A_22809</b></p>
   <p>TI-Messenger-Fachdienst-Hersteller MÜSSEN sicherstellen, dass sämtliche Verbindungen zwischen Komponenten des TI-Messenger-Fachdienstes mittels TLS<span id="polarion-comment:55"></span> kommunizieren, sofern diese Kommunikation die Grenzen einer<span id="polarion-comment:211"></span> virtuellen/physischen Maschine überschreitet. Hierzu MUSS mindestens serverseitiges<span id="polarion-comment:375"></span> TLS verwendet werden. Sofern kein beidseitiges TLS verwendet wird, MUSS die Authentizität der Clientseite mit gleichwertiger Sicherheit <span style="text-decoration: line-through;"><span id="polarion-comment:200"></span></span> sichergestellt werden.<span id="polarion-comment:157"></span> Es gelten die Festlegungen gemäß [gemSpec_Krypt].<span style="background-color: #FFFF99;"><span id="polarion-comment:208"></span><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132139">
   <p><b>A_22929</b></p>
   <p>TI-Messenger-Anbieter MÜSSEN sicherstellen, dass sämtliche Verbindungen zwischen Komponenten des TI-Messenger-Fachdienstes mittels TLS kommunizieren, sofern diese Kommunikation die Grenzen einer virtuellen/physischen Maschine überschreitet. Hierzu MUSS mindestens serverseitiges<span id="polarion-comment:376"></span> TLS verwendet werden. Es gelten die Festlegungen gemäß [gemSpec_Krypt].<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132319">
   <p><b>A_22936</b></p>
   <p>TI-Messenger-Anbieter KÖNNEN für die Authentisierung von Akteuren in der Rolle "User" bestehende Authentifizierungsverfahren der Organisation nachnutzen. Sollte dies der Fall sein, MÜSSEN Anbieter die Organisation und die Administratoren explizit darauf hinweisen, dass die Sicherheit der Nutzerauthentisierung damit in die Verantwortung der Organisation gegeben wird. Hierzu MUSS der Anbieter sicherstellen, dass er nur Authentifizierungsverfahren akzeptiert, die in der Hand der Organisation sind und deren Authentisierungsmittel von dieser verwaltet und gesperrt werden können. Der Anbieter MUSS sicherstellen, dass zur Authentifizierung mindestens zwei Faktoren verwendet werden und die Sicherheitsempfehlungen des BSI [BSI 2-Faktor] Berücksichtigung finden. Zur Vermeidung von Angriffen aus der Ferne auf den 2. Faktor ist ein Verfahren zu wählen, das mindestens mit "mittel" bewertet ist.&nbsp;<span style="font-size: 10pt;line-height: 1.5;">Der Anbieter MUSS sicherstellen, dass mindestens eine Authentisierung mittels OIDC-Authenticator unterstützt wird und technische Optionen für die Organisation gegeben sind, damit beide Faktoren nicht durch einen Angriffsvektor kompromittiert werden können.&nbsp;</span><span style="font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"><span id="polarion-comment:392"></span></span><br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_247"> <span style="font-style: italic;">Hinweis: A_22936 regelt lediglich die Authentisierung, die notwendig ist um ein Token zu erhalten, mit dem sich Nutzer gegen den Messenger-Service authentisieren können.</span><br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123622">
   <p><b>A_22815</b></p>
   <p>TI-Messenger-Anbieter MÜSSEN sicherstellen, dass kryptographisches Material zur Authentisierung gegen das VZD-FHIR-Directory sicher eingebracht wird. Zum Nachweis der Umsetzung ist eine Prüfung des Prozesses zur Einbringung des kryptografischen Materials erforderlich. Die Prüfung umfasst die Beschreibung und Durchführung des Prozesses.<span id="polarion-comment:378"></span> Eine Auditierung der Umsetzung ist optional.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_117"> <span id="polarion-comment:381"></span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123638">
   <p><b>A_22817</b></p>
   <p>TI-Messenger-Fachdienst-Hersteller DÜRFEN NICHT Daten zu Profilingzwecken sammeln. Dies betrifft insbesondere eine Überwachung welche Akteure mit welchen anderen Akteuren kommunizieren. <br> <br> <span style="font-style: italic;">Hinweis: Die gematik kann nach § 331 Abs. 2 SGB V Daten festlegen, die Hersteller von Komponenten und Dienste der gematik offenzulegen bzw. zu übermitteln haben, sofern diese erforderlich sind, um den gesetzlichen Auftrag der gematik zur Überwachung des Betriebs zur Gewährleistung der Sicherheit, Verfügbarkeit und Nutzbarkeit der Telematikinfrastruktur zu erfüllen. Nur die hierfür erforderlichen personenbezogenen Daten dürfen von den Anbietern und Herstellern als zeitlich begrenzte<span id="polarion-comment:379"></span> Ausnahme vom Profilingverbot erhoben und ausschließlich für den genannten Zweck verwendet werden.</span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123620">
   <p><b>A_22814</b></p>
   <p>TI-Messenger-Anbieter DÜRFEN NICHT Daten zu Profilingzwecken sammeln. Dies betrifft insbesondere eine Überwachung welche Akteure mit welchen anderen Akteuren kommunizieren. <span id="polarion-comment:228"></span><br> <br> <span style="font-style: italic;">Hinweis: Die gematik kann nach § 331 Abs. 2 SGB V Daten festlegen, die Anbieter von Komponenten und Dienste der gematik offenzulegen bzw. zu übermitteln haben, sofern diese erforderlich sind, um den gesetzlichen Auftrag der gematik zur Überwachung des Betriebs zur Gewährleistung der Sicherheit, Verfügbarkeit und Nutzbarkeit der Telematikinfrastruktur zu erfüllen. Nur die hierfür erforderlichen personenbezogenen Daten dürfen von den Anbietern und Herstellern als zeitlich begrenzte<span id="polarion-comment:380"></span> Ausnahme vom Profilingverbot erhoben und ausschließlich für den genannten Zweck verwendet werden.</span><span id="polarion-comment:258"></span><br> <span id="polarion-comment:231"></span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123619">
   <p><b>A_22813</b></p>
   <p>Falls im TI-Messenger-Fachdienst eine Protokollierung zum Zwecke der Fehler- bzw. Störungsbehebung erfolgt, MUSS der Fachdienst unter Berücksichtigung des Art. 25 Abs. 2 DSGVO sicherstellen, dass in den Protokolldaten entsprechend dem Datenschutzgrundsatz nach Art. 5 DSGVO nur personenbezogene Daten in der Art und dem Umfang enthalten sind, wie sie zur Behebung erforderlich sind und dass die erzeugten Protokolldaten im Fachdienst nach der Behebung unverzüglich gelöscht werden.&nbsp;Sofern andere gesetzliche Grundlagen wie §331 SGB V nicht überwiegen sind hierzu nur anonymisierte Daten zu protokollieren.<span id="polarion-comment:230"></span><span style="font-size: 10pt;color: #000000;background-color: #FFFFFF;line-height: 1.5;"><br></span> <span id="polarion-comment:262"></span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123617">
   <p><b>A_22811</b></p>
   <p>TI-Messenger-Fachdienst-Hersteller MÜSSEN sicherstellen, dass ihre Matrix-Homeserver eine Funktion anbieten, durch die Events, Gesprächsinhalte und mit einzelnen Gesprächen assoziierte Daten (z. B. versandte Dateien) nach einem Zeitraum von 6 Monaten seit letzter Aktivität in einem Raum&nbsp;gelöscht werden. Hersteller MÜSSEN sicherstellen, dass der Zeitraum durch den <span id="polarion-comment:356"></span>Akteur in der Rolle "Org-Admin"&nbsp;konfigurierbar ist. Diese Funktion DARF über Opt-Out durch den <span id="polarion-comment:357"></span>Akteur&nbsp;in der Rolle "Org-Admin" deaktivierbar sein. Diese Funktion DARF darüber realisierbar sein, dass nach Verstreichen der Frist Teilnehmer einen Gesprächsraum verlassen und der Raum nach Verlassen aller Teilnehmer automatisch gelöscht wird.<span style="background-color: #CDE6EB;"><br> </span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123618">
   <p><b>A_22808</b></p>
   <p>TI-Messenger-Services MÜSSEN sicherstellen<span id="polarion-comment:384"></span>, dass die Push-Gateways externe Push-Dienste datenschutzkonform nutzen. Hierzu werden folgende Kriterien definiert, die in jedem Fall beachtet werden MÜSSEN: 
    <ul> 
     <li>Alle Push-Nachrichteninhalte, auf die der Push-Anbieter nicht zugreifen können muss,<span id="polarion-comment:53"></span> MÜSSEN verschlüsselt werden.</li> 
     <li>Push-Nachrichten MÜSSEN vor dem Versenden um einen Zufallswert von 0-10 Sekunden verzögert werden, um timingbasierte Profilbildung zu erschweren.<span id="polarion-comment:329"></span></li> 
     <li>Wenn ein Ziel-Client gerade aktiv ist, soll dieser selbsttätig auf einkommende Nachrichten lauschen und nicht per Push benachrichtigt werden.</li> 
     <li>Push-Nachrichten dürfen keine Nachrichteninhalte enthalten, ihre Funktion besteht lediglich darin Clientsysteme zu informieren, dass Nachrichten abrufbar sind und eine Synchronisierung mit dem Homeserver nötig ist. <span id="polarion-comment:387"></span></li> 
    </ul> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132658">
   <p><b>A_22965</b></p>
   <p>TI-Messenger-Anbieter MÜSSEN sicherstellen<span id="polarion-comment:385"></span>, dass die Push-Gateways externe Push-Dienste datenschutzkonform nutzen. Hierzu werden folgende Kriterien definiert, die in jedem Fall beachtet werden MÜSSEN: 
    <ul> 
     <li>Push-Benachrichtigungen dürfen erst nach expliziter Zustimmung der Nutzer erfolgen (Opt-In).</li> 
     <li>Es MÜSSEN Push-Anbieter gewählt werden, die eine Wahrung der Betroffenenrechte gemäß DSGVO gewährleisten.<span id="polarion-comment:386"></span> </li> 
    </ul> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123637">
   <p><b>A_22818</b></p>
   <p>TI-Messenger-Fachdienst-Hersteller MÜSSEN Maßnahmen umsetzen, um die Auswirkung von unentdeckten Schwachstellen in benutzten Software-Bibliotheken zu minimieren.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_97"> <span style="font-style: italic;">Hinweis zu A_22818: Beispielmaßnahmen sind in [OWASP Proactive Control#C2] zu finden.&nbsp;Das gewählte Verfahren MUSS die gleiche Wirksamkeit aufweisen, wie die Kapselung gemäß [OWASP Proactive Control#C2 Punkt 4].</span> </p>
  <p id="polarion_99"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123635">
   <p><b>A_22819</b></p>
   <p>Falls der TI-Messenger-Fachdienst-Hersteller entscheidet, eine CC-Zertifizierung statt eines Produktgutachtens durchzuführen, MUSS der Hersteller bei der Einreichung eines CC-Zertifizierungsantrags sein Security-Target-Dokument der gematik zur Verfügung stellen. In diesem MÜSSEN mindestens beschrieben sein: 
    <ul>
     <li>die zusätzlichen Funktionen des TI-Messenger-Fachdienstes,&nbsp;</li>
     <li>die in den zusätzlichen Funktionen verarbeiteten Daten,</li>
     <li>die Schnittstellen zwischen dem TI-Messenger-Fachdient des Akteurs und den ggf. genutzten Backend-Diensten der zusätzlichen Funktionen inklusive ihrer Sicherheitsmaßnahmen und&nbsp;</li>
     <li>die Sicherheitsannahmen an den TI-Messenger-Fachdienst des Akteurs und die Ausführungsumgebung.<br></li>
    </ul> <b>&lt;=</b></p>
  </div>
  <p id="polarion_90"></p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123616">
   <p><b>A_22810</b></p>
   <p>TI-Messenger-Fachdienst-Hersteller MÜSSEN sämtliche, nicht in der TI-Messenger-Spezifikation beschriebenen, Abweichungen vom Matrix-Protokoll oder den MUST- oder SHOULD-Empfehlungen des Matrix-Protokolls dokumentieren und begründen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_250"> <span style="font-style: italic;">Hinweis: Gemeint sind hier nur tatsächliche Abweichungen von Setzungen der Matrix-Spezifikation und nicht zusätzliche Funktionen, die auf dem TI-Messenger-Dienst aufbauen und produktspezifisch sind.</span><span style="font-style: italic;background-color: #FFFF99;"><br> <br> </span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123621">
   <p><b>A_22812</b></p>
   <p>TI-Messenger-Fachdienst-Hersteller MÜSSEN sicherstellen, dass alle implementierten Funktionen, die über den gewöhnlichen Funktionsumfang einer TI-Messenger-Komponente hinausgehen die Sicherheit des Produkts nicht gefährden und die Interoperabilität mit anderen TI-Messenger-Produkten gewährleisten. <br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132138">
   <p><b>A_22928</b></p>
   <p>TI-Messenger-Anbieter MÜSSEN als Administratoren Personal einsetzen, welches für die damit verbundenen Aufgaben und Themen der Informationssicherheit geschult und sensibilisiert wurden. Anbieter MÜSSEN technisch sicherstellen, dass nur die berechtigten Administratoren administrativen Zugriff auf die zu verwaltenden Messenger-Services haben.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123628">
   <p><b>A_22816</b></p>
   <p>TI-Messenger-Hersteller MÜSSEN&nbsp;sicherstellen, dass die Funktionen Cross-Signing und Secure Secret Storage and Sharing<span style="font-size: 12pt;color: #333333;line-height: 1.5;">&nbsp;(</span>SSSS) zur Device Verification vom Fachdienst unterstützt werden. Es MUSS die Spezifikation hinsichtlich Ende-zu-Ende Verschlüsselung vollständig befolgt werden.<span style="font-size: 11pt;background-color: #FFFF00;line-height: 1.5;"><br> </span> <b>&lt;=</b></p>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-119137">4.2 Authentifizierung</h3>
  <p id="polarion_160"> Ein Akteur in der Rolle "Org-Admin" MUSS sich über das vom TI-Messenger-Anbieter bereitgestellte Frontend eines&nbsp; Registrierungs-Dienstes mit der Identität (SMC-B) der Organisation gegenüber dem Registrierungs-Dienst <span id="polarion-comment:394"></span>authentisieren, um einen oder mehrere Messenger-Services für seine Organisation registrieren zu können. </p>
  <p id="polarion_100"> Damit Akteure Ad-Hoc-Nachrichten austauschen können, MÜSSEN sich diese an ihrem Messenger-Service <span id="polarion-comment:393"></span>authentisieren. Die Authentisierung MUSS hierbei über ein zwischen der Organisation und dem Anbieter vereinbartes Authentifizierungsverfahren erfolgen. Wurden die Akteure erfolgreich an ihrem Messenger-Service authentifiziert, erhalten sie ein von ihrem Homeserver ausgestelltes Matrix-ACCESS_TOKEN, welches für die spätere Authentifizierung des TI-Messenger-Clients verwendet wird. </p>
  <p id="polarion_85"> <span id="polarion-comment:9"></span> </p>
  <p id="polarion_241"> <span style="font-weight: bold;"><br> IDP-Dienst</span> <span id="polarion-comment:214"></span> <span id="polarion-comment:295"></span> </p>
  <p id="polarion_28"> Der zentrale <span id="polarion-comment:300"></span>IDP-Dienst der gematik wird benötigt, um eine Organisation am Registrierungs-Dienst zu authentifizieren und den TI-Messenger-Clients Schreibzugriff auf das VZD-FHIR-Directory zu ermöglichen. Hierfür MÜSSEN der Registrierungs-Dienst und die TI-Messenger-Clients am zugelassenen IDP-Dienst der gematik gemäß [gemSpec_IDP_FD] registriert sein. Diese MÜSSEN den ausgestellten Security Tokens (ID_TOKEN) dieses&nbsp;IDP-Dienstes vertrauen. <span style="background-color: #FFFF99;"><span id="polarion-comment:299"></span></span> </p>
  <p id="polarion_173"> Im Rahmen der Registrierung des VZD-FHIR-Directory am IDP-Dienst werden notwendige Claims für das ID_TOKEN (bestätigte Identifikationsmerkmale für den Akteur) festgelegt. Der Anbieter des TI-Messengers MUSS über einen organisatorischen Prozess beim zugelassenen IDP-Dienst folgende Claims im ID_TOKEN vereinbaren:<span style="background-color: #FFFF99;"><br> <br> </span> </p>
  <p id="polarion_36" style="text-align: left;" data-keep-next="true" class="polarion-rte-caption-paragraph"> Tabelle <span data-sequence="Tabelle" class="polarion-rte-caption">1</span>: Inhalte der Claims für SMC-B/HBA </p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=7" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 266.75px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Leistungserbringerinstitutionen (SMC-B)</th> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;width: 313.438px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Leistungserbringer (HBA)</th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 266.75px;height: 146px;border: 1px solid #CCCCCC;padding: 5px;"> 
      <ul> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">ProfessionOID</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">idNummer</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">organizationName</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">acr</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">aud</span></li> 
      </ul> </td> 
     <td style="text-align: left;vertical-align: top;width: 313.438px;height: 146px;border: 1px solid #CCCCCC;padding: 5px;"> 
      <ul> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">ProfessionOID</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">idNummer</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">given_name</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">family_name</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">acr</span></li> 
       <li><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">aud</span></li> 
      </ul> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_43"> Die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">ProfessionOID</span> gibt an um welche Art von Leistungserbringer (z. B. Arzt, Zahnarzt etc.) es sich handelt. Die <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">idNummer</span>&nbsp;beinhaltet die Telematik-ID für Organisationen des Gesundheitswesens und Leistungserbringer.<span style="background-color: #FFFFCC;"><span id="polarion-comment:215"></span><span id="polarion-comment:168"></span></span> </p>
  <p id="polarion_208"></p>
  <p id="polarion_242"> <span style="font-weight: bold;">Verwaltung der Nutzersession</span> </p>
  <p id="polarion_169">Die Verwaltung der Nutzersession MUSS wie in der Matrix-Spezifikation beschrieben erfolgen.</p>
  <p id="polarion_76"></p>
  <p id="polarion_17"> <span style="font-weight: bold;">2-Faktor-Atuthentifizierung</span> </p>
  <p id="polarion_102"> Der TI-Messenger-Service MUSS zur Authentisierung der Akteure mindestens eine 2-Faktor-Authentifizierung durchsetzen. Der zweite Faktor MUSS den Sicherheitsempfehlungen des BSI gemäß [BSI 2-Faktor] zur&nbsp;<span style="font-size: 10pt;line-height: 1.5;">Resilienz gegen Angriffe aus der Ferne,&nbsp; mindestens mit mittlerer Bewertung genügen. Der Anbieter MUSS sicherstellen, dass mindestens eine Authentisierung mittels OIDC-Authenticator&nbsp;unterstützt wird und technische Optionen für die Organisation gegeben sind, damit beide Faktoren nicht durch einen Angriffsvektor kompromittiert werden können.&nbsp;</span><span style="font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"><span id="polarion-comment:404"></span></span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118979">4.3 DNS-Namensauflösung</h3>
  <p id="polarion_32">Für die Namensauflösung der vom TI-Messenger-Fachdienst angebotenen Außenschnittstellen, werden DNS-Server im Internet verwendet. Der vereinbarte Abfrage-Record MUSS durch den jeweiligen TI-Messenger-Anbieter bereitgestellt werden und MUSS in öffentlichen DNS-Servern eingetragen sein.</p>
  <p id="polarion_42"> Wird bei der Nutzung eines Messenger-Service für eine Organisation eine auf die Domain der Organisation bezogene Benamung gewählt, erfolgt die Eintragung der notwendigen DNS-Records auf DNS-Server im Internet durch die Administration der Organisation.<span style="font-size: 10pt;line-height: 1.5;"> </span> </p>
  <p id="polarion_221"></p>
  <p id="polarion_86"> <span id="polarion-comment:107"></span> </p>
  <p id="polarion_71"> <span style="font-weight: bold;">Identifizierung von Messenger-Services</span> </p>
  <p id="polarion_72"> <span style="font-weight: normal;">Jeder Messenger-Service MUSS durch einen Matrix-Homeservernamen identifiziert werden, der aus einem Hostnamen und einem optionalen Port besteht. Weitere Informationen finden sich in [Server-Server API#Server discovery].</span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-119240">4.4 Test</h3>
  <p id="polarion_87" class="MsoNormal"> <span id="polarion-comment:237"></span><span id="polarion-comment:239"></span>Produkttests zur Sicherstellung der Konformität mit der Spezifikation sind vollständig in der Verantwortung der Anbieter/Hersteller des TI-Messenger-Clients. Die gematik konzentriert sich bei der Zulassung auf das Zusammenspiel der Produkte durch E2E- und IOP Tests.<span id="polarion-comment:331"></span> </p>
  <p id="polarion_207" class="MsoNormal">Die eigenverantwortlichen Produkttests bei den Industriepartnern umfassen:</p>
  <ul id="polarion_209"> 
   <li>Testumgebung entwickeln,</li> 
   <li>Testfallkatalog erstellen (für eigene Produkttests) und<br> </li> 
   <li>Produkttest durchführen und dokumentieren.</li> 
  </ul>
  <p id="polarion_210" class="MsoNormal">Die Hersteller der TI-Messenger-Fachdienste MÜSSEN zusichern, dass die gematik die Produkttests der Industriepartner in Form von Reviews der Testkonzepte, der Testspezifikationen, der Testfälle und mit dem Review der Testprotokolle (Log- und Trace-Daten) überprüfen kann.</p>
  <p id="polarion_212" class="MsoNormal">Die gematik fördert eine enge Zusammenarbeit und unterstützt Industriepartner dabei, die Qualität der Produkte zu verbessern. Dies erfolgt durch die Organisation zeitnaher IOP-Tests, die Synchronisierung von Meilensteinen und regelmäßige industriepartnerübergreifende Test-Sessions. Die Test-Sessions umfassen&nbsp;gegenseitige IOP- und E2E Tests.</p>
  <p id="polarion_220"> Die gematik stellt eine TI-Messenger-Dienst Referenzimplementierung zur Verfügung. Zur Sicherstellung der Interoperabilität zwischen verschiedenen TI-Messenger-Fachdiensten innerhalb des TI-Messenger-Dienstes MUSS der TI-Messenger-Fachdienst eines TI-Messenger-Anbieters gegen die Referenzimplementierung (TI-Messenger-Client und TI-Messenger-Fachdienst) getestet werden.<br> </p>
  <p id="polarion_127"> <span style="background-color: #FFFF99;"><span id="polarion-comment:139"></span><span id="polarion-comment:138"></span></span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-124200|layout=3">
   <p><b>ML-124200</b></p>
   <p>Der Hersteller<span id="polarion-comment:330"></span> des TI-Messenger-Fachdienstes MUSS den Fachdienst gegen die Referenzimplementierung erfolgreich testen. Die Testergebnisse sind der gematik vorzulegen.<br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_98"> <span style="background-color: #FFCCCC;"><span id="polarion-comment:264"></span></span><span id="polarion-comment:265"></span>Für die Anbieter Zulassung <span id="polarion-comment:332"></span>MÜSSEN die TI-Messenger-Fachdienste und&nbsp;TI-Messenger-Clients vom TI-Messenger-Anbieter bereitgestellt werden. Um einen automatisierten Test für den TI-Messenger-Dienst zu ermöglichen, MUSS die Test-App des TI-Messenger-Clients zusätzlich ein Testtreiber-Modul intern oder extern zur Verfügung stellen. Dieses MUSS die Funktionalitäten der produktspezifischen Schnittstelle des TI-Messenger-Clients über eine standardisierte Schnittstelle von außen zugänglich machen und einen Fernzugriff ermöglichen. Das Testtreiber-Modul darf die Ausgaben des TI-Messenger-Clients gemäß der technischen Schnittstelle aufarbeiten, aber darf die Inhalte nicht verfälschen.&nbsp;Eine genaue Beschreibung des Testvorgehens ist in der [gemSpec_TI_Messenger-Client] zu finden.<span style="background-color: #FFFF99;"><br> </span> </p>
  <p id="polarion_115"> Die gematik testet im Rahmen der&nbsp;Zulassungsverfahren auf Basis von Anwendungsfällen. Dabei wird sich auf die Anwendungsfälle aus der [gemSpec_TI-Messenger-Dienst]<span id="polarion-comment:333"></span> bezogen. Hierbei wird versucht möglichst viele Funktionsbereiche der Komponenten des TI-Messenger-Dienstes einzubeziehen. Die Tests werden zunächst gegen die&nbsp;Referenzimplementierung der gematik durchgeführt. In diesem Schritt wird&nbsp;die Funktionalität&nbsp;des Zulassungsobjektes TI-Messenger-Dienste geprüft. Anschließend wird mit den IOP- und E2E Tests&nbsp;die Interoperabilität zwischen den verschiedenen Anbietern nachgewiesen. Hierfür werden dann alle bereits zur Verfügung stehenden TI-Messenger-Dienste (die Test-Instanzen&nbsp;der einzelnen Hersteller) zusammengeschlossen und anschließen gegeneinander getestet. Alle Anbieter MÜSSEN bereits im Vorfeld diese IOP- und E2E Tests&nbsp;selbständig&nbsp;und <span style="font-size: 10pt;line-height: 1.5;">eigenverantwortlich </span>durchführen. Bei Problemen im Rahmen der Zulassung MÜSSEN die Anbieter bei der Analyse unterstützen. </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-119241">4.5 Betrieb</h3>
  <p id="polarion_184"> Der Betrieb des Fachdienstes wird durch den TI-Messenger-Anbieter verantwortet. Entsprechend dem Betriebskonzept [gemKPT_Betr#Anbieterkonstellationen], KANN <span id="polarion-comment:124"></span>der Betrieb auch an Unterauftragnehmer aus- bzw. verlagert werden oder <span style="font-style: italic;">on-premise</span> gehostet werden. Die Koordination der jeweiligen Komponenten sowie die Erfüllung der Anforderungen verbleiben jedoch beim Anbieter. Dieser KANN in Abstimmung mit seinen Nutzern und Dienstleistern Verträge abschließen um den sicheren Betrieb aufrecht zu erhalten.<span id="polarion-comment:225"></span><span id="polarion-comment:183"></span> </p>
  <p id="polarion_219"> <br> <span id="polarion-comment:260"></span>Anforderungen zu Performance und Reporting sind den entsprechenden Produkt- und Anbietertypsteckbriefen u.a. den Dokumenten [gemSpec_Perf] und [gemKPT_Betr] zu entnehmen.<br> </p>
  <p id="polarion_154"> <span id="polarion-comment:187"></span> </p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-133260">4.5.1 Monitoring und Betriebssteuerung</h4>
  <p id="polarion_81">Der TI-Messenger-Anbieter MUSS das Service Monitoring der gematik technisch-organisatorisch unterstützen.</p>
  <p id="polarion_84"> Dafür kann es z.B. notwendig sein, dass entsprechende Accounts auf Homeservern eingerichtet werden. Das Service Monitoring SOLL dabei zu keinen technischen Veränderungen an den Produkten führen.<br> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133263">
   <p><b>A_23092</b></p>
   <p>Der TI-Messenger Fachdienst MUSS mindestens alle 24 Stunden, für alle bei ihm registrierten Organisationen mit einem Messenger-Service, prüfen, ob diese im VZD-FHIR-Directory als "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">active</span>" (<span style="font-size: 10pt;line-height: 1.5;">Organization.active)</span> eingetragen sind.<span id="polarion-comment:371"></span><br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133261">
   <p><b>A_23093</b></p>
   <p>Wenn die Organisation nicht mehr im VZD-FHIR-Directory "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">active</span>" (<span style="font-size: 10pt;line-height: 1.5;">Organization.active)</span> ist, MUSS der TI-Messenger-Anbieter diese darüber informieren.<br> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-133262">
   <p><b>A_23094</b></p>
   <p>Wenn die Organisation länger als 30 Kalendertage nicht im VZD-FHIR-Directory "<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">active</span>" (<span style="font-size: 10pt;line-height: 1.5;">Organization.active)&nbsp;</span>ist, MUSS der TI-Messenger-Anbieter die Domäne dieses Messenger-Service&nbsp;aus der Föderation löschen (siehe FHIR-VZD: <span style="font-size: 10pt;line-height: 1.5;">I_VZD_TIM_Provider_Services, DELETE /federation/{domain}</span>). Dann DARF erst nach erneuter Authentifizierung mit der SMC-B der Dienst wieder genutzt werden, siehe AF_10103.<span id="polarion-comment:369"></span><br> <b>&lt;=</b></p>
  </div>
  <p id="polarion_92"> <span style="font-weight: bold;">Kontrollierte Außerbetriebnahme</span> </p>
  <p id="polarion_95"> Wenn z. B. das Vertragsverhältnis zwischen Kunde und TI-Messenger-Anbieter ausläuft, so MUSS der TI-Messenger-Anbieter die dazugehörige Domäne dieses Messenger-Service aus der Föderation löschen (siehe FHIR-VZD: <span style="font-size: 10pt;line-height: 1.5;">I_VZD_TIM_Provider_Services, DELETE /federation/{domain}</span>) und den Messenger-Service abschalten, so dass dieser nicht mehr erreicht werden kann.<span id="polarion-comment:373"></span><br> </p>
  <p id="polarion_163"> <span id="polarion-comment:188"></span> </p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118372">5 Funktionsmerkmale</h2>
  <p id="polarion_108">Im folgenden Kapitel wird der TI-Messenger-Fachdienst bezogen auf seine Teilkomponenten funktional beschrieben. Der TI-Messenger-Fachdienst ist die Kernkomponente des TI-Messenger-Dienstes. Dieser stellt alle Schnittstellen bereit, die für die Kommunikation innerhalb des TI-Messenger-Dienstes benötigt werden.</p>
  <p id="polarion_30"> In der folgenden Abbildung ist der TI-Messenger-Fachdienst als Whitebox dargestellt:<br> </p>
  <p id="polarion_62" style="text-align: center;"> <img src="attachments/102-screenshot-20220622-131443.png" style="width: 600px;height: 654px;"> </p>
  <p id="polarion_56" style="text-align: center;" class="polarion-rte-caption-paragraph"> <span id="polarion-comment:223"></span> <span style="background-color: #FFFF99;"><span id="polarion-comment:354"></span></span>Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">3</span>: Funktionaler Aufbau des TI-Messenger-Fachdienstes </p>
  <p id="polarion_64"></p>
  <p id="polarion_57"> Die in der Abbildung grün dargestellten Boxen zeigen die Schnittstellen, die am TI-Messenger-Fachdienst aufgerufen werden. Rot dargestellte Boxen zeigen die Schnittstellen, über die der TI-Messenger-Fachdienst weitere Services anderer Komponenten nutzt. Eine Ausnahme bildet die Kommunikation zwischen den TI-Messenger-Fachdiensten. Hier wird die Kommunikation bilateral zwischen den zur <span style="font-style: normal;">TI-</span>Föderation gehörenden Fachdiensten realisiert. Die in der Abbildung rot dargestellte Linie vom Registrierungs-Dienst zum Internet zeigt die vom Frontend des Registrierungs-Dienstes verwendete Schnittstelle. Diese wird nicht normativ von der gematik definiert. Die Ausgestaltung obliegt dem jeweiligen TI-Messenger-Anbieter.<br> <span id="polarion-comment:269"></span><span id="polarion-comment:109"></span><span id="polarion-comment:35"></span> </p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-122270">5.1 Funktionen der Systemkomponenten</h3>
  <p id="polarion_96">Im folgenden Kapitel werden alle für den Betrieb des TI-Messenger-Fachdienstes notwendigen Komponenten funktional beschrieben.</p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122271">5.1.1 Registrierungs-Dienst</h4>
  <p id="polarion_133"> Der Registrierungs-Dienst bietet <span id="polarion-comment:350"></span>zwei Schnittstellen an.&nbsp;In der folgenden Abbildung sind die von ihm bereitgestellten (grün) und genutzten (rot) Schnittstellen dargestellt: </p>
  <p id="polarion_60"></p>
  <p id="polarion_88" style="text-align: center;" class="polarion-rte-caption-paragraph"> <img src="attachments/100-screenshot-20220622-120615.png" style="width: 700px;height: 215px;"> </p>
  <p id="polarion_74" style="text-align: center;" class="polarion-rte-caption-paragraph"> <br> <span id="polarion-comment:349"></span>Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">4</span>: Übersicht der Schnittstellen am Registrierungs-Dienst&nbsp; </p>
  <p id="polarion_146"></p>
  <p id="polarion_29"> <span style="font-style: italic;">Hinweis: Bei der in der Abbildung dargestellte Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span> handelt es sich um eine abstrakte interne Schnittstelle am Registrierungs-Dienst mit der den Messenger-Proxies mehrere Funktionalitäten bereitgestellt werden. Die Umsetzung der bereitzustellenden Funktionalitäten (<span id="polarion-comment:351"></span>Bereitstellung der Föderationsliste und Berechtigungsprüfung - Stufe 3) am Registrierungs-Dienst kann auch über separate Schnittstellen erfolgen. </span><br> </p>
  <p id="polarion_152"> <span style="font-weight: bold;">Administration </span> </p>
  <p id="polarion_165"> <span style="font-size: 10pt;line-height: 1.5;">Der TI-Messenger-Fachdienst MUSS eine Schnittstelle für die Administration am Registrierungs-Dienstes bereitstellen. Dies ist notwendig, damit ein Onboarding-Prozess für die Registrierung von Messenger-Services gewährleistet wird.&nbsp;Der Registrierungs-Dienst MUSS es ermöglichen einen neuen Messenger-Service über ein Frontend des Registrierungs-Dienstes zu erzeugen. Die Ausgestaltung des Frontends sowie der Schnittstelle am Registrierungs-Dienst (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_Registration</span>) ist dem jeweiligen TI-Messenger-Anbieter überlassen. </span>Der R<span style="font-size: 10pt;line-height: 1.5;">egistrierungs-Dienst MUSS bei einer neuen Registrierungsanfrage automatisiert den durch den zuständigen&nbsp;IDP-Dienst ausgestellten ID_TOKEN (gemäß Kapitel "Authentifizierung") validieren. Bei der Validierung MUSS der Registrierungs-Dienst die im ID_TOKEN enthaltene<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> ProfessionOID</span> gegen die in der Tabelle "Tab_PKI_403-03 OID-Festlegung Institutionen im X.509-Zertifikat der SMC-B" gelisteten OIDs gemäß [gemSpec_OID] prüfen. <span id="polarion-comment:398"></span>Nach erfolgreicher Authentifizierung einer Organisation am Registrierungs-Dienst MUSS ein Admin-Account für die Organisation auf dem Registrierungs-Dienst angelegt werden. <span id="polarion-comment:405"></span>Dieser MUSS für die<span id="polarion-comment:396"></span>&nbsp;Authentisierung des Akteurs in der Rolle "Org-Admin" eine 2-Faktor-Authentifizierung verwenden und die Sicherheitsempfehlungen des BSI [BSI 2-Faktor] berücksichtigen. Zur Vermeidung von Angriffen aus der Ferne auf den 2. Faktor ist ein Verfahren zu wählen, das mindestens mit "mittel" bewertet ist.&nbsp;Der Anbieter MUSS sicherstellen, dass mindestens eine Authentisierung mittels OIDC-Authenticator unterstützt wird und technische Optionen für die Organisation gegeben sind, damit beide Faktoren nicht durch einen Angriffsvektor kompromittiert werden können. <span id="polarion-comment:406"></span>Ist bereits für die Organisation ein Admin-Account vorhanden, DARF NICHT eine erneute initiale Authentisierung mit Hilfe der SMC-B für diese Organisation möglich sein. </span> </p>
  <p id="polarion_79"> <span style="font-size: 10pt;line-height: 1.5;">Der Admin-Account ermöglicht es einem&nbsp;Akteurs in der Rolle "Org-Admin" einen oder mehrere Messenger-Services für seine&nbsp;Organisation zu registrieren. Die in der Registrierungsanfrage für eine Domain übergebene Matrix-Domain wird durch den Registrierungs-Dienst über die Schnittstelle&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_VZD_</span></span><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">TIM_Provider_Services</span> am VZD FHIR-Proxy in die Föderation eingetragen<span style="font-size: 10pt;line-height: 1.5;">.&nbsp;Ebenfalls MUSS der Registrierungs-Dienst dem Frontend des Registrierungs-Dienstes die erstelle Matrix-Domain für den Zugriff auf den beantragten Messenger-Service übergeben. Die Abstimmung bezüglich der zu verwendenden Authentifizierungsverfahren eines Messenger-Service MUSS durch den Anbieter des TI-Messengers unterstützt werden. </span> </p>
  <p id="polarion_103"> <br> <span style="font-weight: bold;">Authentifizierung am VZD-FHIR-Directory</span><br> Für den Zugriff des Registrierungs-Dienstes auf das VZD-FHIR-Directory über die Schnittstelle&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services</span> des FHIR-Proxy ist eine vorherige&nbsp;Authentifizierung mittels OAuth2 Client Credentials Flow notwendig. Die dafür notwendigen&nbsp;Client-Credentials&nbsp;MUSS der TI-Messenger-Anbieter für seinen Registrierungs-Dienst beim VZD-FHIR-Directory-Anbieter beantragen. Die Beantragung erfolgt über einen Service-Request im TI-ITSM-System. Nach erfolgreicher Authentifizierung erhält der Registrierungs-Dienst ein provider-accesstoken, welches beim Aufruf der <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services</span> Schnittstelle enthalten sein MUSS.<span style="background-color: #FFFF99;"><br> </span> </p>
  <p id="polarion_189"> <span style="font-weight: bold;font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"><br> </span><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Messenger-Service in die TI-Föderation aufnehmen</span> </p>
  <p id="polarion_244"> Für die Aufnahme eines Messenger-Services eines TI-Messenger-Fachdienstes in die TI-Föderation des TI-Messenger-Dienstes, MUSS durch den Registrierungs-Dienst die vom Frontend des Registrierungs-Dienstes übergebene Matrix-Domain einer&nbsp;Organisation durch den Aufruf der Operation&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services/addTiMessengerDomain</span>, am VZD-FHIR-Directory, eintragen werden.&nbsp;<span id="polarion-comment:298"></span>Im Aufruf der Schnittstelle MUSS ein provider-accesstoken enthalten sein. </p>
  <p id="polarion_46"></p>
  <p id="polarion_193"> <span style="font-weight: bold;">Bereitstellung der Föderationsliste</span> </p>
  <p id="polarion_199"> Der Registrierungs-Dienst MUSS eine Liste aller verifizierten Matrix-Domains des VZD-FHIR-Directory vorhalten und diese den Messenger-Proxies über eine interne Schnittstelle bereitstellen.&nbsp;Die Ausgestaltung der Schnittstelle am Registrierungs-Dienst (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span>) ist dem jeweiligen TI-Messenger-Anbieter überlassen. </p>
  <p id="polarion_66"> Inhalt der Föderationsliste die der Registrierungs-Dienst über die Schnittstelle den Messenger-Proxies bereitstellen MUSS, sind die Hashes aller an der Föderation beteiligten Matrix-Domainnamen. Der Registrierungs-Dienst MUSS die aktuelle TI-Föderationsliste am VZD-FHIR-Directory abfragen. Für den Abruf MUSS die am FHIR-Proxy des VZD-FHIR-Directory bereitgestellte&nbsp; Operation&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services/getFederationList</span> aufgerufen werden.&nbsp;Im Aufruf der Schnittstelle MUSS ein provider-accesstoken enthalten sein. Die Abfrage der Föderationsliste MUSS stündlich erfolgen.<span id="polarion-comment:290"></span> Die Prüfung auf Aktualität der Föderationsliste des Registrierungs-Dienstes MUSS zusätzlich bei jeder Anfrage durch einen Messenger-Proxy zur Bereitstellung der Föderationsliste über eine Abfrage beim FHIR-Proxy des VZD-FHIR-Directory erfolgen. Die Prüfung auf Aktualität erfolgt durch den Abgleich der Versionen der Föderationslisten. Nach dem Erhalt einer neuen Föderationsliste vom VZD-FHIR-Directory MUSS diese vom Registrierungs-Dienst den Messenger-Proxies für die Prüfung der Organisationszugehörigkeit über die interne Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span> bereitgestellt werden. </p>
  <p id="polarion_67"></p>
  <p id="polarion_33"> <span style="font-weight: bold;">Berechtigungsprüfung - Stufe 3</span> </p>
  <p id="polarion_47"> Der Registrierungs-Dienst MUSS eine Funktion anbieten, mit der die Überprüfung auf MXID-Einträge im VZD-FHIR-Directory möglich ist. Die Funktionalität MUSS über eine interne Schnittstelle (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span>) den Messenger-Proxies bereitgestellt werden. Die Ausgestaltung der Schnittstelle am Registrierungs-Dienst ist dem jeweiligen TI-Messenger-Anbieter überlassen. </p>
  <p id="polarion_54"> Über diese Schnittstelle MÜSSEN die MXID der beteiligten Akteure an die FHIR-Proxy Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">/tim-provider-services/whereIs </span>des VZD-FHIR-Directory übergeben werden. </p>
  <p id="polarion_63">Die Prüfung ist erfolgreich wenn:</p>
  <ul id="polarion_65"> 
   <li><span id="polarion-comment:397"></span>die MXID des einzuladenden Akteurs im Organisationsverzeichnis hinterlegt und seine Sichtbarkeit in diesem Verzeichnis nicht eingeschränkt ist oder<br> </li> 
   <li>der einladende sowie der einzuladende Akteur im Personenverzeichnis hinterlegt sind und der einzuladende Akteur seine Sichtbarkeit in diesem Verzeichnis nicht eingeschränkt hat</li> 
  </ul>
  <p id="polarion_77"> <br> War die Prüfung erfolgreich, so MUSS der Registrierungs-Dienst dies an den Messenger-Proxy übergeben. </p>
  <p id="polarion_80"></p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-123906">5.1.2 Messenger-Service</h4>
  <p id="polarion_200"> Ein Messenger-Service besteht aus den Teilkomponenten&nbsp;Matrix-Homeserver und dem Messenger-Proxy. Die Teilkomponente&nbsp;Matrix-Homeserver basiert auf dem offenen Kommunikationsprotokoll Matrix. Der&nbsp;Messenger-Proxy dient als Prüfinstanz und leitet Anfragen an den Matrix-Homeserver weiter. <span id="polarion-comment:388"></span> Welche APIs der Matrix-Spezifikation im Messenger-Service nachgenutzt werden, ist in der folgenden Abbildung dargestellt: </p>
  <p id="polarion_231"></p>
  <p id="polarion_52" style="text-align: center;"> <img src="attachments/97-screenshot-20220603-061845.png" style="width: 500px;height: 338px;"> </p>
  <p id="polarion_45" style="text-align: center;" class="polarion-rte-caption-paragraph"> Abbildung <span data-sequence="Abbildung" class="polarion-rte-caption">5</span>: Matrix-API des Messenger-Service </p>
  <p id="polarion_234"></p>
  <p id="polarion_235"> Die Abbildung "<span style="font-style: italic;">Matrix-API des Messenger Service</span>" zeigt die jeweils zu berücksichtigenden Matrix-APIs (Server-Server API und Client-Server API). Diese MÜSSEN gemäß </p>
  <ul id="polarion_237"> 
   <li>[Server-Server API] und</li> 
   <li>[Client-Server API]<span style="background-color: #FFFF99;"><span id="polarion-comment:361"></span></span></li> 
  </ul>
  <p id="polarion_238">umgesetzt werden.</p>
  <p id="polarion_239">Der Aufruf der Client-Server-API am Matrix-Homeserver MUSS immer über den Messenger-Proxy erfolgen. Dieser leitet alle durch ihn&nbsp;autorisierten Aufrufe der TI-Messenger-Clients an den Matrix-Homeserver per HTTP(S)-Forward weiter.&nbsp;Die Kommunikation der Matrix-Homeserver MUSS&nbsp;ebenfalls über den Messenger-Proxy erfolgen. Auch hier MÜSSEN die Anfragen per HTTP(S)-Forward&nbsp;für die Matrix-Server-Server-Kommunikation&nbsp;zum Matrix-Homeserver weitergeleitet werden. Zum Versenden von Push-Notifications MUSS der&nbsp;Matrix-Homeserver das Matrix-Push-Gateway-API des Push-Gateways verwenden.&nbsp;</p>
  <p id="polarion_240">Der Messenger-Proxy agiert neben der Funktion als Proxy zur Weiterleitung aller Server-Server-API- und Client-Server-API-Aufrufe&nbsp;an den Matrix-Homeserver als Kontrollinstanz zur Prüfung der für die Kommunikation notwendigen Rechte. Hierfür MUSS der Messenger-Proxy für alle Server-Server- und Client-Server-API-Endpunkte genutzt werden.</p>
  <p id="polarion_125"> Messenger-Services KÖNNEN&nbsp; dezentral oder&nbsp;<span style="font-style: italic;">on-premise</span> von einem TI-Messenger-Anbieter bereitgestellt werden. Werden durch einen TI-Messenger-Anbieter mehrere Matrix-Domains in einem gemeinsamen Messenger-Service betrieben so MUSS die logische Trennung der Matrix-Domains sichergestellt werden.<br> <span style="background-color: #FFFF99;"> </span> </p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122268">5.1.2.1 Messenger-Proxy</h5>
  <p id="polarion_83"> Der Messenger-Proxy MUSS für jeden Messenger-Service&nbsp;<span id="polarion-comment:366"></span>bereitgestellt werden.&nbsp;Werden durch einen TI-Messenger-Anbieter mehrere Matrix-Domains in einem gemeinsamen Messenger-Service betrieben so MUSS die logische Trennung der Matrix-Domains sichergestellt werden. Die&nbsp;Matrix-Server-Server-API (Server-Server Proxy) und Matrix-Client-Server-API (Client-Server Proxy) bezogenen Prüfungen KÖNNEN logisch im Messenger-Proxy umgesetzt werden. Die Art der Umsetzung bleibt dem TI-Messenger-Fachdienst-Hersteller überlassen.&nbsp;Im Folgenden wird der Funktionsumfang des Messenger-Proxies weiter beschrieben.<br> <br> <span style="font-weight: bold;">TLS-Terminierung</span><br> Alle Anfragen der TI-Messenger-Clients und anderer Messenger-Services an den Matrix-Homeserver MÜSSEN über den Messenger-Proxy geleitet werden. Die TLS-Kommunikation zwischen den TI-Messenger-Clients und dem Matrix-Homeserver MUSS am Messenger-Proxy terminiert werden. Die Absicherung der TLS-Kommunikation MUSS durch eine einseitige Serverauthentisierung unter Nutzung eines X.509-Zertifikats erfolgen. </p>
  <p id="polarion_192"> <br> <span style="font-weight: bold;">Prüfung des verwendeten Clients</span><br> Der Messenger-Proxy MUSS prüfen, ob die Anfrage von einen zugelassen&nbsp;TI-Messenger-Client erfolgt. Die Überprüfung erfolgt anhand des übergebenen Parameters&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">client_id</span> des TI-Messenger-Clients. Für die Prüfung der&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">client_id</span> MUSS diese&nbsp;zuvor vom TI-Messenger-Client-Hersteller an den TI-Messenger-Anbieter übermittelt werden. <br> <br> <span style="font-weight: bold;">HTTP(S)-Forwarding</span> </p>
  <p id="polarion_89"> Die Kommunikation zwischen TI-Messenger-Client und Matrix-Homeserver erfolgt immer über den Messenger-Proxy (Forwarding). Das Forwarding KANN sowohl über HTTP als auch über HTTPS erfolgen. Der Messenger-Proxy MUSS sowohl als <span style="font-size: 10pt;line-height: 1.5;">Reverse-Proxy als auch als Forward-Proxy fungieren. Eine Kommunikation vom Matrix-Homeserver zum TI-Messenger-Client und auch zu einem anderen Matrix-Homeserver eines anderen Messenger-Service MUSS über den Messenger-Proxy geführt werden. <br> <br> </span> </p>
  <p id="polarion_26"> <span style="font-weight: bold;">Schnittstelle für Authentifizierungsverfahren</span> </p>
  <p id="polarion_50">Für die Nutzung eines eigenen Authentifizierungs-Dienstes durch eine Organisation MUSS der Messenger-Proxy eine Schnittstelle für die Anbindung&nbsp;des Authentifizierungs-Dienstes der Organisation bereitstellen. Die Umsetzung dieser Schnittstelle MUSS durch die Organisation und dem jeweiligen TI-Messenger-Anbieter abgestimmt werden.</p>
  <p id="polarion_91"></p>
  <p id="polarion_101"> <span style="font-weight: bold;">Föderationsliste</span> </p>
  <p id="polarion_51"> <span style="font-size: 10pt;background-color: #FFCCCC;line-height: 1.5;"><span id="polarion-comment:401"></span></span><span style="font-size: 10pt;line-height: 1.5;">Der Messenger-Proxy MUSS bei seinem zuständigen Registrierungs-Dienst die Föderationsliste über die interne Schnittstelle (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span>) abrufen, die Signatur der Föderationsliste gemäß RFC7515 prüfen und diese lokal speichern. Zur Prüfung der Signatur der Föderationsliste ist das X.509-Root-CA Zertifikat der TI erforderlich. Das X.509-Root-CA Zertifikat MUSS im Truststore des Messenger-Proxies gespeichert sein. Die Struktur der Föderationsliste ist in [gemSpec_VZD_FHIR_Directory#Erzeugung und Bereitstellung der Föderationsliste] beschrieben. </span> </p>
  <p id="polarion_110">Der Messenger-Proxy MUSS wöchentlich prüfen, ob neue X.509-Root-CA-Versionen existieren und Cross-Zertifikate verfügbar sind. Falls dies der Fall ist, so MUSS der Messenger-Proxy diese neue Root-Versionen in seinen Truststore importieren.</p>
  <p id="polarion_109"> <span style="font-style: normal;">Nach der Erzeugung einer neuen&nbsp;Root-Version der X.509-Root-CA der TI werden dessen selbstsigniertes Zertifikat und Cross-Zertifikate auf den Download-Punkt gemäß [ROOT-CA]&nbsp;abgelegt. Automatisiert kann der Messenger-Proxy von dort die Verfügbarkeit neuer Versionen überwachen.&nbsp;Zusätzlich kann der folgende Download-Punkt unter [ROOT-CA-JSON] verwendet werden. Dort werden die aktuellen Root-Zertifikate inkl. deren Cross-Zertifikate gepflegt. Im Regelfall wird alle zwei Jahre eine neue Root-Version erzeugt. Die Dateigröße der heruntergeladenen JSON-Datei kann man als Hashfunktion verwenden. Hiermit kann man beispielsweise mit Hilfe des Tools <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">curl</span> die HTTP-Methode <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">HEAD</span> verwenden und damit erfahren ob die lokale Kopie der JSON-Datei noch aktuell ist. </span>Die JSON-Datei ist ein Array, in dem Associative Arrays als Elemente aufgeführt werden. Diese Elemente enthalten je ein Root-Zertifikat inkl. Cross-Zertifikate für das chronologisch vorhergehende und das nachfolgende Root-Zertifikat. D. h.,&nbsp;&nbsp;kryptographisch gesehen stellt dies eine doppelt verkettet Liste dar. Die Element im Array sind in chronologischer Ordnung sortiert. Im Folgenden wird ein Beispiel dargestellt. </p>
  <p id="polarion_132"></p>
  <table id="polarion_wiki macro name=table;params=uid=1" class="polarion-Document-table" style="width: 80%;margin-left: 0px;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="font-weight: bold;background-color: #F0F0F0;text-align: left;vertical-align: top;height: 12px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: normal;font-size: 8pt;line-height: 1.5;"><span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">{ <br> &nbsp; [<br> &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; "name" : "RCA1",<br> &nbsp; &nbsp; &nbsp; "CN" : "GEM.RCA1", <br> &nbsp; &nbsp; &nbsp; "cert" : "…base64…",<br> &nbsp; &nbsp; &nbsp; "prev” : "",<br> &nbsp; &nbsp; &nbsp; "next" : "….base64…",<br> &nbsp; &nbsp; &nbsp; "SKI" :&nbsp;"Subject-Key-Identifier als Hexwert"<br> &nbsp; &nbsp; },<br> &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; "name" : "RCA2",<br> &nbsp; &nbsp; &nbsp; …<br> &nbsp; &nbsp; },<br> &nbsp; &nbsp; {<br> &nbsp; &nbsp; &nbsp; "name" : "RCA3",<br> &nbsp; &nbsp; &nbsp; …<br> &nbsp; &nbsp; },<br> &nbsp; &nbsp; …<br> &nbsp; ]</span><br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">}</span></span></th> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_135"></p>
  <p id="polarion_123"> Der Messenger-Proxy MUSS den Gültigkeitszeitraum der Föderationsliste beachten und vor Ablauf der Gültigkeit eine neue Föderationsliste vom Registrierungsdienst abrufen. Der Gültigkeitszeitraum ist in der Föderationsliste eingetragen und ergibt sich aus den Werten von:<br> <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">"iat": &lt;Unix Timestamp, Beginn der Gültigkeit&gt;<br> "exp": &lt;Unix Timestamp, Ende der Gültigkeit&gt;</span> </p>
  <p id="polarion_121">Die Gültigkeitsdauer beträgt 30 Tage.</p>
  <p id="polarion_124"> Der Messenger-Proxy DARF NICHT eine Föderationsliste akzeptieren, die außerhalb des Gültigkeitszeitraums (<span style="font-size: 10pt;line-height: 1.5;">aktueller Unix-Timestamp&nbsp;&gt; "exp"-Unix-Timestamp oder aktueller-Unix-Timestamp&nbsp;&lt; "iat"-Unix-Timestamp</span>) liegt <span style="font-size: 10pt;line-height: 1.5;">oder eine ungültige Signatur hat</span>. Falls die Föderationsliste trotz abgelaufener Gültigkeit nicht aktualisiert werden konnte, MUSS ein Incident beim VZD-FHIR-Directory-Anbieter eingestellt werden. Die ungültige Föderationsliste SOLL bis zur Behebung des Incidents weiter genutzt werden. </p>
  <p id="polarion_128"></p>
  <p id="polarion_75"> <span style="font-weight: bold;font-size: 10pt;background-color: #FFFF99;line-height: 1.5;"><span id="polarion-comment:352"></span></span><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Bereitstellen und Administration der Freigabeliste</span> </p>
  <p id="polarion_107"> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;"> </span>Der Messenger-Proxy MUSS eine Freigabeliste vorhalten (z. B. in Form einer Lookup-Table). Die Freigabeliste dient zur Prüfung, ob einem eingehenden <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> am Messenger-Proxy zugestimmt wird (siehe Berechtigungsprüfung - Stufe 2). Der Messenger-Proxy MUSS die Schnittstelle<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;"> I_TiMessengerContactManagement </span>als REST-Webservice über HTTPS gemäß <span id="polarion-comment:360"></span>[api-messenger#TiMessengerContactManagement.yaml] in der Version 1.0.0 umsetzen. Ebenfalls MUSS es möglich sein, dass der Akteur die Freigabeliste über seinen TI-Messenger-Client administrieren kann. Darüber hinaus MUSS der Messenger-Proxy sicherstellen, dass abgelaufene Freigaben aus der Freigabeliste entfernt werden.<br> </p>
  <p id="polarion_153"> <span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Umsetzung von Prüfregeln</span> </p>
  <p id="polarion_156"> Der Messenger-Proxy MUSS das Berechtigungskonzept gemäß&nbsp;[gemSpec_TI_Messenger-Dienst#Berechtigungskonzept] unterstützen. Der Messenger-Proxy MUSS bei jedem Aufruf des RESTful-Endpunkt <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite</span> den Inhalt der Anfrage an den Matrix-Homeserver prüfen. Dies betrifft sowohl die Client-Server- als auch die Server-Server-Kommunikation. Im Folgenden werden die Prüfregeln beschrieben. <br> </p>
  <ul id="polarion_162"> 
   <li><span style="font-size: 10pt;line-height: 1.5;"> </span><span style="font-weight: bold;"> Prüfregeln als Client-Server Proxy</span></li> 
  </ul>
  <p id="polarion_31"> Der Messenger-Proxy MUSS Prüfregeln für Client-Server Anfragen unterstützen. Hierbei MUSS der Messenger-Proxy bei jedem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event </span>gemäß [Client-Server API#Room membership] den Inhalt der Anfrage an den Matrix-Homeserver wie folgt prüfen. </p>
  <p id="polarion_164"></p>
  <p id="polarion_176"> <span style="font-weight: bold;">Stufe 1 - Prüfung der TI-Föderationszugehörigkeit <br> </span><span style="font-weight: normal;">Im ersten Schritt MUSS der Messenger-Proxy prüfen, ob die Matrix-Domain im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> Teil der TI-Föderation ist. Hierfür MUSS der Messenger-Proxy in seiner lokalen Föderationsliste prüfen, ob die Matrix-Domain in dieser enthalten ist. Ist dies nicht der Fall, dann MUSS der Messenger-Proxy bei seinem zuständigen Registrierungs-Dienst über die interne Schnittstelle (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span>) eine aktuelle Liste abrufen. Ist die anschließende erneute Prüfung fehlgeschlagen, dann MUSS der Messenger-Proxy die Anfrage ablehnen. Ist die Prüfung erfolgreich, dann MUSS der Messenger-Proxy das&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> an den Matrix-Homeserver weiterleiten.</span> </p>
  <p id="polarion_177"> Bei einer erfolgreichen Föderationsprüfung wird das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> durch den Matrix-Homeserver verarbeitet. Dieser prüft, ob die Sender und Empfänger-Matrix-Domain gleich sind. Sind die Matrix-Domain gleich, dann befinden sich beide Akteure auf dem selben Messenger-Service und der einzuladende Akteur wird in einen gemeinsamen Chatraum eingeladen. Wenn die Matrix-Domain des Senders und Empfängers nicht mit der Matrix-Domain des Messenger-Services übereinstimmen, wird das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> durch den Matrix-Homeserver an den zuständigen Messenger-Proxy des einzuladenden Empfängers weitergeleitet. Hier MUSS der Messenger-Proxy die Prüfregeln als Server-Server Proxy anwenden. </p>
  <p id="polarion_191"></p>
  <ul id="polarion_202"> 
   <li><span style="font-weight: bold;font-size: 10pt;line-height: 1.5;">Prüfregeln als Server-Server Proxy</span></li> 
  </ul>
  <p id="polarion_203"> Für eingehende Server-to-Server Anfragen anderer Messenger-Proxies MUSS der Messenger-Proxy eine Authentisierung gemäß [Server-Server API#Request Authentication] durchführen. Sobald der sendende&nbsp;Matrix-Homeserver authentifiziert<span id="polarion-comment:389"></span> wurde, MUSS&nbsp;der Messenger-Proxy bei jedem <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event </span>gemäß [Server-Server API#Inviting to a room] den Inhalt der Anfrage an den Matrix-Homeserver prüfen. Hierfür MUSS der Messenger-Proxy Prüfregeln für Server-Server Anfragen unterstützen, die im Folgenden beschrieben werden. <br> <br> <span style="font-weight: bold;">Stufe 1 - Prüfung der TI-Föderationszugehörigkeit <br> </span><span style="font-weight: normal;">Im ersten Schritt MUSS der Messenger-Proxy prüfen, ob die Matrix-Domain im <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> Teil der TI-Föderation ist. Hierfür MUSS der Messenger-Proxy in seiner lokalen Föderationsliste prüfen, ob die Matrix-Domain in dieser enthalten ist. Ist dies nicht der Fall, dann MUSS der Messenger-Proxy bei seinem zuständigen Registrierungs-Dienst über die interne Schnittstelle (<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification</span>) eine aktuelle Liste abrufen. Ist die anschließende erneute Prüfung fehlgeschlagen, dann MUSS der Messenger-Proxy die Anfrage ablehnen. Ist die Prüfung erfolgreich, MUSS die Überprüfung gemäß der Stufe 2 erfolgen.</span> </p>
  <p id="polarion_204"> <br> <span style="font-weight: bold;">Stufe 2 - Prüfung der Freigabeliste </span> </p>
  <p id="polarion_205"> Im zweiten Schritt MUSS der Messenger-Proxy prüfen, ob die MXID des Einladenden in der Freigabeliste des einzuladenden Akteurs vorhanden ist. Hierfür MUSS der Messenger-Proxy über eine <span id="polarion-comment:353"></span>Abfrage seiner Freigabeliste prüfen, ob eine entsprechende Freigabe für den Einladenden vorliegt. Ist die Prüfung erfolgreich, dann MUSS der Messenger-Proxy das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> an den Matrix-Homeserver weiterleiten. Ist dies&nbsp;nicht der Fall, MUSS die Überprüfung gemäß der Stufe 3 erfolgen. </p>
  <p id="polarion_93"> <span style="font-size: 10pt;background-color: #FFCCCC;line-height: 1.5;"><span style="font-weight: bold;"> </span> </span><span style="font-size: 10pt;line-height: 1.5;"><br> <span style="font-weight: bold;">Stufe 3 - Prüfung auf existierenden VZD-FHIR-Directory Eintrag</span><br> Im dritten Schritt MUSS der Messenger-Proxy prüfen, ob die MXIDs der beteiligten Akteure im VZD-FHIR-Directory enthalten sind. Hierfür MUSS der Messenger-Proxy an seinem zuständigen Registrierungs-Dienst die interne Schnittstelle <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">I_internVerification </span></span>aufrufen. Ist die Überprüfung erfolgreich (true), MUSS der Messenger-Proxy das <span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> an den Matrix-Homeserver weiterleiten. Ist die Überprüfung nicht erfolgreich, MUSS das&nbsp;<span style="font-family: 'Courier New', Courier, monospace, HanWangKanTan;">Invite-Event</span> abgelehnt werden. </p>
  <h5 id="polarion_wiki macro name=module-workitem;params=id=ML-122273">5.1.2.2 Matrix-Homeserver</h5>
  <p id="polarion_37"> Der Matrix-Homeserver MUSS die [Server-Server API] und&nbsp;[Client-Server API] gemäß der Matrix-Spezifikationen in der Version v1.3 <span id="polarion-comment:362"></span>umsetzen. <span id="polarion-comment:390"></span><span style="font-style: normal;"><span id="polarion-comment:270"></span></span><span style="font-style: normal;background-color: #99FF99;"><span id="polarion-comment:25"></span></span> </p>
  <p id="polarion_48">Der Matrix-Homeserver eines Messenger-Services:&nbsp;</p>
  <ul id="polarion_224"> 
   <li>MUSS&nbsp;<span style="font-size: 10pt;line-height: 1.5;">Anfragen vom eigenen Messenger-Proxy akzeptieren und<br> </span></li> 
   <li><span style="font-size: 10pt;line-height: 1.5;">DARF Anfragen anderer Messenger-Proxies NICHT akzeptieren und DARF für andere Messenger-Proxies nicht erreichbar sein.<span id="polarion-comment:271"></span><span id="polarion-comment:204"></span></span></li> 
  </ul>
  <p id="polarion_225">Die vom Matrix-Homeserver verwendeten Authentifizierungsverfahren MÜSSEN konfigurierbar sein. Beim&nbsp;Anmeldeversuch&nbsp;eines neuen Akteurs an einem Matrix-Homeserver MUSS dieser alle, für diese Organisation unterstützten, Authentifizierungsverfahren zur Auswahl anbieten. Nach einer erfolgreichen Anmeldung eines Akteurs an einem Matrix-Homeserver stellt dieser ein von ihm erstelltes Matrix-ACCESS_TOKEN sowie ein Matrix-OpenID-Token&nbsp;bereit (siehe [gemSpec_TI-Messenger-Dienst#Verwendung der Token]). Das Matrix-ACCESS_TOKEN wird zukünftig für jede weitere Autorisierung am Matrix-Homeserver verwendet. Das ausgestellte Matrix-OpenID-Token&nbsp;wird für eine spätere Authentisierung&nbsp;am Auth-Service des VZD-FHIR-Directory verwendet, um ein search-accesstoken für den Lesezugriff im VZD-FHIR-Directory&nbsp;zu erhalten.</p>
  <p id="polarion_106"></p>
  <p id="polarion_69"> <span id="polarion-comment:10"></span> </p>
  <p id="polarion_94"> <span id="polarion-comment:44"></span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123905|layout=3">
   <p><b>ML-123905</b></p>
   <p>Der TI-Messenger-Fachdienst SOLL den Vorgaben von [BSI-ISI-Server] folgen. <br> <span id="polarion-comment:111"></span> <b>&lt;=</b></p>
  </div>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-123956|layout=3">
   <p><b>ML-123956</b></p>
   <p>Der TI-Messenger-Anbieter SOLL den Vorgaben von [BSI-ISI-Server] folgen. <br> <span style="background-color: #FFFF99;"><span id="polarion-comment:248"></span></span> <b>&lt;=</b></p>
  </div>
  <p id="polarion_41"> <span id="polarion-comment:284"></span> </p>
  <div id="polarion_wiki macro name=module-workitem;params=id=ML-132863|layout=3">
   <p><b>ML-132863</b></p>
   <p>Der Matrix-Homeserver ist nur über seinen zugehörigen Messenger-Proxy erreichbar.<br> <b>&lt;=</b></p>
  </div>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-122272">5.1.3 Push-Gateway</h4>
  <p id="polarion_155"> Der TI-Messenger-Fachdienst MUSS ein Push-Gateway, gemäß [Matrix Specification#Push Gateway API],&nbsp;für den TI-Messenger-Client bereitstellen. Es obliegt den <span id="polarion-comment:137"></span>TI-Messenger-Anbietern,<span id="polarion-comment:129"></span> ob eine Push-Funktion unterstützt wird. </p>
  <p id="polarion_116"> <span style="background-color: #FFFF99;"> </span> </p>
  <p id="polarion_122"></p>
  <h2 id="polarion_wiki macro name=module-workitem;params=id=ML-118387">6 Anhang A – Verzeichnisse</h2>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118388">6.1 Abkürzungen</h3>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=1" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 120px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Kürzel</span><br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 612px;height: 19.6px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Erläuterung</span><span id="polarion-comment:305"></span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span id="polarion-comment:140"></span>API</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Application Programming Interface<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">CC</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Common Criteria <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">DSGVO</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Datenschutz-Grundverordnung <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">FHIR</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Fast Healthcare Interoperable Resources</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">HBA</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Heilberufsausweis</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">HTTP</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Hyptertext Transfer Protocol</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">IDP</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-size: 9pt;line-height: 1.5;">Identity Provider</span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">JSON</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">JavaScript Object Notation</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">MXID</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Matrix-User-ID&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">OAuth</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Open Authorization</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Opt-In</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Deaktiviert mit Möglichkeit zur Aktivierung</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">OWASP</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Open Web Application Security Project</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">SMC-B</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Institutionenkarte (Security Module Card Typ B)</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">SSSS</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Secure Secret Storage and Sharing</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">TI</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Telematikinfrastruktur</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">TI-IT<span style="font-size: 10pt;line-height: 1.5;">SM</span></td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">IT-Service-Management der TI</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">TI-M</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">TI-Messenger</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">TLS</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Transport Layer Security<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 120px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">VZD</td> 
     <td style="text-align: left;vertical-align: top;width: 612px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Verzeichnisdienst <br> </td> 
    </tr> 
   </tbody> 
  </table>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118389">6.2 Glossar</h3>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=2" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 195px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Begriff</span><br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 536px;height: 19.6px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Erläuterung</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">MXID</td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;padding: 5px;">Eindeutige Identifikation eines TI-Messenger-Nutzers&nbsp;(Matrix-User-ID)</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">on-premise</td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Das Produkt wird auf eigener oder gemieteter Hardware betrieben</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Relying Party<br> </td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Vertrauenswürdige Komponente, die Zugriff auf eine sichere Anwendung ermöglicht <br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 195px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">X.509-Zertifikat</td> 
     <td style="text-align: left;vertical-align: top;width: 536px;height: 20.4px;border: 1px solid #CCCCCC;border-top: 1px solid #CCCCCC;border-bottom: 1px solid #CCCCCC;border-right: 1px solid #CCCCCC;border-left: 1px solid #CCCCCC;padding: 5px;">Ein Public-Key-Zertifikat nach dem X.509-Standard<br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_181">Das Glossar wird als eigenständiges Dokument (vgl. [gemGlossar]) zur Verfügung gestellt.</p>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118390">6.3 Abbildungsverzeichnis</h3>
  <div data-sequence="Abbildung" id="polarion_wiki macro name=tof;params=uid=1"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion_70">Abbildung 1: Systemüberblick (Vereinfachte Darstellung)</a></li>
   <li><a href="#polarion_55">Abbildung 2: Beispiel - Authentifizierung von Akteuren einer Organisation</a></li>
   <li><a href="#polarion_56">Abbildung 3: Funktionaler Aufbau des TI-Messenger-Fachdienstes</a></li>
   <li><a href="#polarion_74">Abbildung 4: Übersicht der Schnittstellen am Registrierungs-Dienst&nbsp;</a></li>
   <li><a href="#polarion_45">Abbildung 5: Matrix-API des Messenger-Service</a></li>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118391">6.4 Tabellenverzeichnis</h3>
  <div data-sequence="Tabelle" id="polarion_wiki macro name=tof;params=uid=2"></div>
  <div id="toc_container">
   <p class="toc_title"><h1></h1></p>
   <li><a href="#polarion_36">Tabelle 1: Inhalte der Claims für SMC-B/HBA</a></li>
  </div>
  <h3 id="polarion_wiki macro name=module-workitem;params=id=ML-118392">6.5 Referenzierte Dokumente</h3>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-118393">6.5.1 Dokumente der gematik</h4>
  <p id="polarion_186">Die nachfolgende Tabelle enthält die Bezeichnung der in dem vorliegenden Dokument referenzierten Dokumente der gematik zur Telematikinfrastruktur. Der mit der vorliegenden Version korrelierende Entwicklungsstand dieser Konzepte und Spezifikationen wird pro Release in einer Dokumentenlandkarte definiert; Version und Stand der referenzierten Dokumente sind daher in der nachfolgenden Tabelle nicht aufgeführt. Deren zu diesem Dokument jeweils gültige Versionsnummern sind in der aktuellen, von der gematik veröffentlichten Dokumentenlandkarte enthalten, in der die vorliegende Version aufgeführt wird.</p>
  <p id="polarion_187"></p>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=4" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">[Quelle]<br> </span></th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;"><span style="font-weight: bold;">Herausgeber: Titel</span><br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">[api-messenger]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">gematik: api-ti-messenger<br> <a href="https://github.com/gematik/api-ti-messenger/" target="_top" class="descriptionLink">https://github.com/gematik/api-ti-messenger/</a></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">[gemGlossar]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 20px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Einführung der Gesundheitskarte – Glossar</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemKPT_Betr]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Betriebskonzept Online-Produktivbetrieb</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemKPT_TI_Messenger]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Konzeptpapier TI-Messenger</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_IDP_Dienst]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation Identity Provider-Dienst<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_IDP_FD]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation Identity Provider – Nutzungsspezifikation für Fachdienste<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_Krypt]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Übergreifende Spezifikation Verwendung kryptographischer Algorithmen in der<br> Telematikinfrastruktur<br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_OID]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik:&nbsp;Spezifikation Festlegung von OIDs</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_Perf]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Übergreifend Spezifikation Performance und Mengengerüst TI-Plattform</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_SST_LD_BD]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik:&nbsp;Spezifikation Logdaten- und Betriebsdatenerfassung</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_TI_Messenger-Client]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation TI-Messenger-Client</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 205px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[gemSpec_TI_Messenger-Dienst]</td> 
     <td style="text-align: left;vertical-align: top;width: 526px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">gematik: Spezifikation TI-Messenger-Dienst<br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_68"></p>
  <h4 id="polarion_wiki macro name=module-workitem;params=id=ML-118394">6.5.2 Weitere Dokumente</h4>
  <table id="polarion_wiki macro name=table;params=width=100%|uid=5" class="polarion-Document-table" style="width: 100%;margin-left: auto;margin-right: auto;border: 1px solid #CCCCCC;empty-cells: show;border-collapse: collapse;"> 
   <tbody> 
    <tr> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Quelle]<br> </th> 
     <th style="background-color: #F0F0F0;text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Herausgeber (Erscheinungsdatum): Titel<br> </th> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[BSI 2-Faktor]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">BSI 2-Faktor Authentisierung für mehr Datensicherheit<span id="polarion-comment:391"></span><br> <a href="https://www.bsi.bund.de/DE/Themen/Verbraucherinnen-und-Verbraucher/Informationen-und-Empfehlungen/Cyber-Sicherheitsempfehlungen/Accountschutz/Zwei-Faktor-Authentisierung/Bewertung-2FA-Verfahren/bewertung-2fa-verfahren_node.html" target="_top" class="descriptionLink">https://www.bsi.bund.de/DE/Themen/Verbraucherinnen-und-Verbraucher/Informationen-und-Empfehlungen/Cyber-Sicherheitsempfehlungen/Accountschutz/Zwei-Faktor-Authentisierung/Bewertung-2FA-Verfahren/bewertung-2fa-verfahren_node.html</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Client-Server API]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification - Client-Server API<br> <a href="https://spec.matrix.org/v1.3/client-server-api/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/client-server-api/</a>&nbsp;<span id="polarion-comment:364"></span></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Matrix Specification] <br> </td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification<span id="polarion-comment:220"></span><br> <a href="https://spec.matrix.org/v1.3/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/</a>&nbsp;<span id="polarion-comment:363"></span><br> </td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[OpenID]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">OpenID Foundation<br> <a href="https://openid.net/developers/specs/" target="_top" class="descriptionLink">https://openid.net/developers/specs/</a></td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[OWASP Proactive Control]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">OWASP Proactive Controls<br> <a href="https://owasp.org/www-project-proactive-controls/" target="_top" class="descriptionLink">https://owasp.org/www-project-proactive-controls/</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;"><span id="polarion-comment:402"></span>[ROOT-CA]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">ROOT-CA Download Punkt<br> <a href="https://download.tsl.ti-dienste.de/ECC/ROOT-CA/" target="_top" class="descriptionLink">https://download.tsl.ti-dienste.de/ECC/ROOT-CA/</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;"><span id="polarion-comment:403"></span>[ROOT-CA-JSON]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">ROOT-CA Download Punkt als JSON-Datei<br> <a href="https://download.tsl.ti-dienste.de/ECC/ROOT-CA/roots.json" target="_top" class="descriptionLink">https://download.tsl.ti-dienste.de/ECC/ROOT-CA/roots.json</a>&nbsp;</td> 
    </tr> 
    <tr> 
     <td style="text-align: left;vertical-align: top;width: 204px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">[Server-Server API]</td> 
     <td style="text-align: left;vertical-align: top;width: 527px;height: 19px;border: 1px solid #CCCCCC;padding: 5px;">Matrix Foundation: Matrix Specification - Server-Server API<br> <a href="https://spec.matrix.org/v1.3/server-server-api/" target="_top" class="descriptionLink">https://spec.matrix.org/v1.3/server-server-api/</a>&nbsp;<span id="polarion-comment:365"></span><br> </td> 
    </tr> 
   </tbody> 
  </table>
  <p id="polarion_196"></p>
  <p id="polarion_105"></p>
 </body>
</html>